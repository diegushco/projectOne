{"version":3,"sources":["webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/Subscriber.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/Subscription.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/symbol/iterator.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/symbol/rxSubscriber.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/isArray.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/observable/fromArray.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/pipe.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/subscribeToIterable.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/canReportError.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/subscribeToObservable.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/config.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/identity.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/isArrayLike.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/toSubscriber.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/UnsubscriptionError.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/isObject.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/isScheduler.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/InnerSubscriber.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/OuterSubscriber.js","webpack:///src/app/features/quoting/components/emission/emission.component.html","webpack:///src/app/features/quoting/components/emission/emission.component.ts","webpack:///src/app/features/quoting/components/emission/services/flow-route-emission.service.ts","webpack:///src/app/features/quoting/components/motor/components/others/others.component.html","webpack:///src/app/features/quoting/components/motor/components/others/others.component.ts","webpack:///src/app/features/quoting/components/emission/components/details/details.component.html","webpack:///src/app/features/quoting/components/emission/components/details/details.component.ts","webpack:///src/app/features/quoting/components/emission/components/emission-questions/emission-questions.component.html","webpack:///src/app/features/quoting/components/emission/components/emission-questions/emission-questions.component.ts","webpack:///src/app/features/quoting/components/emission/components/validity/validity.component.html","webpack:///src/app/features/quoting/components/emission/components/validity/validity.component.ts","webpack:///src/app/features/quoting/components/emission/components/paymentmethod/paymentmethod.component.html","webpack:///src/app/features/quoting/components/emission/components/paymentmethod/paymentmethod.component.ts","webpack:///src/app/features/client/components/client-data/client-data.component.html","webpack:///src/app/features/client/components/client-data/client-data.component.ts","webpack:///home/diego/SURA/Portales/node_modules/rxjs/_esm2015/internal/operators/toArray.js","webpack:///src/app/features/client/components/client-residence/client-residence.component.html","webpack:///src/app/features/client/components/client-residence/client-residence.component.ts","webpack:///home/diego/SURA/Portales/node_modules/rxjs/_esm2015/internal/operators/reduce.js","webpack:///src/app/features/client/components/client-tax-condition/client-tax-condition.component.html","webpack:///src/app/features/client/components/client-tax-condition/client-tax-condition.component.ts","webpack:///src/app/features/quoting/components/emission/services/quote.resolver.ts","webpack:///src/app/features/quoting/components/emission/emission-routing.routing.ts","webpack:///src/app/features/quoting/components/emission/emission.module.ts","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/subscribeTo.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/symbol/observable.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/subscribeToResult.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/subscribeToPromise.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/Observable.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/subscribeToArray.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/hostReportError.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/scheduled/scheduleArray.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/Observer.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/isFunction.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/util/isPromise.js","webpack:///home/diego/SURA/Portales/node_modules/rxjs/internal/observable/combineLatest.js"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isFunction_1","Observer_1","Subscription_1","rxSubscriber_1","config_1","hostReportError_1","Subscriber","_super","destinationOrNext","error","complete","_this","call","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","arguments","length","destination","empty","add","SafeSubscriber","rxSubscriber","next","subscriber","value","_next","err","_error","_complete","unsubscribe","closed","_unsubscribeAndRecycle","_parentOrParents","Subscription","exports","_parentSubscriber","observerOrNext","context","isFunction","bind","_context","config","useDeprecatedSynchronousErrorHandling","__tryOrSetError","__tryOrUnsub","hostReportError","wrappedComplete","fn","parent","Error","_unsubscribe","isArray_1","isObject_1","UnsubscriptionError_1","flattenUnsubscriptionErrors","errors","reduce","errs","concat","UnsubscriptionError","_subscriptions","remove","index","e","isArray","len","sub","isObject","push","teardown","subscription","EMPTY","tmp","indexOf","subscriptions","subscriptionIndex","splice","getSymbolIterator","Symbol","iterator","$$iterator","Math","random","$$rxSubscriber","x","Observable_1","subscribeToArray_1","scheduleArray_1","fromArray","input","scheduler","scheduleArray","Observable","subscribeToArray","identity_1","pipeFromArray","fns","identity","prev","pipe","_i","iterator_1","subscribeToIterable","iterable","item","done","return","Subscriber_1","canReportError","observer","observable_1","subscribeToObservable","obj","obs","observable","subscribe","TypeError","_enable_super_gross_mode_that_will_cause_bad_things","Promise","undefined","console","warn","stack","log","isArrayLike","toSubscriber","nextOrObserver","UnsubscriptionErrorImpl","message","map","i","toString","join","name","isScheduler","schedule","InnerSubscriber","outerValue","outerIndex","notifyNext","notifyError","notifyComplete","OuterSubscriber","apply","innerValue","innerIndex","innerSub","EmissionComponent","BaseComponent","router","storeQuote","storeEmission","storePolicy","discountService","quotingService","policyAdapter","super","modalCupos","routes","policy","discounts","loadingCosts","newCost","emissionSubscription","policySubscription","discountSubscription","lottieConfig","path","combineLatest","select","visited","dispatch","group","motor","vehicles","find","v","number","packages","selected","data","routerConf","r","forEach","element","String","replace","dataElement","question","show","disabled","shortName","visible","line","debounceTime","tap","switchMap","jobNumberFromQuotes","some","getAvailableDiscounts","job","of","first","res","applied","total","options","backdrop","keyboard","openModal","discount","adapted","adapt","getCosts","catchError","throwError","resp","costVehicles","currentCostVehicle","cv","currentCostPackage","currentPackage","externalid","costs","premiums","closeModal","FlowRouteEmissionService","nextRouteWithoutValue","filter","split","navigateByUrl","route","OthersMotorComponent","fb","carService","flowRouteEmissionService","patentBlackListService","patentUseService","bondHolderService","loop","autoplay","showGNC","disabledValidate","_CODE_GNC","_CODE_SUMMA_GNC","_CODE_EXPIRATION","hiddenFormPatent","loadingPatent$","Subject","currentBlackList","loadingPatent","buttonLabel","bondHoldersQuotesQuantity","openedModalPatentInUse","maxLength","patentPattern","clientType","params","id","Number","policyQuoteSubscription","take","quote","currentPolicy","currentMotor","c","activeMotor","applyBondHolderFlag","bondholder","type","chasis","driver","clientIsDriver","client","firstname","lastname","_dateFromStoreVigencia","period","start","dateGNC","year","parseInt","substring","month","day","minDateGNC","gncNotRequired","distinctUntilKeyChanged","initializeForms","emissionRoutesSubscription","bondHoldersTypes$","getBondHolders","code","description","approved","approvedEmission","disabledByRetrieve","form","get","disable","formClient","gnc","Validators","required","creditorPrendario","patent","license","pattern","bondHolderType","bondHolderQuotas","quotas","engineNumber","minLength","chassisNumber","driverName","driverLastName","op","jk","gncCov","coverages","ik","valueSumma","terms","_dateFromStore","formGNC","summa","expiration","patchValue","onlySelf","emitEvent","unsubscribeForm","patentInputSubscription","valueChanges","setValue","clearValidators","clientIsDriverCheckSubscription","gncCheckSubscription","openModalNoGNC","expirationInputSubscription","isoDate","Date","toISOString","current","creditorPrendarioInputSubscription","setValidators","updateValueAndValidity","reset","getCar","vehicleData","buttonAnimated","playSegments","setTimeout","checkBlackList","startDatecurrentPolicy","startDate","getDate","getMonth","slice","getFullYear","setMonth","endDate","validePatentInUse","fixedid","openModalPatentInUse","continuePatentValidate","validePatent","blacklist","modalUW","chassis","markAllAsTouched","valid","validatePatent","continue","pkg","enableRoute","toUpperCase","cov","changeRouteTitleValue","aditionalRoute","includes","modalNoGNC","pckCode","animationItem","modalPatentInUse","action","closeModalNoGNC","redirectCoverage","closeModalPatentInUse","closeUWModal","DetailsComponent","producerService","fiscalConditionService","notificationService","quoteIssueAdapter","paymentMethodService","paymentPlansService","producerStore","storeProducer","child_component","uwEmision","vehicleDetails","modalEditCoverage","packageSelected","mechanicalAssistance","isFromRetrieve","fromRetrieve","issueError$","subject","loadingIssue$","loadingFromRetrieve$","vehicles$","packageSelectedWithAssistance$","brandModelPrizeCar$","rebillingPeriod$","fiscalCondition$","additionals$","discountAndCommission$","campaign$","installments$","payment$","formsValid$","expandedDetail","getQuoteApproved","paymentMethod$","paymentPlan$","emissionStoreSubscription","emissionStoreSubscriptionRetrieve","policyStoreProducerSubscription","producerServiceSubscription","policyStoreSubscription","producerStoreSubscription","isApprovedEmission","formCampaign","FormControl","updateCostSubscription","producerSubscription","currentproducer","documentNumber","store","producer","getProfile","f","payment","paymentValidation","PaymentValidations","completeModel","validatePayment","pk","assistance","currentCost","package","cost","additionalsLenght","additionals","additionalsList","startsWith","category","brand","model","prize","statedamount","statementamount","periodMethod","method","getAllFiscalCondition","fiscalCondition","fiscalcondition","commission","campaign","paymentTerm","maximumnumberofinstallments","share","emission","getAllPaymentMethods","ps","getAllPaymentPlans","end","pp","currentPlan","plan","issuePolicy","emitPolicy","issueSuccess","issueError","reasonClose","currentCode","a","VehicleNumber","closeVehicleDetails","inspection","status","policynumber","zerokm","UNDERWRITER","notify","vehicle","currentAssistance","additionalsGroups","additionalExcludeCodes","ad","checkUW","goQuote","EmissionQuestionsComponent","routeActive","event","ValidityComponent","isLessThatToday$","retroactiveVigence","formValidaty","beginningValidity","today","moment","date","momentTodayForMinDate","subtract","momentTodayForMaxDate","minDate","maxDate","dateFromStore","dateForInput","rebillingMonths","rebillingCode","_date","toDateString","momentDate","diff","periodData","format","disabledByRetrieve$","onEnter","PaymentMethodComponent","paymentInstrument","activeTab","arrPaymentMethods","formDebit","formCredit","arrCardsStored","paymentInstruments$","paymentMethods$","activePaymentMethodId","newPaymentWay","digitalPolicy","initSlice","endSlice","arrayCardsLength","arrayCbusLength","expirationDateMask","numberMask","paymentSelectedByRetrieve","currentServerDate","disabledByRetrieveSubscription","serverDataSubscription","paymentDataSubscription","paymentTermSubscription","policyDataSubscription","creditCardSubscription","cardExpirationSubcription","debitCardSubscription","email","hj","legend","accountnumber","getPaymentInstruments","u","o","expirationdate","owner","getCreditCards","cc","creditcard","_expirationDate","dateServer","cbu","conduit","pi","setPaymentMethod","tab","displayname","lastIndexOf","expirationCard","toLowerCase","trim","cbuNumber","match","exec","array","lengthArray","img","target","src","height","ClientDataComponent","genderService","identificationService","accountService","nationalityService","maritalStatusService","_clientNService","utilService","contactService","provinceService","suraLoaderConfig","documentSelect","modalClient","modalNoClient","modalMobility","modalNewCosts","accounts","disabledFields","fiscalConditions$","iibb$","isValidateDocument","client$","clientFromEmission$","searchClient$","isLegalPerson","loadingData","formPhysicalPerson","formLegalPerson","genders$","maritalStatus$","documents$","nationalities$","documentDescription","currentAccount","showForms","clientBaseN$","accountReset","accountResetSubscription","provincesFromApi","resetResidenceValues","state","city","postalcode","street","streetnumber","apartment","floor","clarification","hasMobility","MOBILITY_CODE","newQuote","callCostsSubscription","motorConfig","snapshot","getAllProvinces","provs","getCurrentServerDate","currentDate","datetime","currentDateForMinDateTime","maxDateClient","minDateTime","minDateClient","initState","getGenders","getMaritalStatus","currentPkg","document","documentType","getDocumentTypes","getNationalities","nationatiliesFromServer","argentino","g","j","birth","nationality","maritalstatus","gender","prefix","phone","exposedPerson","_birthDate","companyname","consortium","officialorganism","cellphone","area","politicallyexposed","openModalMobility","workphone","checkClienteN","address","insured","requestAccount","officialid","requestContact","getAccounts","getContacts","fromAccount","fromContact","typePerson","primaryaddress","fromContactAddress","_address","openModalNoClient","officialId","validateClientN","ctl","blackList","officialids","primary","formData","getRawValue","contactid","workPhone","vhc","vehicleType","newCosts","externalId","productcode","newPackage","costVehicle","invoice","parseFloat","toFixed","validateDocumentNumber","animationCreated","closeModalNoClient","closeModalMobility","continueIsLegalPerson","closeModalNewCosts","toArrayReducer","arr","ClientResidenceComponent","locationService","_addressTypeService","zipCode","formClientResidence","provinces$","policyclientaddress$","primaryClientAddress$","provinceDescription","locations$","residences$","addressType$","defaultAddressType","dataByPostalCodeSubscriber","dataByPostalCode$","arrProvinces","addressIdSelected","filledQuestion","loadingPostalCode","clientIsEditable","getClientFromStore$","editable","getAddressType","ty","loadAddressSave","idd","arrayAddress","addAddress","selectAddress","getLocations","province","validatePostalCode","callCost","getLocationAndProvince","locations","zx","groupBy","mergeMap","key","accumulator","seed","source","scan","takeLast","defaultIfEmpty","acc","distinctCodes","from","Set","codeProvince","zg","ClientTaxConditionComponent","fiscalService","iibbService","fiscalConditionSelect","iibbSelect","modalFiscal","formClienTax","arrayFiscalCondition","clientData","firstTimeFiscalCondition","showCertified","showIIBB","showiibbNumber","firstTimeFiscalConditionChangeValue","CONSUMIDOR_FINAL","NORESPONSABLE","arrCondFiscalOriginal","currentTime","now","iibb","iibbNumber","endingValidity","getAllCrudIncome","xa","itemsFiscalConditionMandatory","itemsFiscalCondition","arrayConditionFiscal","noCode","afc","activateCertifiedDates","activateIIBB","activateIIBBnumber","fiscalConditionForm","iibbType","acf","dateInit","updateCrudIncomeType","getValue","updateConditionFiscal","certificate","_dateInitFromStore","_dateInit","_dateEndFromStore","_dateEnd","iibbSavedContinue","iibbNumberSavedContinue","dateEnd","isoDatebeginningValidity","isoDateendingValidity","iibbDescription","QuoteResolver","quotesService","serverDate","jobFromPolicy","jobFromEmission","getQuote","retrieve","fillPolicyAttributes","getAccountInfo","alias","populatePeriod","fleet","sort","abs","findVehicleGroup","originalcostnew","finish","firstinstallmentdue","pkgDescription","pkgs","rej","account","addresses","conf","types","methodName","methodMonths","toDate","rate","clone","component","resolve","children","EmissionRoutingModule","forChild","forFeature","playerFactory","EmissionModule","GenderService","IdentificationService","DocumentationService","AccountService","NationalityService","PeriodMethodPipe","CardNumberPipe","AddressTypeService","MaritalStatusService","ClienteNService","PatentBlackListService","QuotesService","PatentUseService","BondholderService","forRoot","player","subscribeToPromise_1","subscribeToIterable_1","subscribeToObservable_1","isArrayLike_1","isPromise_1","subscribeTo","result","isPromise","subscribeToPromise","InnerSubscriber_1","subscribeTo_1","subscribeToResult","outerSubscriber","innerSubscriber","promise","then","canReportError_1","toSubscriber_1","pipe_1","getPromiseCtor","promiseCtor","_isScalar","_subscribe","lift","operator","sink","_trySubscribe","reject","operations","toPromise","isScheduler_1","OuterSubscriber_1","subscribeToResult_1","fromArray_1","NONE","observables","resultSelector","pop","CombineLatestOperator","CombineLatestSubscriber","active","values","toRespond","unused","_tryResultSelector"],"mappings":"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Z,MAAMmF,EAA0CnF,EAAMoF,OACtDD,EAAIE,IAAM,oCACVF,EAAIG,OAAS,I,6CAndJ5D,GAAsB,gR,mDAAtBA,EAAsB,w7EDhDnC,2CACE,yCACE,yCACE,2C,iCAiCF,8BACF,8BACA,4C,iCA2KA,yCACE,6CA2CA,8CA6BF,8BACA,0CACE,0CAeE,2CACE,2EACF,8BACF,8BACF,8BACF,+B,MA3SQ,gHAiCwB,oHA8K1B,0GA2CA,6G,w9DC/MC,G,6JCqCL,uC,uBAwNM,2CAQE,qCAAG,8FAA4D,8BACjE,+B,mEA9NN,0CAOE,yCACE,yCACE,yCACE,oCACA,uCAAK,6BAAC,8BACR,8BACF,8BACA,0CACE,yCACE,sCACA,wCAAK,8BAAC,8BACR,8BACF,8BACA,2CACE,0CACE,kDACA,wCAAK,8BAAC,8BACR,8BACF,8BACF,8BACA,0CACE,2CACE,8C,oEAYF,8BACA,2CACE,8C,kCAWF,8BACA,2CACE,qD,kCASF,8BACF,8BACA,0CACE,0CACE,0CACE,2CACA,wCAAK,8BAAC,8BACR,8BACF,8BACA,2CACE,0CACE,2CACA,wCAAK,8BAAC,8BACR,8BACF,8BACA,2CACE,0CACE,mCACA,wCAAK,8BAAC,8BACR,8BACF,8BACF,8BACA,0CACE,2CACE,6C,kCAcF,8BACA,2CACE,6C,kCAcF,8BACA,2CACE,6C,kCAcF,8BACF,8BACA,0CACE,2CACE,0CACE,8CACA,wCAAK,8BAAC,8BACR,8BACF,8BACA,0CACE,0CACE,0CACA,wCAAK,8BAAC,8BACR,8BACF,8BACA,2CACE,0CACE,mCACA,wCAAK,8BAAC,8BACR,8BACF,8BACF,8BACA,0CACE,2CACE,8C,kCAgBF,8BACA,2CACE,8C,kCAkBF,8BACA,2CACE,8C,kCAgBA,+CAUF,8BACA,2CACE,2CACE,4CAIE,wCAQA,wCACA,6CACE,6DACF,8BACF,8BACF,8BACF,8BACF,8BACA,0CACE,2CACE,yCACE,8CAGE,mIAGA,wCACF,8BACF,8BACF,8BACF,8BACF,8B,kmCAnQE,4DA8BM,qEAAqD,WAcrD,oEAYA,oEAAiD,0BA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","file":"x","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isFunction_1 = require(\"./util/isFunction\");\nvar Observer_1 = require(\"./Observer\");\nvar Subscription_1 = require(\"./Subscription\");\nvar rxSubscriber_1 = require(\"../internal/symbol/rxSubscriber\");\nvar config_1 = require(\"./config\");\nvar hostReportError_1 = require(\"./util/hostReportError\");\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = Observer_1.empty;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = Observer_1.empty;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriber_1.rxSubscriber] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription_1.Subscription));\nexports.Subscriber = Subscriber;\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction_1.isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== Observer_1.empty) {\n                context = Object.create(observerOrNext);\n                if (isFunction_1.isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config_1.config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config_1.config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError_1.hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError_1.hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config_1.config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError_1.hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config_1.config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError_1.hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexports.SafeSubscriber = SafeSubscriber;\n//# sourceMappingURL=Subscriber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isArray_1 = require(\"./util/isArray\");\nvar isObject_1 = require(\"./util/isObject\");\nvar isFunction_1 = require(\"./util/isFunction\");\nvar UnsubscriptionError_1 = require(\"./util/UnsubscriptionError\");\nvar Subscription = (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction_1.isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError_1.UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray_1.isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject_1.isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError_1.UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError_1.UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexports.Subscription = Subscription;\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError_1.UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexports.getSymbolIterator = getSymbolIterator;\nexports.iterator = getSymbolIterator();\nexports.$$iterator = exports.iterator;\n//# sourceMappingURL=iterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rxSubscriber = (function () {\n    return typeof Symbol === 'function'\n        ? Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + Math.random();\n})();\nexports.$$rxSubscriber = exports.rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isArray = (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar subscribeToArray_1 = require(\"../util/subscribeToArray\");\nvar scheduleArray_1 = require(\"../scheduled/scheduleArray\");\nfunction fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable_1.Observable(subscribeToArray_1.subscribeToArray(input));\n    }\n    else {\n        return scheduleArray_1.scheduleArray(input, scheduler);\n    }\n}\nexports.fromArray = fromArray;\n//# sourceMappingURL=fromArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar identity_1 = require(\"./identity\");\nfunction pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexports.pipe = pipe;\nfunction pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity_1.identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\nexports.pipeFromArray = pipeFromArray;\n//# sourceMappingURL=pipe.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar iterator_1 = require(\"../symbol/iterator\");\nexports.subscribeToIterable = function (iterable) { return function (subscriber) {\n    var iterator = iterable[iterator_1.iterator]();\n    do {\n        var item = void 0;\n        try {\n            item = iterator.next();\n        }\n        catch (err) {\n            subscriber.error(err);\n            return subscriber;\n        }\n        if (item.done) {\n            subscriber.complete();\n            break;\n        }\n        subscriber.next(item.value);\n        if (subscriber.closed) {\n            break;\n        }\n    } while (true);\n    if (typeof iterator.return === 'function') {\n        subscriber.add(function () {\n            if (iterator.return) {\n                iterator.return();\n            }\n        });\n    }\n    return subscriber;\n}; };\n//# sourceMappingURL=subscribeToIterable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nfunction canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber_1.Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\nexports.canReportError = canReportError;\n//# sourceMappingURL=canReportError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar observable_1 = require(\"../symbol/observable\");\nexports.subscribeToObservable = function (obj) { return function (subscriber) {\n    var obs = obj[observable_1.observable]();\n    if (typeof obs.subscribe !== 'function') {\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    }\n    else {\n        return obs.subscribe(subscriber);\n    }\n}; };\n//# sourceMappingURL=subscribeToObservable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexports.config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = new Error();\n            console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction identity(x) {\n    return x;\n}\nexports.identity = identity;\n//# sourceMappingURL=identity.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nvar rxSubscriber_1 = require(\"../symbol/rxSubscriber\");\nvar Observer_1 = require(\"../Observer\");\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber_1.Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber_1.rxSubscriber]) {\n            return nextOrObserver[rxSubscriber_1.rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber_1.Subscriber(Observer_1.empty);\n    }\n    return new Subscriber_1.Subscriber(nextOrObserver, error, complete);\n}\nexports.toSubscriber = toSubscriber;\n//# sourceMappingURL=toSubscriber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UnsubscriptionErrorImpl = (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexports.UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isObject(x) {\n    return x !== null && typeof x === 'object';\n}\nexports.isObject = isObject;\n//# sourceMappingURL=isObject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\nexports.isScheduler = isScheduler;\n//# sourceMappingURL=isScheduler.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"./Subscriber\");\nvar InnerSubscriber = (function (_super) {\n    __extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber_1.Subscriber));\nexports.InnerSubscriber = InnerSubscriber;\n//# sourceMappingURL=InnerSubscriber.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"./Subscriber\");\nvar OuterSubscriber = (function (_super) {\n    __extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber_1.Subscriber));\nexports.OuterSubscriber = OuterSubscriber;\n//# sourceMappingURL=OuterSubscriber.js.map","<router-outlet></router-outlet>\n\n<sxf-modal #modalCupos>\n  <div class=\"modal-header modal-header-items\">\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">\n      {{ loadingCosts ? 'Recotizando' : 'Descuento comercial no disponible' }}\n    </h4>\n  </div>\n  <div class=\"modal-body modal-body-items\">\n    <h3\n      *ngIf=\"!loadingCosts; else stillLoadingCost\"\n      style=\"padding-top: 1.5rem;\"\n    >\n      El cupón de descuento aplicado en la cotización no se encuentra disponible\n      actualmente.\n    </h3>\n  </div>\n\n  <div *ngIf=\"!loadingCosts\" class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-8 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"callCostWithoutDiscounts()\"\n          [disabled]=\"loadingCosts\"\n        >\n          Recotizar\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n\n<ng-template #stillLoadingCost>\n  <div class=\"row\" style=\"padding: 1rem 0;\">\n    <div class=\"col-12 text-center\">\n      <ng-lottie\n        [options]=\"lottieConfig\"\n        width=\"8.75rem\"\n        height=\"6.25rem\"\n      ></ng-lottie>\n    </div>\n  </div>\n</ng-template>\n","import {\n  Component,\n  OnInit,\n  ChangeDetectionStrategy,\n  OnDestroy,\n  ViewChild\n} from '@angular/core';\nimport { BaseComponent } from '@sura-platform/core';\nimport { Router, Route } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport * as fromQuote from '../quote/state/index';\nimport * as fromQuoteActions from '../quote/state/quote.actions';\nimport * as fromEmissionReducer from './state/emission.reducer';\nimport * as fromEmissionActions from './state/emission.actions';\nimport * as fromEmission from './state';\nimport * as fromPolicyActions from '../../state/policy/policy.actions';\nimport * as fromPolicy from '../../state/policy';\nimport { IRoutes } from '@sura-platform/web/core/models/question/routes.interface';\nimport {\n  DiscountService,\n  IDiscount,\n  QuotingService,\n  IPolicy,\n  IVehicle,\n  IPackage\n} from '@sura-platform/features';\nimport { ModalComponent } from '@sura-platform/web';\nimport { AnimationOptions } from 'ngx-lottie';\nimport { Subscription, of, combineLatest, throwError } from 'rxjs';\nimport {\n  switchMap,\n  tap,\n  first,\n  catchError,\n  debounceTime\n} from 'rxjs/operators';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { PolicyAdapter } from '../../adapters/policy.adapter';\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  selector: 'sxf-emission',\n  templateUrl: './emission.component.html',\n  styleUrls: ['./emission.component.scss']\n})\nexport class EmissionComponent extends BaseComponent\n  implements OnInit, OnDestroy {\n  @ViewChild('modalCupos') modalCupos: ModalComponent = <ModalComponent>{};\n\n  /**\n   * Current routes\n   */\n  routes: IRoutes[] = [];\n\n  /**\n   * Current policy\n   */\n  policy: IPolicy = <IPolicy>{};\n\n  /**\n   * Discounts to be modified to get new costs\n   */\n  discounts: IDiscount[] = [];\n\n  /**\n   * Flag used to check if costs request is loading\n   */\n  loadingCosts = false;\n\n  /**\n   * Flag used to detect if the quote has new costs\n   */\n  newCost = false;\n\n  emissionSubscription: Subscription = new Subscription();\n  policySubscription: Subscription = new Subscription();\n  discountSubscription: Subscription = new Subscription();\n\n  lottieConfig: AnimationOptions = {\n    path: '/assets/loadings/sura-loader.json'\n  };\n\n  constructor(\n    private router: Router,\n    private storeQuote: Store<fromQuote.State>,\n    private storeEmission: Store<fromEmissionReducer.EmissionState>,\n    private storePolicy: Store<fromPolicy.State>,\n    private discountService: DiscountService,\n    private quotingService: QuotingService,\n    private policyAdapter: PolicyAdapter\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    combineLatest([\n      this.storeEmission.select(fromEmission.getEmissionHasVisited),\n      this.storePolicy.select(fromPolicy.getPolicyData)\n    ])\n      .subscribe(([visited, policy]) => {\n        if (!visited) {\n          this.storeQuote.dispatch(\n            new fromQuoteActions.SetCurrentMotorAction(1)\n          );\n\n          const group = policy?.motor?.vehicles\n            ?.find((v) => v.number === 1)\n            ?.packages?.find((p) => p.selected)?.group;\n\n          this.storeQuote.dispatch(\n            new fromQuoteActions.SetGroupCoverage(<string>group)\n          );\n        }\n      })\n      .unsubscribe();\n\n    this.storeEmission.dispatch(\n      new fromEmissionActions.SetEmissionVisited(true)\n    );\n\n    this.emissionSubscription = this.storeEmission\n      .select(fromEmission.getRoutes)\n      .subscribe((data: IRoutes[]) => {\n        if (data.length < 1) {\n          let routerConf: any = {};\n          routerConf = this.router?.config?.find((x) => x.path === 'quoting');\n          if (routerConf) {\n            routerConf['_loadedConfig']['routes'][0]['children']\n              .find((r: any) => r.path === 'emission')\n              ['_loadedConfig']['routes'][0]['children'][0]['children'].forEach(\n                (element: Route) => {\n                  const path = String(element.path).replace(':id', String(1));\n                  let dataElement: any = {};\n                  dataElement = element;\n                  this.routes.push({\n                    path: path,\n                    question: dataElement['data']['question'],\n                    show: dataElement['data']['show'],\n                    disabled: dataElement['data']['disabled'],\n                    value: dataElement['data']['value'],\n                    shortName: dataElement['data']['shortName'],\n                    visible: dataElement['data']['visible'],\n                    line: dataElement['data']['line']\n                  });\n                }\n              );\n\n            this.storeEmission.dispatch(\n              new fromEmissionActions.SetRoutes(this.routes)\n            );\n            this.storeEmission.dispatch(\n              new fromEmissionActions.SetActiveRoute('client')\n            );\n          }\n        }\n      });\n\n    this.policySubscription = this.storePolicy\n      .select(fromPolicy.getPolicyData)\n      .subscribe((policy) => (this.policy = cloneDeep(policy)));\n\n    //this.checkDiscount();\n  }\n\n  /**\n   * Check if quote has discount and there\n   * are no discount available\n   *\n   * @memberof EmissionComponent\n   */\n  checkDiscount() {\n    this.discountSubscription = combineLatest([\n      this.storeEmission.select(fromEmission.getEmission),\n      this.storePolicy.select(fromPolicy.getPolicyData)\n    ])\n      .pipe(\n        debounceTime(500),\n        tap((x) => {\n          this.discounts = cloneDeep(x[1].motor.discounts);\n        }),\n        switchMap((x) => {\n          const emission = x[0];\n          const policy = x[1];\n\n          if (\n            !emission.jobNumberFromQuotes ||\n            !policy.motor.discounts.some((d) => d.value > 0)\n          ) {\n            return of(null);\n          }\n\n          return this.discountService.getAvailableDiscounts({\n            job: {\n              number: policy.job.number\n            }\n          });\n        }),\n        first()\n      )\n      .subscribe((res: any) => {\n        if (!res || res.applied < res.total) {\n          return;\n        }\n\n        this.modalCupos.options.backdrop = 'static';\n        this.modalCupos.options.keyboard = false;\n        this.modalCupos.openModal();\n      });\n  }\n\n  /**\n   * get cost when there are no discounts\n   *\n   * @memberof EmissionComponent\n   */\n  callCostWithoutDiscounts() {\n    this.newCost = false;\n    this.loadingCosts = true;\n\n    this.discounts.forEach(\n      (discount) => (discount.value = <number>(discount.value ? 0 : null))\n    );\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetCurrentDiscountAction(this.discounts)\n    );\n\n    const adapted = this.policyAdapter.adapt(this.policy);\n    this.quotingService\n      .getCosts(adapted)\n      .pipe(\n        catchError((e) => {\n          this.loadingCosts = false;\n          return throwError(e);\n        })\n      )\n      .subscribe((resp) => {\n        const costVehicles = resp.motor.vehicles as IVehicle[];\n        const vehicles = this.policy.motor.vehicles;\n\n        vehicles.forEach((v) => {\n          const currentCostVehicle = costVehicles.find(\n            (cv) => cv.number === v.number\n          );\n          if (!currentCostVehicle) {\n            return;\n          }\n\n          let currentCostPackage = <IPackage>{};\n          if (\n            currentCostVehicle &&\n            currentCostVehicle.packages &&\n            currentCostVehicle.packages.length > 0\n          ) {\n            currentCostPackage = <IPackage>currentCostVehicle?.packages[0];\n          }\n\n          const currentPackage = v?.packages?.find(\n            (p) => p.externalid === currentCostPackage.externalid\n          );\n\n          if (!currentPackage) {\n            return;\n          }\n          //console.log('//diego ojo..', currentPackage);\n          currentPackage.costs = currentCostPackage.costs;\n          currentPackage.premiums = currentCostPackage.premiums;\n        });\n\n        this.storePolicy.dispatch(\n          new fromPolicyActions.UpdateVehicleAction(vehicles)\n        );\n\n        this.loadingCosts = false;\n        this.newCost = true;\n        this.modalCupos.closeModal();\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.emissionSubscription) this.emissionSubscription.unsubscribe();\n    if (this.discountSubscription) this.discountSubscription.unsubscribe();\n    if (this.policySubscription) this.policySubscription.unsubscribe();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport * as fromEmission from '../state';\nimport * as fromEmissionActions from '../state/emission.actions';\nimport { Store } from '@ngrx/store';\nimport { Router } from '@angular/router';\nimport { IRoutes } from '@sura-platform/web/core/models/question/routes.interface';\n\n@Injectable()\nexport class FlowRouteEmissionService {\n  constructor(\n    private storeEmission: Store<fromEmission.State>,\n    private router: Router\n  ) {}\n\n  /**\n   *\n   * This method is created for handle routing when patent is valid, the idea is avoid DRY (Don´t repeat yourself);\n   * @param {IVehicle} currentMotor\n   * @param {IRoutes[]} routes\n   * @returns\n   * @memberof FlowRouteService\n   */\n  goToNextStep(routes: IRoutes[]) {\n    const nextRouteWithoutValue = routes\n      .filter((p) => p.value === '' || p.value === null)[0]\n      .path.split('/')[2];\n\n    routes.forEach((element) => {\n      if (element.path === nextRouteWithoutValue) {\n        element.disabled = false;\n      }\n    });\n\n    this.storeEmission.dispatch(new fromEmissionActions.SetRoutes(routes));\n\n    this.storeEmission.dispatch(\n      new fromEmissionActions.SetActiveRoute(nextRouteWithoutValue)\n    );\n\n    return this.router.navigateByUrl(\n      'quoting/emission/questions/' + nextRouteWithoutValue + ''\n    );\n  }\n\n  enableRoute(routes: IRoutes[], route: string) {\n    routes.forEach((element) => {\n      if (element.path === route) {\n        element.disabled = false;\n        element.value = null;\n      }\n    });\n\n    this.storeEmission.dispatch(new fromEmissionActions.SetActiveRoute(route));\n\n    this.router.navigateByUrl('quoting/emission/questions/' + route);\n\n    this.storeEmission.dispatch(new fromEmissionActions.SetRoutes(routes));\n  }\n}\n","<div *ngFor=\"let vehicle of vehicles; index as i\">\n  <div *ngIf=\"i + 1 < currentMotor.number\" class=\"row pb-4\">\n    <div class=\"col-lg-5 px-0 btn-vehicle\">\n      <div class=\"row\">\n        <div class=\"col-lg-12 text-right\">\n          <span class=\"circle-ok\">\n            <sxf-icon\n              type=\"ok\"\n              class=\"icon-white\"\n              style=\"cursor: none !important;\"\n            ></sxf-icon>\n          </span>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-lg-4 icon\">\n          <img\n            src=\"/assets/icons/TYPE_{{ vehicle.group | uppercase }}.svg\"\n            alt=\"vehicle\"\n            class=\"icon-vehicle\"\n            width=\"64px\"\n          />\n        </div>\n\n        <div class=\"col-lg-8 pl-0 text-left\" style=\"margin-top: -15px;\">\n          <div class=\"title-primary\">{{ vehicle?.brand?.description }}</div>\n          <div class=\"title-secondary\">\n            {{ vehicle?.shortModel }} {{ vehicle?.year }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"currentMotor.number === i + 1\" class=\"row pb-4\">\n    <div\n      [formGroup]=\"form\"\n      class=\"col-lg-12 py-4\"\n      style=\"border: 0.5px solid #00aec7;\"\n    >\n      <div class=\"row\">\n        <div class=\"col-lg-4\">\n          <div class=\"row\">\n            <div class=\"col-lg-12\">\n              <span class=\"vehicle-type\">\n                <img\n                  src=\"/assets/icons/TYPE_{{ vehicle.group | uppercase }}.svg\"\n                  alt=\"vehicle icon\"\n                  width=\"64px;\"\n                />\n              </span>\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col-lg-12\">\n              <span class=\"brand-span\">\n                {{ currentMotor.brand.description }}\n                {{ currentMotor?.shortModel }}\n              </span>\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col-lg-12\">\n              <span class=\"model-span\">\n                {{ currentMotor.model.description }}\n              </span>\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col-lg-12\">\n              <span class=\"year-span\">\n                {{ currentMotor.year }}\n              </span>\n            </div>\n          </div>\n        </div>\n        <!-- Formulario -->\n        <div class=\"col-lg-8 pt-3\">\n          <div class=\"row mb-4\">\n            <div class=\"col-lg-6\">\n              <sxf-textbox\n                type=\"text\"\n                formControlName=\"patent\"\n                label=\"Patente *\"\n                placeholder=\"Ingresá la patente\"\n                (keyup.enter)=\"onEnterPatent()\"\n                [maxLength]=\"maxLength\"\n                [disabled]=\"disabledByRetrieve\"\n              ></sxf-textbox>\n            </div>\n            <div class=\"col-lg-5\">\n              <!-- <span> -->\n              <button\n                [disabled]=\"\n                  (currentMotor.license &&\n                    (currentMotor.chasis || currentMotor.motor)) ||\n                  !form.get('patent').valid ||\n                  disabledValidate\n                \"\n                class=\"btn btn-primary btn-block\"\n                (click)=\"validatePatent()\"\n              >\n                <ng-lottie\n                  [hidden]=\"!loadingPatent\"\n                  [options]=\"lottieConfig\"\n                  (animationCreated)=\"animationCreated($event)\"\n                  height=\"32px\"\n                  width=\"32px\"\n                  class=\"mr-2\"\n                ></ng-lottie>\n                <label class=\"label-btn\">\n                  {{ buttonLabel }}\n                </label>\n                <!-- Validar -->\n              </button>\n            </div>\n          </div>\n          <div class=\"row mb-2\" [hidden]=\"hiddenFormPatent\">\n            <div class=\"col-lg-6\">\n              <sxf-textbox\n                type=\"text\"\n                formControlName=\"engineNumber\"\n                (keydown.enter)=\"onEnter()\"\n                label=\"Número de motor *\"\n                placeholder=\"Número de motor\"\n                [minLength]=\"8\"\n                [maxLength]=\"20\"\n                [helpFeedback]=\"''\"\n                [disabled]=\"disabledByRetrieve\"\n              ></sxf-textbox>\n            </div>\n            <div class=\"col-lg-6\">\n              <sxf-textbox\n                type=\"text\"\n                formControlName=\"chassisNumber\"\n                (keydown.enter)=\"onEnter()\"\n                label=\"Número de chasis *\"\n                placeholder=\"\"\n                [minLength]=\"10\"\n                [maxLength]=\"17\"\n                [helpFeedback]=\"''\"\n                [disabled]=\"disabledByRetrieve\"\n              ></sxf-textbox>\n            </div>\n          </div>\n\n          <!-- checkbox -->\n          <div class=\"row mb-4\" [hidden]=\"hiddenFormPatent\">\n            <div class=\"col-lg-4\">\n              <div class=\"form-checkbox\">\n                <input\n                  type=\"checkbox\"\n                  class=\"form-checkbox-input\"\n                  id=\"creditorPrendario\"\n                  formControlName=\"creditorPrendario\"\n                />\n                <label\n                  class=\"form-checkbox-label\"\n                  for=\"creditorPrendario\"\n                ></label>\n                <label class=\"label-checkbox\">\n                  Acreedor Prendario\n                </label>\n              </div>\n            </div>\n            <div\n              class=\"col-lg-4\"\n              *ngIf=\"currentPolicy.client.type === 'Person'\"\n            >\n              <div class=\"form-checkbox\">\n                <input\n                  type=\"checkbox\"\n                  class=\"form-checkbox-input\"\n                  id=\"driveCustomer\"\n                  formControlName=\"clientIsDriver\"\n                />\n                <label class=\"form-checkbox-label\" for=\"driveCustomer\"></label>\n                <label class=\"label-checkbox\">\n                  Conduce el cliente\n                </label>\n              </div>\n            </div>\n            <div class=\"col-lg-4\" *ngIf=\"!gncNotRequired\">\n              <div class=\"form-checkbox\">\n                <input\n                  type=\"checkbox\"\n                  class=\"form-checkbox-input\"\n                  id=\"gnc\"\n                  formControlName=\"gnc\"\n                />\n                <label class=\"form-checkbox-label\" for=\"gnc\"></label>\n                <label class=\"label-checkbox\">\n                  GNC\n                </label>\n              </div>\n            </div>\n          </div>\n          <!-- Fin checkbox-->\n\n          <!-- Acreedor prendario-->\n          <div *ngIf=\"applyBondHolderFlag\" [hidden]=\"hiddenFormPatent\">\n            <div class=\"row mb-4\">\n              <div class=\"col-lg-6\">\n                <div class=\"form-group\">\n                  <label>Tipo de acreedor prendario</label>\n                  <sxf-select\n                    formControlName=\"bondHolderType\"\n                    [items]=\"bondHoldersTypes$ | async\"\n                    bindLabel=\"description\"\n                    bindValue=\"code\"\n                    [multiple]=\"false\"\n                    [helpFeedback]=\"\"\n                    class=\"custom\"\n                    [searchable]=\"true\"\n                    placeholder=\"Seleccione el tipo\"\n                    dropdownPosition=\"bottom\"\n                    name=\"bondHolderType\"\n                  ></sxf-select>\n                </div>\n              </div>\n              <div class=\"col-lg-6\">\n                <label>\n                  Cuotas\n                  <sup>*</sup>\n                </label>\n                <sxf-select\n                  formControlName=\"bondHolderQuotas\"\n                  [items]=\"bondHoldersQuotesQuantity\"\n                  bindLabel=\"description\"\n                  bindValue=\"code\"\n                  [multiple]=\"false\"\n                  [helpFeedback]=\"\"\n                  class=\"custom\"\n                  [searchable]=\"true\"\n                  placeholder=\"Seleccione las cuotas\"\n                  dropdownPosition=\"bottom\"\n                  name=\"bondHoldersQuotesQuantity\"\n                ></sxf-select>\n              </div>\n            </div>\n          </div>\n          <!-- Fin acreedor prendario -->\n\n          <!-- Conductor -->\n          <div\n            [hidden]=\"hiddenFormPatent\"\n            *ngIf=\"\n              (!currentMotor.driver.clientIsDriver &&\n                clientType !== 'Company') ||\n              clientType == 'Company'\n            \"\n            [formGroup]=\"formClient\"\n            class=\"row mt-4\"\n          >\n            <div class=\"col-lg-6\">\n              <sxf-textbox\n                type=\"text\"\n                formControlName=\"driverName\"\n                (keydown.enter)=\"onEnter()\"\n                label=\"Nombre *\"\n                placeholder=\"Ingresá el nombre del conductor\"\n                [helpFeedback]=\"''\"\n                placement=\"bottom\"\n                messageTooltips=\"Nombre\"\n                name=\"driverNameEmission\"\n              ></sxf-textbox>\n            </div>\n            <div class=\"col-lg-6\">\n              <sxf-textbox\n                type=\"text\"\n                formControlName=\"driverLastName\"\n                (keydown.enter)=\"onEnter()\"\n                label=\"Apellido *\"\n                placeholder=\"Ingresá el apellido del conductor\"\n                [helpFeedback]=\"''\"\n                placement=\"bottom\"\n                messageTooltips=\"Apellido\"\n                name=\"driverLastNameEmission\"\n              ></sxf-textbox>\n            </div>\n          </div>\n          <!-- Fin conductor -->\n\n          <!-- GNC -->\n          <div\n            [hidden]=\"hiddenFormPatent\"\n            *ngIf=\"currentMotor.gnc || showGNC\"\n            [formGroup]=\"formGNC\"\n            class=\"row mb-3\"\n          >\n            <div class=\"col-lg-6\">\n              <sxf-textbox\n                type=\"text\"\n                formControlName=\"summa\"\n                (keydown.enter)=\"onEnter()\"\n                label=\"Suma asegurada de equipo de GNC *\"\n                [disabled]=\"true\"\n                [helpFeedback]=\"'No es modificable'\"\n                placement=\"bottom\"\n                messageTooltips=\"Suma asegurada\"\n                name=\"summaGNCEmission\"\n              ></sxf-textbox>\n            </div>\n            <div class=\"col-lg-6\">\n              <sxf-datetimepicker\n                [minDate]=\"minDateGNC\"\n                label=\"Vencimiento de equipo de GNC *\"\n                formControlName=\"expiration\"\n                (keydown.enter)=\"onEnter()\"\n                name=\"expirationGNCEmission\"\n              ></sxf-datetimepicker>\n            </div>\n          </div>\n          <!-- Fin GNC -->\n\n          <!-- Botón -->\n          <div class=\"row mt-4\">\n            <div class=\"col-lg-8\">\n              <span>\n                <button\n                  [disabled]=\"\n                    form.invalid ||\n                    (formClient.invalid &&\n                      ((!currentMotor.driver.clientIsDriver &&\n                        clientType !== 'Company') ||\n                        clientType == 'Company'))\n                  \"\n                  (click)=\"continue()\"\n                  class=\"btn btn-primary btn-heft\"\n                  name=\"continueEmissionOthers\"\n                  style=\"width: 10rem;\"\n                >\n                  Siguiente\n                </button>\n              </span>\n              <span class=\"press-enter ml-3 mr-4\">\n                o presiona ENTER\n              </span>\n            </div>\n          </div>\n          <!-- Fin botón -->\n        </div>\n        <!-- Fin formulario -->\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"i + 1 > currentMotor.number\" class=\"row pb-4\">\n    <div class=\"col-lg-5 px-0 btn-vehicle\">\n      <div class=\"row\">\n        <div class=\"col-lg-12 text-right\">\n          <span class=\"circle-ok\" style=\"visibility: hidden;\">\n            <sxf-icon\n              type=\"ok\"\n              class=\"icon-white\"\n              style=\"cursor: none !important;\"\n            ></sxf-icon>\n          </span>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-lg-4 icon\">\n          <img\n            src=\"/assets/icons/TYPE_{{ vehicle.group | uppercase }}.svg\"\n            alt=\"vehicle\"\n            class=\"icon-vehicle\"\n            width=\"64px\"\n          />\n        </div>\n\n        <div class=\"col-lg-8 pl-0 text-left\" style=\"margin-top: -15px;\">\n          <div class=\"title-primary\">{{ vehicle?.brand?.description }}</div>\n          <div class=\"title-secondary\">\n            {{ vehicle?.shortModel }} {{ vehicle?.year }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<sxf-modal #modalNoGNC>\n  <div class=\"modal-header modal-header-items\">\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"closeModalNoGNC()\"\n      name=\"closeModalNoGNCBtn\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body modal-body-items\">\n    <h3>El equipo de GNC es solo a modo</h3>\n    <h3>declarativo ¿Desea asegurar el equipo?</h3>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-3 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-modal btn-lg btn-block\"\n          (click)=\"closeModalNoGNC()\"\n          name=\"closeModalNoGNCBtn\"\n        >\n          No solictar\n        </button>\n      </div>\n      <div class=\"col-lg-5 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"redirectCoverage()\"\n          name=\"redirectCoverageGNCBtn\"\n        >\n          Asegurar el equipo de GNC\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n\n<sxf-modal #modalPatentInUse (closed)=\"closeModalPatentInUse()\">\n  <div class=\"modal-header modal-header-items\">\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">\n      Patente asociada a otra póliza\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"closeModalPatentInUse()\"\n      name=\"closeModalPatentInUseBtn\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body modal-body-items\">\n    <p>\n      La patente está asociada a una póliza o solicitud activa y actualmente no\n      podrá ser asegurada. Comunicate con tu Ejecutivo de Cuenta para más\n      información.\n    </p>\n  </div>\n\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-8 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"closeModalPatentInUse()\"\n          name=\"closeModalPatentInUseBtn\"\n        >\n          Volver\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n\n<sxf-modal #modalUW (closed)=\"closeUWModal()\">\n  <div class=\"modal-header\" style=\"padding: 1rem 2rem;\">\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"closeUWModal('Cross click')\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <h4>\n      La presente emisión va a requerir autorización de la compañía.\n    </h4>\n    <h4>¿Desea solicitar autorización?</h4>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-3 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-modal btn-lg btn-block\"\n          (click)=\"closeUWModal()\"\n        >\n          Cancelar\n        </button>\n      </div>\n      <div class=\"col-lg-5 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"closeUWModal('continue')\"\n        >\n          Continuar\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n","import { Component, OnInit, ViewChild, OnDestroy } from '@angular/core';\nimport { BaseComponent } from '@sura-platform/core';\nimport { combineLatest, of, Subject, Subscription, Observable } from 'rxjs';\n\nimport * as fromPolicy from '../../../../state/policy';\nimport * as fromPolicyActions from '../../../../state/policy/policy.actions';\nimport * as fromQuote from '../../../quote/state/index';\nimport * as fromQuoteActions from '../../../quote/state/quote.actions';\nimport * as fromEmission from '../../../emission/state';\nimport * as fromEmissionActions from '../../../emission/state/emission.actions';\nimport { AnimationOptions } from 'ngx-lottie';\nimport { AnimationItem } from 'lottie-web';\n\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport {\n  IVehicle,\n  CarService,\n  DomainSearch,\n  IPolicy,\n  PatentBlackListService,\n  PatentUseService,\n  IBondholder,\n  BondholderService\n} from '@sura-platform/features';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FlowRouteEmissionService } from '../../../emission/services/flow-route-emission.service';\nimport { IRoutes } from '@sura-platform/web/core/models/question/routes.interface';\nimport { catchError, take, distinctUntilKeyChanged } from 'rxjs/operators';\nimport { ModalComponent } from '@sura-platform/web';\nimport {\n  patentPatternAutos,\n  patentPatternMotos,\n  patentPatternOtros\n} from '../../components/patent/patent.component';\n\n@Component({\n  selector: 'sxf-others-motor',\n  templateUrl: './others.component.html',\n  styleUrls: ['./others.component.scss']\n})\nexport class OthersMotorComponent extends BaseComponent\n  implements OnInit, OnDestroy {\n  lottieConfig: AnimationOptions = {\n    path: '/assets/loadings/data-validation-loader.json',\n    loop: false,\n    autoplay: false\n  };\n  @ViewChild('modalNoGNC', { static: true }) modalNoGNC: ModalComponent;\n\n  @ViewChild('modalPatentInUse', { static: true })\n  modalPatentInUse: ModalComponent;\n\n  @ViewChild('modalUW', { static: true }) modalUW: ModalComponent;\n\n  form: FormGroup;\n\n  formClient: FormGroup;\n\n  formGNC: FormGroup;\n\n  vehicles: IVehicle[];\n\n  currentMotor: IVehicle;\n\n  routes: IRoutes[];\n\n  currentPolicy: IPolicy;\n\n  showGNC = false;\n  minDateGNC: any;\n  disabledValidate = false;\n\n  _CODE_GNC = 'SURA_CA7_EquipodeGNCCov';\n  _CODE_SUMMA_GNC = 'SURA_CA7_EquipodeGNCLim';\n  _CODE_EXPIRATION = 'SURA_CA7_EquipodeGNCFecVencLim';\n\n  hiddenFormPatent = true;\n  loadingPatent$: Subject<boolean> = new Subject();\n  currentBlackList = false;\n  loadingPatent = false;\n  buttonLabel = 'Validar';\n  buttonAnimated: any;\n  applyBondHolderFlag: boolean;\n  bondHoldersQuotesQuantity = [];\n  bondHoldersTypes$: Observable<IBondholder[]>;\n  openedModalPatentInUse = false;\n  maxLength = 11;\n  /**\n   * Flag used to disable fields when\n   * policy comes from quotes list\n   *\n   * @type {boolean}\n   * @memberof OthersMotorComponent\n   */\n  disabledByRetrieve: boolean;\n\n  /**\n   * Flag used for hidde the GNC\n   * check input\n   *\n   * @type {boolean}\n   * @memberof OthersMotorComponent\n   */\n  gncNotRequired: boolean;\n\n  /**\n   * Subscription to emission store\n   *\n   * @type {Subscription}\n   * @memberof OthersMotorComponent\n   */\n  emissionSubscription: Subscription;\n\n  /**\n   * Subscription to quote store\n   *\n   * @type {Subscription}\n   * @memberof OthersMotorComponent\n   */\n  policyQuoteSubscription: Subscription;\n\n  /**\n   * Subscription to route changes on\n   * emission store\n   *\n   * @type {Subscription}\n   * @memberof OthersMotorComponent\n   */\n  emissionRoutesSubscription: Subscription;\n\n  /**\n   * Subscription to value changes on\n   * patent input\n   *\n   * @type {Subscription}\n   * @memberof OthersMotorComponent\n   */\n  patentInputSubscription: Subscription;\n\n  /**\n   * Subscription to value changes on\n   * clientIsDriver check input\n   *\n   * @type {Subscription}\n   * @memberof OthersMotorComponent\n   */\n  clientIsDriverCheckSubscription: Subscription;\n\n  /**\n   * Subscription to value changes on\n   * gnc check input\n   *\n   * @type {Subscription}\n   * @memberof OthersMotorComponent\n   */\n  gncCheckSubscription: Subscription;\n\n  /**\n   * Subscription to value changes on\n   * expiration input\n   *\n   * @type {Subscription}\n   * @memberof OthersMotorComponent\n   */\n  expirationInputSubscription: Subscription;\n\n  /**\n   * Subscription to value changes on\n   * creditor prendario check input\n   *\n   * @type {Subscription}\n   * @memberof OthersMotorComponent\n   */\n  creditorPrendarioInputSubscription: Subscription;\n\n  /**\n   * stores the pattern corresponding to the type of vehicle\n   * Default car pattern\n   * @memberof OthersMotorComponent\n   */\n  patentPattern = patentPatternAutos;\n  clientType = '';\n  constructor(\n    private fb: FormBuilder,\n    private storePolicy: Store<fromPolicy.State>,\n    private storeQuote: Store<fromQuote.State>,\n    private router: Router,\n    private route: ActivatedRoute,\n    private carService: CarService,\n    private flowRouteEmissionService: FlowRouteEmissionService,\n    private storeEmission: Store<fromEmission.State>,\n    private patentBlackListService: PatentBlackListService,\n    private patentUseService: PatentUseService,\n    private bondHolderService: BondholderService\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    this.loadingPatent$.next(false);\n\n    this.route.params.subscribe(({ id }) => {\n      this.storeQuote.dispatch(\n        new fromQuoteActions.SetCurrentMotorAction(Number(id))\n      );\n    });\n\n    this.policyQuoteSubscription = combineLatest([\n      this.storePolicy.select(fromPolicy.getPolicyData).pipe(take(1)),\n      this.storeQuote.select(fromQuote.getQuoteMotorData)\n    ]).subscribe(([policy, quote]) => {\n      console.log('Recargando data');\n\n      this.currentPolicy = policy;\n      this.currentMotor = policy.motor.vehicles.find(\n        (c) => c.number === quote.activeMotor\n      );\n      this.vehicles = policy.motor.vehicles;\n\n      this.currentMotor.bondholder.type !== null\n        ? (this.applyBondHolderFlag = true)\n        : (this.applyBondHolderFlag = false);\n\n      if (\n        this.currentMotor.chasis !== null &&\n        this.currentMotor.motor !== null\n      ) {\n        this.hiddenFormPatent = false;\n      }\n\n      if (\n        this.currentMotor.driver.clientIsDriver &&\n        this.currentPolicy.client.type === 'Person'\n      ) {\n        this.currentMotor.driver.firstname = this.currentPolicy.client.firstname;\n        this.currentMotor.driver.lastname = this.currentPolicy.client.lastname;\n      }\n\n      const _dateFromStoreVigencia = this.currentPolicy.period.start.toString();\n      const dateGNC = {\n        year: parseInt(_dateFromStoreVigencia.substring(0, 4), 0),\n        month: parseInt(_dateFromStoreVigencia.substring(5, 7), 0),\n        day: parseInt(_dateFromStoreVigencia.substring(8, 10), 0)\n      };\n\n      this.minDateGNC = dateGNC;\n\n      if (this.currentMotor.group === 'MOTO') {\n        this.gncNotRequired = true;\n        this.patentPattern = patentPatternMotos;\n      } else {\n        if (this.currentMotor.group === 'OTRO') {\n          this.patentPattern = patentPatternOtros;\n        } else {\n          this.patentPattern = patentPatternAutos;\n        }\n      }\n    });\n\n    this.storeQuote\n      .select(fromQuote.getQuoteMotorData)\n      .pipe(distinctUntilKeyChanged('activeMotor'))\n      .subscribe(() => this.initializeForms());\n\n    this.emissionRoutesSubscription = this.storeEmission\n      .select(fromEmission.getRoutes)\n      .subscribe((data) => {\n        this.routes = data;\n      });\n\n    this.bondHoldersTypes$ = this.bondHolderService.getBondHolders();\n    let index = 0;\n\n    while (index < 100) {\n      index++;\n      this.bondHoldersQuotesQuantity.push({\n        code: index,\n        description: index\n      });\n    }\n\n    this.emissionSubscription = this.storeEmission\n      .select(fromEmission.getEmission)\n      .subscribe((x) => {\n        const job = x.jobNumberFromQuotes;\n        const approved = x.approvedEmission;\n        this.clientType = x.client.type;\n        this.disabledByRetrieve = job && approved ? true : false;\n\n        if (this.disabledByRetrieve) {\n          this.form.get('gnc').disable();\n          this.form.get('creditorPrendario').disable();\n          this.form.get('clientIsDriver').disable();\n          this.formClient.disable();\n          this.form.get('bondHolderType').disable();\n          this.form.get('bondHolderQuotas').disable();\n        }\n      });\n  }\n\n  initializeForms() {\n    console.log('Inicializo los formularios');\n    // Vehicle form\n    this.form = this.fb.group({\n      gnc: [this.currentMotor.gnc, Validators.required],\n      creditorPrendario: [this.applyBondHolderFlag],\n      patent: [\n        this.currentMotor.license,\n        [Validators.required, Validators.pattern(this.patentPattern)]\n      ],\n      bondHolderType: [this.currentMotor.bondholder.type],\n      bondHolderQuotas: [this.currentMotor.bondholder.quotas],\n      engineNumber: [\n        this.currentMotor.motor,\n        [Validators.required, Validators.minLength(6), Validators.maxLength(20)]\n      ],\n      chassisNumber: [\n        this.currentMotor.chasis,\n        [\n          Validators.required,\n          // Por definicion del PO el minimo de caracteres es 10.\n          Validators.minLength(10),\n          Validators.maxLength(17)\n        ]\n      ],\n      clientIsDriver: [this.currentMotor.driver.clientIsDriver]\n    });\n\n    // Driver form\n    this.formClient = this.fb.group({\n      driverName: [this.currentMotor.driver.firstname, Validators.required],\n      driverLastName: [this.currentMotor.driver.lastname, Validators.required]\n    });\n\n    this.currentMotor.packages\n      .filter((op) => op.selected)\n      .map((jk) => {\n        //si tiene agregado GNC en accesorios\n        const gncCov = jk.coverages.filter(\n          (ik) => ik.pattern.code === this._CODE_GNC\n        );\n        if (gncCov.length === 1) {\n          const valueSumma = gncCov[0].terms.filter(\n            (op) => op.code === this._CODE_SUMMA_GNC\n          )[0].value;\n          const valueExpiration = gncCov[0].terms.filter(\n            (op) => op.code === this._CODE_EXPIRATION\n          )[0].value;\n\n          const _dateFromStore = valueExpiration.toString();\n          const dateGNC = {\n            year: parseInt(_dateFromStore.substring(0, 4), 0),\n            month: parseInt(_dateFromStore.substring(5, 7), 0),\n            day: parseInt(_dateFromStore.substring(8, 10), 0)\n          };\n\n          this.formGNC = this.fb.group({\n            summa: [valueSumma, Validators.required],\n            expiration: [dateGNC, Validators.required]\n          });\n\n          this.form.patchValue(\n            {\n              gnc: true\n            },\n            { onlySelf: true, emitEvent: false }\n          );\n          this.showGNC = true;\n        } else {\n          //no tiene GNC agregado\n          this.formGNC = this.fb.group({\n            summa: [0, Validators.required],\n            expiration: [, Validators.required]\n          });\n        }\n      });\n\n    // if (!this.hiddenFormPatent) {\n    //   this.form.markAllAsTouched();\n    // }\n\n    // Subscribe form inputs\n    this.unsubscribeForm();\n\n    this.patentInputSubscription = this.form\n      .get('patent')\n      .valueChanges.subscribe(() => {\n        this.currentBlackList = false;\n        this.hiddenFormPatent = true;\n        this.disabledValidate = false;\n        this.form.get('chassisNumber').setValue([]);\n        this.form.get('engineNumber').setValue([]);\n        this.form\n          .get('creditorPrendario')\n          .setValue(false, { emitEvent: false });\n        this.applyBondHolderFlag = false;\n        this.form.get('bondHolderType').setValue([]);\n        this.form.get('bondHolderQuotas').setValue([]);\n        this.form.get('bondHolderQuotas').clearValidators();\n        this.currentMotor.license = null;\n        this.buttonLabel = 'Validar';\n      });\n\n    this.clientIsDriverCheckSubscription = this.form\n      .get('clientIsDriver')\n      .valueChanges.subscribe((data) => {\n        if (data) {\n          this.formClient\n            .get('driverName')\n            .setValue(this.currentPolicy.client.firstname);\n          this.formClient\n            .get('driverLastName')\n            .setValue(this.currentPolicy.client.lastname);\n          this.vehicles.forEach((v) => {\n            if (v.number === this.currentMotor.number) {\n              v.driver.firstname = this.currentPolicy.client.firstname;\n              v.driver.lastname = this.currentPolicy.client.lastname;\n              v.driver.clientIsDriver = data;\n            }\n          });\n          this.storePolicy.dispatch(\n            new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n          );\n        } else {\n          this.formClient\n            .get('driverName')\n            .setValue(\n              this.disabledByRetrieve\n                ? this.currentMotor.driver.firstname\n                : null\n            );\n          this.formClient\n            .get('driverLastName')\n            .setValue(\n              this.disabledByRetrieve ? this.currentMotor.driver.lastname : null\n            );\n\n          this.vehicles.forEach((v) => {\n            if (v.number === this.currentMotor.number) {\n              v.driver.firstname = this.formClient.get('driverName').value;\n              v.driver.lastname = this.formClient.get('driverLastName').value;\n              v.driver.clientIsDriver = data;\n            }\n          });\n          this.storePolicy.dispatch(\n            new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n          );\n        }\n      });\n\n    this.gncCheckSubscription = this.form\n      .get('gnc')\n      .valueChanges.subscribe((data: boolean) => {\n        this.showGNC = false;\n        if (data && this.formGNC.get('summa').value === 0) {\n          //muestro modal y lo envio a coverage de nuevo\n          this.openModalNoGNC();\n        } else {\n          this.vehicles.forEach((v) => {\n            if (v.number === this.currentMotor.number) {\n              v.gnc = data;\n            }\n          });\n\n          this.storePolicy.dispatch(\n            new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n          );\n        }\n      });\n\n    this.expirationInputSubscription = this.formGNC\n      .get('expiration')\n      .valueChanges.subscribe((data) => {\n        let isoDate = data.year + '-' + data.month + '-' + data.day;\n        isoDate = new Date(isoDate).toISOString();\n\n        this.vehicles.forEach((v) => {\n          if (v.number === this.currentMotor.number) {\n            v.packages\n              .filter((op) => op.selected)[0]\n              .coverages.filter((ik) => ik.pattern.code === this._CODE_GNC)[0]\n              .terms.filter(\n                (op) => op.code === this._CODE_EXPIRATION\n              )[0].value.current = isoDate;\n          }\n        });\n\n        this.storePolicy.dispatch(\n          new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n        );\n      });\n\n    this.creditorPrendarioInputSubscription = this.form\n      .get('creditorPrendario')\n      .valueChanges.subscribe((value) => {\n        this.applyBondHolderFlag = value;\n        //!Si se marca el tilde, no debe poder continuar si el dato obligatorio no está cargado.\n        //!Si se cargaron datos (tipo de acreedor o cuotas) y se destilda la opción de acreedor prendario esos datos vuelven a null.\n        //! US5752 Validation.\n        if (this.applyBondHolderFlag) {\n          this.form\n            .get('bondHolderQuotas')\n            .setValidators([Validators.required]);\n          this.form.get('bondHolderQuotas').updateValueAndValidity();\n        } else {\n          this.form.get('bondHolderQuotas').clearValidators();\n          this.form.get('bondHolderQuotas').updateValueAndValidity();\n          this.form.get('bondHolderQuotas').reset();\n          this.form.get('bondHolderType').reset();\n        }\n      });\n  }\n\n  unsubscribeForm() {\n    this.patentInputSubscription?.unsubscribe();\n    this.clientIsDriverCheckSubscription?.unsubscribe();\n    this.gncCheckSubscription?.unsubscribe();\n    this.expirationInputSubscription?.unsubscribe();\n  }\n\n  ngOnDestroy() {\n    this.emissionSubscription?.unsubscribe();\n    this.policyQuoteSubscription?.unsubscribe();\n    this.emissionRoutesSubscription?.unsubscribe();\n\n    this.unsubscribeForm();\n  }\n\n  continuePatentValidate() {\n    this.carService\n      .getCar(this.form.get('patent').value)\n      .pipe(\n        catchError(() => {\n          //No existe esa petente\n          //muestro formulario\n          this.hiddenFormPatent = false;\n          this.loadingPatent$.next(false);\n          this.loadingPatent = false;\n          return of(null);\n        })\n      )\n      .subscribe((vehicleData) => {\n        this.buttonAnimated.playSegments([[120, 175]], false);\n        setTimeout(() => {\n          this.buttonLabel = 'Validado';\n        }, 2000);\n        this.hiddenFormPatent = false;\n        this.loadingPatent = false;\n        this.loadingPatent$.next(false);\n        this.checkBlackList(vehicleData);\n      });\n  }\n\n  validatePatent() {\n    this.openedModalPatentInUse = false;\n\n    this.disabledValidate = true;\n    this.loadingPatent$.next(true);\n    this.loadingPatent = true;\n    this.buttonLabel = 'Validando';\n    this.buttonAnimated.playSegments([[0, 119]], true);\n\n    const startDatecurrentPolicy = new Date(\n      this.currentPolicy.period.start.toString()\n    );\n    const startDate =\n      startDatecurrentPolicy.getDate() +\n      '-' +\n      ('0' + (startDatecurrentPolicy.getMonth() + 1)).slice(-2) +\n      '-' +\n      startDatecurrentPolicy.getFullYear();\n    startDatecurrentPolicy.setMonth(startDatecurrentPolicy.getMonth() + 3);\n    const endDate =\n      startDatecurrentPolicy.getDate() +\n      '-' +\n      ('0' + (startDatecurrentPolicy.getMonth() + 1)).slice(-2) +\n      '-' +\n      startDatecurrentPolicy.getFullYear();\n\n    this.patentUseService\n      .validePatentInUse(this.form.get('patent').value, startDate, endDate)\n      .subscribe((data) => {\n        const patentInUse = data;\n        if (\n          patentInUse !== null &&\n          patentInUse.length > 0 &&\n          patentInUse[0].fixedid !== ''\n        ) {\n          this.openModalPatentInUse();\n          this.openedModalPatentInUse = true;\n        } else {\n          this.continuePatentValidate();\n        }\n      });\n  }\n\n  checkBlackList(vehicleData: DomainSearch) {\n    this.patentBlackListService\n      .validePatent(this.form.get('patent').value)\n      .subscribe((res) => {\n        this.loadingPatent$.next(false);\n\n        this.currentBlackList = false;\n        if (res !== null && res.length > 0) {\n          this.currentBlackList = true;\n        }\n\n        this.vehicles.forEach((v) => {\n          if (v.number === this.currentMotor.number) {\n            v.blacklist = this.currentBlackList;\n          }\n        });\n\n        this.storePolicy.dispatch(\n          new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n        );\n\n        if (this.currentBlackList) {\n          this.modalUW.openModal();\n        } else {\n          setTimeout(() => {\n            this.buttonLabel = 'Validado';\n          }, 2000);\n        }\n      });\n\n    if (vehicleData) {\n      this.form.get('chassisNumber').setValue(vehicleData.chassis);\n      this.form.get('engineNumber').setValue(vehicleData.motor);\n      this.form.markAllAsTouched();\n    }\n  }\n\n  onEnterPatent() {\n    if (this.form.get('patent').valid) {\n      this.validatePatent();\n    }\n  }\n\n  onEnter() {\n    if (this.form.valid) {\n      this.continue();\n    }\n  }\n\n  /**\n   * Continue to next vehicle or payment method\n   *\n   * @returns\n   * @memberof OthersMotorComponent\n   */\n  continue() {\n    const {\n      patent,\n      engineNumber,\n      chassisNumber,\n      bondHolderType,\n      bondHolderQuotas,\n      gnc\n    } = this.form.value;\n\n    const { driverLastName, driverName } = this.formClient.value;\n\n    this.currentMotor.license = patent;\n    this.currentMotor.motor = engineNumber;\n    this.currentMotor.chasis = chassisNumber;\n\n    this.currentMotor.bondholder = {\n      ...this.currentMotor.bondholder,\n      type: this.applyBondHolderFlag ? bondHolderType : null,\n      quotas: this.applyBondHolderFlag ? bondHolderQuotas : null\n    };\n\n    this.currentMotor.driver = {\n      ...this.currentMotor.driver,\n      lastname: driverLastName,\n      firstname: driverName\n    };\n\n    if (gnc) {\n      const currentPackage = this.currentMotor.packages.find(\n        (pkg) => pkg.selected\n      );\n      this.flowRouteEmissionService.enableRoute(this.routes, 'payment-method');\n\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetActiveRoute('payment-method')\n      );\n\n      this.routes.forEach((element) => {\n        if (element.path === 'aditionalauto') {\n          element.value =\n            this.form.get('chassisNumber').value.toString().toUpperCase() +\n            ' - ' +\n            this.form.get('engineNumber').value.toString().toUpperCase();\n        }\n      });\n\n      this.vehicles.forEach((v) => {\n        if (v.number === this.currentMotor.number) {\n          v.driver.lastname = this.formClient.get('driverLastName').value;\n          v.driver.firstname = this.formClient.get('driverName').value;\n          v.license = this.form.get('patent').value.toString().toUpperCase();\n          v.motor = this.form.get('engineNumber').value;\n          v.chasis = this.form.get('chassisNumber').value;\n          if (this.applyBondHolderFlag) {\n            v.bondholder.type = this.form.get('bondHolderType').value;\n            v.bondholder.quotas = this.form.get('bondHolderQuotas').value;\n          } else {\n            v.bondholder.type = null;\n            v.bondholder.quotas = null;\n          }\n        }\n      });\n\n      currentPackage.coverages = currentPackage.coverages.filter(\n        (cov) => cov.pattern.code !== this._CODE_GNC\n      );\n    }\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n    );\n\n    // En caso de no ser el último vehículo, paso al siguiente\n    if (this.currentMotor.number < this.vehicles.length) {\n      this.router.navigateByUrl(\n        `quoting/emission/questions/aditionalauto/${\n          this.currentMotor.number + 1\n        }`\n      );\n      return;\n    }\n\n    // En caso de ser el último vehículo, voy a método de pago\n    this.flowRouteEmissionService.enableRoute(this.routes, 'payment-method');\n\n    this.storeEmission.dispatch(\n      new fromEmissionActions.SetActiveRoute('payment-method')\n    );\n\n    if (this.form.valid) {\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetFormEmissionOthersIsValidAction(true)\n      );\n    }\n\n    // Cambio el nombre del título de la ruta\n    this.changeRouteTitleValue();\n\n    this.router.navigateByUrl('quoting/emission/questions/payment-method');\n  }\n\n  /**\n   * Change title for aditional route\n   *\n   * @memberof OthersMotorComponent\n   */\n  changeRouteTitleValue() {\n    const aditionalRoute = this.routes.find((route) =>\n      route.path.includes('aditionalauto')\n    );\n\n    const { license, chasis, motor } = this.currentMotor;\n\n    aditionalRoute.value = `${\n      this.vehicles.length > 0 ? license.toUpperCase() + ': ' : ''\n    }${chasis.toUpperCase()} - ${motor.toUpperCase()}`;\n  }\n\n  closeModalNoGNC() {\n    this.form.patchValue(\n      {\n        gnc: false\n      },\n      { onlySelf: true, emitEvent: true }\n    );\n    this.modalNoGNC.closeModal();\n  }\n\n  openModalNoGNC() {\n    this.modalNoGNC.openModal();\n  }\n\n  redirectCoverage() {\n    const pckCode = this.currentMotor.packages.filter((op) => op.selected)[0]\n      .code;\n    this.modalNoGNC.closeModal();\n    this.router.navigateByUrl(\n      'quoting/coverage/' + this.currentMotor.id + '/modal/' + pckCode\n    );\n  }\n  /**\n   * Control lottie animation\n   */\n  animationCreated(animationItem: AnimationItem): void {\n    this.buttonAnimated = animationItem;\n  }\n\n  closeModalPatentInUse() {\n    this.loadingPatent = false;\n    this.buttonAnimated.playSegments([[120, 175]], false);\n    this.buttonLabel = 'Validar';\n    this.modalPatentInUse.closeModal();\n  }\n\n  openModalPatentInUse() {\n    this.modalPatentInUse.openModal();\n  }\n\n  closeUWModal(action?: string) {\n    if (action === 'continue') {\n      this.modalUW.closeModal();\n      return;\n    }\n    this.loadingPatent = false;\n    this.buttonAnimated.playSegments([[120, 175]], false);\n    this.buttonLabel = 'Validar';\n\n    this.form.get('patent').setValue('');\n    this.modalUW.closeModal();\n  }\n}\n","<div class=\"details sticky-top p-3\">\n  <div class=\"row\">\n    <div class=\"row ml-0\">\n      <div class=\"col-lg-12 pt-3\">\n        <span class=\"title\" *ngIf=\"(vehicles$ | async)?.length === 1\">\n          {{ (packageSelectedWithAssistance$ | async)?.package?.description }}\n        </span>\n        <span class=\"title\" *ngIf=\"(vehicles$ | async)?.length > 1\">\n          Resumen\n        </span>\n      </div>\n    </div>\n    <div\n      class=\"col-lg-12\"\n      style=\"position: relative; height: calc(90vh - 80px);\"\n      [perfectScrollbar]=\"{ suppressScrollY: false }\"\n    >\n      <div class=\"row mt-2\" *ngIf=\"(vehicles$ | async)?.length === 1\">\n        <!-- <div class=\"col-lg-4\">\n          <a class=\"show-detail\">Ver detalle</a>\n        </div> -->\n        <div *ngIf=\"!disabledByRetrieve\" class=\"col-lg-6\">\n          <a\n            style=\"cursor: pointer;\"\n            (click)=\"goCoverage()\"\n            class=\"change-coverage\"\n          >\n            Cambio de cobertura\n          </a>\n        </div>\n        <div\n          *ngIf=\"\n            disabledByRetrieve &&\n            (vehicles$ | async)?.length < 2 &&\n            !getQuoteApproved\n          \"\n          class=\"col-lg-6\"\n        >\n          <a\n            style=\"cursor: pointer;\"\n            (click)=\"openModal()\"\n            class=\"change-coverage\"\n          >\n            Editar cotización\n          </a>\n        </div>\n      </div>\n\n      <div class=\"row mt-2\" *ngIf=\"(vehicles$ | async)?.length > 1\">\n        <div class=\"col-lg-12\">\n          <div class=\"quantityVehicles\">\n            <span>\n              {{ (vehicles$ | async)?.length }}\n              Vehículos\n            </span>\n            <a\n              style=\"cursor: pointer;\"\n              (click)=\"openVehicleDetails()\"\n              class=\"show-detail\"\n            >\n              Ver todos\n            </a>\n          </div>\n        </div>\n      </div>\n      <div class=\"row item-title mt-4\">\n        <div class=\"col-lg-6\">\n          <span>Código de Productor</span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>Productor</span>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-lg-6\">\n          <span>\n            {{ currentproducer.code }}\n          </span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>\n            {{ currentproducer.description }}\n          </span>\n        </div>\n      </div>\n      <!-- Asistencia mecánica -->\n      <div\n        class=\"row item-title mt-4\"\n        *ngIf=\"(vehicles$ | async)?.length === 1\"\n      >\n        <div class=\"col-lg-6\">\n          <span>{{ (brandModelPrizeCar$ | async).type | titlecase }}</span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>Asistencia mecánica</span>\n        </div>\n      </div>\n      <div class=\"row\" *ngIf=\"(vehicles$ | async)?.length === 1\">\n        <div class=\"col-lg-6\">\n          <span>\n            {{ (brandModelPrizeCar$ | async)?.brand }}\n            {{ (brandModelPrizeCar$ | async)?.model }}\n          </span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>\n            {{\n              getAssistanceDescription(\n                (packageSelectedWithAssistance$ | async)?.assistance\n              ) | async\n            }}\n          </span>\n        </div>\n      </div>\n      <!-- Fin Asistencia mecánica-->\n\n      <!-- Suma asegurada 1 vehículo -->\n      <div\n        class=\"row item-title mt-4\"\n        *ngIf=\"(vehicles$ | async)?.length === 1\"\n      >\n        <div class=\"col-lg-6\">\n          <span>Suma asegurada</span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>Refacturación</span>\n        </div>\n      </div>\n      <div class=\"row\" *ngIf=\"(vehicles$ | async)?.length === 1\">\n        <div class=\"col-lg-6\">\n          <span>\n            $ {{ (brandModelPrizeCar$ | async)?.prize | number: '1.0-0' }}\n          </span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>\n            {{ rebillingPeriod$ | async }}\n          </span>\n        </div>\n      </div>\n      <!-- Fin suma asegurada 1 vehículo-->\n\n      <!-- condición fiscal 1 vehículo -->\n      <div\n        class=\"row item-title mt-4\"\n        *ngIf=\"(vehicles$ | async)?.length === 1\"\n      >\n        <div class=\"col-lg-6\">\n          <span>Condición fiscal</span>\n        </div>\n        <div class=\"col-lg-6\"></div>\n      </div>\n      <div class=\"row\" *ngIf=\"(vehicles$ | async)?.length === 1\">\n        <div class=\"col-lg-6\">\n          <span>\n            {{ fiscalCondition$ | async }}\n          </span>\n        </div>\n        <div class=\"col-lg-6\">\n          <ng-template #tipContent>\n            <table class=\"table-sm\">\n              <tbody>\n                <tr *ngFor=\"let item of (additionals$ | async)?.additionals\">\n                  <td style=\"border-bottom: solid 1px;\">\n                    {{ item.pattern.description }}\n                  </td>\n                  <td style=\"border-bottom: solid 1px;\">\n                    <b>\n                      $\n                      {{\n                        item.terms[0].value?.current || item.terms[0].value\n                          | number: '1.0-0'\n                      }}\n                    </b>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </ng-template>\n          <div\n            class=\"input-group\"\n            [ngbTooltip]=\"\n              (additionals$ | async)?.additionalsLenght > 0 ? tipContent : ''\n            \"\n            style=\"margin-top: -15px;\"\n          >\n            <input\n              readonly\n              style=\"cursor: pointer;\"\n              type=\"text\"\n              class=\"form-control\"\n              value=\"{{\n                (additionals$ | async)?.additionalsLenght\n              }} adicionales\"\n            />\n            <div class=\"input-group-append\">\n              <span class=\"input-group-text\">\n                <sxf-icon class=\"icon-blue\" type=\"view\"></sxf-icon>\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Fin condición fiscal 1 vehículo -->\n\n      <!-- Condición Fiscal 2 a 4 vehículos -->\n      <div class=\"row item-title mt-4\" *ngIf=\"(vehicles$ | async)?.length > 1\">\n        <div class=\"col-lg-6\">\n          <span>Condición fiscal</span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>Refacturación</span>\n        </div>\n      </div>\n      <div class=\"row\" *ngIf=\"(vehicles$ | async)?.length > 1\">\n        <div class=\"col-lg-6\">\n          <span>\n            {{ fiscalCondition$ | async }}\n          </span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>\n            {{ rebillingPeriod$ | async }}\n          </span>\n        </div>\n      </div>\n      <!-- Fin Condición Fiscal 2 a 4 vehículos-->\n\n      <!-- Medio de pago 2 a 4 vehículos -->\n      <div class=\"row item-title mt-4\" *ngIf=\"(vehicles$ | async)?.length > 1\">\n        <div class=\"col-lg-6\">\n          <span>Medio de pago</span>\n        </div>\n        <div class=\"col-lg-6\"><span>Cuotas</span></div>\n      </div>\n      <div class=\"row\" *ngIf=\"(vehicles$ | async)?.length > 1\">\n        <div class=\"col-lg-6\">\n          <span>\n            {{ (paymentMethod$ | async)?.description }}\n          </span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>\n            {{ (paymentPlan$ | async)?.description }}\n          </span>\n        </div>\n      </div>\n      <!-- Fin Medio de pago 2 a 4 vehículos-->\n\n      <div class=\"row item-title mt-4\">\n        <div class=\"col-lg-6\">\n          <span>Dto</span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>Comisión</span>\n        </div>\n      </div>\n      <div class=\"row mb-1\">\n        <div class=\"col-lg-6\">\n          <span>{{ (discountAndCommission$ | async)?.discount || 0 }}%</span>\n        </div>\n        <div class=\"col-lg-6\">\n          <span>{{ (discountAndCommission$ | async)?.commission || 0 }}%</span>\n        </div>\n      </div>\n      <div class=\"row\" *ngIf=\"campaign$ | async as c\">\n        <div class=\"col-lg-12\">\n          <label for=\"campaign\">Campaña</label>\n          <sxf-select\n            #campaign\n            disabledOnEmpty=\"true\"\n            [formControl]=\"formCampaign\"\n            [items]=\"c\"\n            bindLabel=\"description\"\n            bindValue=\"id\"\n            [multiple]=\"false\"\n            [class]=\"'custom'\"\n            [searchable]=\"false\"\n            [placeholder]=\"'Seleccione campaña'\"\n            [dropdownPosition]=\"'bottom'\"\n            name=\"campaign\"\n          ></sxf-select>\n        </div>\n      </div>\n      <div class=\"row mt-3\">\n        <div class=\"col-lg-12\">\n          <div class=\"tsummary mb-3\">\n            <table\n              *ngIf=\"packageSelectedWithAssistance$ | async as packageSelected\"\n              class=\"table table-sm table-borderless\"\n            >\n              <tbody>\n                <tr>\n                  <td>Dcto. promocional</td>\n                  <th class=\"text-right\">\n                    ${{ packageSelected?.cost?.discount | number: '1.0-0' }}\n                  </th>\n                </tr>\n                <tr>\n                  <td>Prima Comisionable</td>\n                  <th class=\"text-right\">\n                    $\n                    {{\n                      packageSelected?.package?.premiums?.total\n                        | number: '1.0-0'\n                    }}\n                  </th>\n                </tr>\n                <tr>\n                  <td colspan=\"2\" class=\"costs-details\">\n                    <div class=\"main\">\n                      <div>Premio total</div>\n                      <sxf-icon\n                        [class]=\"\n                          expandedDetail ? 'icon-down' : 'icon-arrow-left'\n                        \"\n                        (click)=\"expandedDetail = !expandedDetail\"\n                      ></sxf-icon>\n                      <div>\n                        $ {{ packageSelected?.cost?.total | number: '1.0-0' }}\n                      </div>\n                    </div>\n                    <div class=\"childrens\" *ngIf=\"expandedDetail\">\n                      <div class=\"child\">\n                        <div>Gastos de adquisición</div>\n                        <div>\n                          $\n                          {{\n                            packageSelected?.cost?.administrativecharge\n                              | number: '1.0-0'\n                          }}\n                        </div>\n                      </div>\n                      <div class=\"child\">\n                        <div>Gastos de explotación</div>\n                        <div>\n                          $\n                          {{\n                            packageSelected?.cost?.submissionfee +\n                              packageSelected?.package?.premiums?.assistance\n                              | number: '1.0-0'\n                          }}\n                        </div>\n                      </div>\n                      <div class=\"child\">\n                        <div>Prima total (GWP)</div>\n                        <div>\n                          $\n                          {{\n                            packageSelected?.package?.premiums?.total +\n                              packageSelected?.cost?.submissionfee +\n                              packageSelected?.package?.premiums?.assistance +\n                              packageSelected?.cost?.administrativecharge\n                              | number: '1.0-0'\n                          }}\n                        </div>\n                      </div>\n                      <div class=\"child\">\n                        <div>Regargo financiero</div>\n                        <div>\n                          $\n                          {{\n                            packageSelected?.cost?.financial | number: '1.0-0'\n                          }}\n                        </div>\n                      </div>\n                      <div class=\"child\">\n                        <div>Impuestos internos</div>\n                        <div>\n                          $\n                          {{\n                            packageSelected?.cost?.internaltax | number: '1.0-0'\n                          }}\n                        </div>\n                      </div>\n                      <div class=\"child\">\n                        <div>Tasa SSN</div>\n                        <div>\n                          $\n                          {{ packageSelected?.cost?.ssnrate | number: '1.0-0' }}\n                        </div>\n                      </div>\n                      <div class=\"child\">\n                        <div>Servicios sociales</div>\n                        <div>\n                          $\n                          {{\n                            packageSelected?.cost?.socialservice\n                              | number: '1.0-0'\n                          }}\n                        </div>\n                      </div>\n                      <div class=\"child\">\n                        <div>Seguridad vial</div>\n                        <div>\n                          $\n                          {{\n                            packageSelected?.cost?.vialrate | number: '1.0-0'\n                          }}\n                        </div>\n                      </div>\n                      <div class=\"child\">\n                        <div>Sellados</div>\n                        <div>\n                          $\n                          {{\n                            packageSelected?.cost?.sellado?.total\n                              | number: '1.0-0'\n                          }}\n                        </div>\n                      </div>\n                      <div class=\"child\">\n                        <div>IVA</div>\n                        <div>\n                          $\n                          {{\n                            packageSelected?.cost?.iva?.total | number: '1.0-0'\n                          }}\n                        </div>\n                      </div>\n                    </div>\n                  </td>\n                </tr>\n                <tr>\n                  <td>Cuota</td>\n                  <th class=\"text-right\">\n                    $ {{ packageSelected?.cost?.invoice | number: '1.0-0' }}\n                  </th>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div\n    class=\"row py-3\"\n    style=\"\n      box-shadow: 0px -1px 4px rgba(0, 0, 0, 0.18);\n      position: fixed;\n      bottom: 0;\n      width: 25%;\n      height: auto;\n      background: #ffffff;\n      z-index: 2000;\n    \"\n  >\n    <div class=\"col-lg-12\">\n      <button\n        [disabled]=\"\n          (formsValid$ | async) || (payment$ | async) || (loadingIssue$ | async)\n        \"\n        (click)=\"checkUW()\"\n        class=\"continue btn btn-primary btn-lg btn-block btn-next-screen\"\n      >\n        <span *ngIf=\"(loadingIssue$ | async) !== true\">Contratar</span>\n        <span *ngIf=\"loadingIssue$ | async\">\n          Contratando\n          <ng-lottie\n            [options]=\"lottieConfig\"\n            width=\"4.75rem\"\n            height=\"2.25rem\"\n          ></ng-lottie>\n        </span>\n      </button>\n    </div>\n  </div>\n</div>\n\n<sxf-modal #childComp>\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">\n      Error\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"closeModal()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <p>{{ (issueError$ | async)?.description }}</p>\n  </div>\n  <div class=\"modal-footer\" *ngIf=\"issueError$ | async as issue\">\n    <div class=\"offset-8 col-4\">\n      <button\n        type=\"button\"\n        class=\"btn btn-primary btn-lg btn-block\"\n        (click)=\"issue.code === 105 ? goThankYouPage() : closeModal()\"\n      >\n        Aceptar\n      </button>\n    </div>\n  </div>\n</sxf-modal>\n\n<sxf-modal #vehicleDetails [options]=\"{ size: 'xl' }\">\n  <div class=\"modal-header modal-header-items\">\n    <div class=\"modal-vehicle-title\" id=\"modal-basic-title\">\n      Autos a asegurar\n    </div>\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"closeVehicleDetails()\"\n      name=\"closeModalBtn\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <br />\n  <div class=\"modal-body modal-body-items\">\n    <table\n      class=\"details-table\"\n      id=\"details-table\"\n      style=\"max-width: 100%; min-width: 100%; width: 100%;\"\n    >\n      <tr *ngFor=\"let vehicles of vehicles$ | async\">\n        <td width=\"17%\">\n          <b>{{ vehicles.brand.description }} {{ vehicles.year }}</b>\n          <br />\n          {{ vehicles.model.description }}\n        </td>\n        <td width=\"17%\">\n          Suma asegurada\n          <br />\n          <b>\n            $\n            {{\n              vehicles.statedamount || vehicles.model.statementamount\n                | number: '1.0-0'\n            }}\n          </b>\n        </td>\n        <td width=\"17%\">\n          Cobertura\n          <br />\n          <b>{{ getSelectedPackage(vehicles) }}</b>\n        </td>\n        <td width=\"17%\">\n          Asistencia mecánica\n          <br />\n          <b>{{ getSelectedMechanicalAssistance(vehicles) }}</b>\n        </td>\n        <td width=\"15%\">\n          <ng-template #tooltipContent>\n            <table class=\"additional-table\">\n              <tbody>\n                <tr *ngFor=\"let item of getSelectedAdditionals(vehicles)\">\n                  <td>\n                    {{ item.pattern.description }}\n                  </td>\n                  <td>\n                    <b>\n                      $\n                      {{\n                        item.terms[0].value?.current || item.terms[0].value\n                          | number: '1.0-0'\n                      }}\n                    </b>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </ng-template>\n          <div class=\"input-group\">\n            <input\n              readonly\n              style=\"cursor: pointer;\"\n              type=\"text\"\n              class=\"form-control\"\n              value=\"{{ getSelectedAdditionals(vehicles).length }} adicionales\"\n            />\n            <div class=\"input-group-append\" id=\"detail-tooltip\">\n              <span\n                class=\"input-group-text\"\n                [ngbTooltip]=\"\n                  getSelectedAdditionals(vehicles).length > 0\n                    ? tooltipContent\n                    : ''\n                \"\n                placement=\"bottom\"\n              >\n                <sxf-icon class=\"icon-green\" type=\"view\"></sxf-icon>\n              </span>\n            </div>\n          </div>\n        </td>\n        <td width=\"17%\" class=\"text-center\" *ngIf=\"!disabledByRetrieve\">\n          <a\n            class=\"edit-vehicle-coverage\"\n            (click)=\"goCoverageVehicles(vehicles.id)\"\n          >\n            Editar\n          </a>\n        </td>\n      </tr>\n    </table>\n  </div>\n</sxf-modal>\n<sxf-modal\n  #modalEditCoverage\n  [options]=\"{ backdrop: 'static', keyboard: false }\"\n>\n  <div class=\"modal-header\" style=\"padding-bottom: 25px !important;\">\n    <h4\n      style=\"\n        padding-left: 15px;\n        font-size: 18px !important;\n        font-weight: 700;\n        color: #0033a0;\n      \"\n      id=\"modal-basic-title\"\n    >\n      Editar cotización\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close closeButtom\"\n      aria-label=\"Close\"\n      (click)=\"closeModal()\"\n      name=\"closeModalBtn\"\n      style=\"padding-top: 15px; padding-right: 63px; padding-bottom: 0px;\"\n    >\n      <span style=\"font-size: 3rem; color: #06369e;\" aria-hidden=\"true\">\n        &times;\n      </span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"col-lg-10\">\n      <h4 class=\"modal-title\" style=\"font-size: 2rem !important;\">\n        Al editar cualquier dato de la cotización, se recotizará con las tarifas\n        actuales. ¿Querés editarla de todos modos?\n      </h4>\n    </div>\n  </div>\n\n  <div class=\"modal-footer\" style=\"padding-top: 54px !important;\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-3 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-modal btn-lg btn-block\"\n          (click)=\"modalEditCoverage.closeModal()\"\n        >\n          Cancelar\n        </button>\n      </div>\n      <div class=\"col-lg-5 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"goQuote()\"\n        >\n          <span>Editar Cotización</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n","import { Component, OnInit, ViewChild, OnDestroy } from '@angular/core';\nimport * as fromQuoteActions from '../../../quote/state/quote.actions';\nimport * as fromPolicy from '../../../../state/policy';\nimport * as fromPolicyActions from '../../../../state/policy/policy.actions';\nimport * as fromEmission from '../../../emission/state';\nimport * as fromEmissionActions from '../../../emission/state/emission.actions';\nimport { Store } from '@ngrx/store';\nimport * as fromProducer from '../../../../../producer/state';\nimport * as fromProducerActions from '../../../../../producer/state/producer.actions';\nimport {\n  IPolicy,\n  QuotingService,\n  FiscalConditionService,\n  IVehicle,\n  PaymentValidations,\n  ICampaign,\n  PaymentMethodService,\n  PaymentPlansService,\n  IPaymentPlan\n} from '@sura-platform/features';\nimport { IPackage } from '@sura-platform/features/package';\nimport { Router } from '@angular/router';\nimport {\n  Observable,\n  Subject,\n  combineLatest,\n  of,\n  Subscription,\n  EMPTY\n} from 'rxjs';\nimport { ModalComponent } from '@sura-platform/web';\nimport * as fromQuote from '../../../quote/state';\nimport {\n  switchMap,\n  map,\n  share,\n  tap,\n  first,\n  distinctUntilKeyChanged\n} from 'rxjs/operators';\nimport { AnimationOptions } from 'ngx-lottie';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { NotificationService } from '@sura-platform/core/services/notification.service';\nimport { QuoteIssueAdapter } from '../../../../adapters/quote-issue.adapter';\nimport { FormControl } from '@angular/forms';\nimport { BACKEND_ERRORS } from '@sura-platform/core/error/error.enum';\nimport { ProducerService, IProducer } from '@sura-platform/features/producer';\n@Component({\n  selector: 'sxf-details',\n  templateUrl: './details.component.html',\n  styleUrls: ['./details.component.scss']\n})\nexport class DetailsComponent implements OnInit, OnDestroy {\n  lottieConfig: AnimationOptions = {\n    path: '/assets/loadings/sura-loader.json'\n  };\n  @ViewChild('childComp') child_component: ModalComponent = <ModalComponent>{};\n  @ViewChild('uwEmision') uwEmision: ModalComponent = <ModalComponent>{};\n  @ViewChild('vehicleDetails') vehicleDetails: ModalComponent = <\n    ModalComponent\n  >{};\n  @ViewChild('modalEditCoverage') modalEditCoverage: ModalComponent = <\n    ModalComponent\n  >{};\n  /**\n   * variable to get policy from store\n   */\n  currentPolicy: IPolicy = <IPolicy>{};\n  currentMotor: IVehicle = <IVehicle>{};\n  packageSelected: IPackage = <IPackage>{};\n\n  /**\n   * Variable to get mechanicalAssistance\n   */\n  mechanicalAssistance: string | null = null;\n\n  isFromRetrieve: boolean | null = null;\n  fromRetrieve = false;\n  issueError$: Observable<any> = new Observable();\n  subject: Subject<any> = new Subject();\n  loadingIssue$: Subject<boolean> = new Subject();\n  loadingFromRetrieve$: Observable<boolean> | null = null;\n  additionals: any;\n  /**\n   * All vehicles\n   *\n   * @type {Observable<IVehicle[]>}\n   * @memberof DetailsComponent\n   */\n  vehicles$: Observable<IVehicle[]> = new Observable();\n  packageSelectedWithAssistance$: Observable<any> = new Observable();\n  brandModelPrizeCar$: Observable<any> = new Observable();\n  rebillingPeriod$: Observable<any> = new Observable();\n  fiscalCondition$: Observable<any> = new Observable();\n  additionals$: Observable<any> = new Observable();\n  discountAndCommission$: Observable<any> = new Observable();\n  campaign$: Observable<ICampaign[]> = new Observable();\n  installments$: Observable<any> = new Observable();\n  payment$: Observable<any> = new Observable();\n  formsValid$: Observable<any> = new Observable();\n  expandedDetail: boolean | null = null;\n  getQuoteApproved = false;\n\n  /**\n   *  Payment Methods on Emission\n   *\n   * @type {Observable<any>}\n   * @memberof DetailsComponent\n   */\n  paymentMethod$: Observable<any> = new Observable();\n\n  /**\n   * Payment Plan on Emission\n   *\n   * @type {Observable<any>}\n   * @memberof DetailsComponent\n   */\n  paymentPlan$: Observable<any> = new Observable();\n\n  /**\n   * Subscription to emission store\n   *\n   * @type {Subscription}\n   * @memberof DetailsComponent\n   */\n  emissionStoreSubscription: Subscription = new Subscription();\n\n  emissionStoreSubscriptionRetrieve: Subscription = new Subscription();\n  policyStoreProducerSubscription: Subscription = new Subscription();\n  producerServiceSubscription: Subscription = new Subscription();\n  policyStoreSubscription: Subscription = new Subscription();\n  producerStoreSubscription: Subscription = new Subscription();\n\n  /**\n   * If true then when 'Contratar' is pressed,\n   * quotes/issues/bind is called else issues is called\n   *\n   * @memberof DetailsComponent\n   */\n  isApprovedEmission = false;\n\n  /**\n   * If true, then we cannot change the coverage type\n   *\n   * @type {boolean}\n   * @memberof DetailsComponent\n   */\n  disabledByRetrieve: boolean | null = null;\n  //\n  /**\n   * FormControl for campaign\n   *\n   * @memberof DetailsComponent\n   */\n  formCampaign = new FormControl({ value: '', disabled: true });\n  updateCostSubscription: Subscription = new Subscription();\n  producerSubscription: Subscription = new Subscription();\n\n  currentproducer: IProducer = <IProducer>{};\n\n  constructor(\n    private producerService: ProducerService,\n    private router: Router,\n    private storePolicy: Store<fromPolicy.State>,\n    private storeEmission: Store<fromEmission.State>,\n    private quotingService: QuotingService,\n    private storeQuote: Store<fromQuote.State>,\n    private fiscalConditionService: FiscalConditionService,\n    private notificationService: NotificationService,\n    private quoteIssueAdapter: QuoteIssueAdapter,\n    private paymentMethodService: PaymentMethodService,\n    private paymentPlansService: PaymentPlansService,\n    private producerStore: Store<fromProducer.State>,\n    private storeProducer: Store<fromProducer.State>\n  ) {}\n\n  ngOnInit() {\n    this.loadingIssue$.next(false);\n    this.loadingFromRetrieve$ = combineLatest([\n      this.storeEmission.select(fromEmission.getJobNumber),\n      this.storePolicy.select(fromPolicy.getClientData)\n    ]).pipe(\n      switchMap((x) => {\n        const job = x[0];\n        const client = x[1];\n\n        this.isFromRetrieve = job ? true : false;\n\n        if (job && !client.documentNumber) {\n          return of(false);\n        }\n\n        return of(true);\n      })\n    );\n    this.emissionStoreSubscriptionRetrieve = this.storeEmission\n      .select(fromEmission.getEmission)\n      .subscribe((store) => {\n        this.fromRetrieve = store.jobNumberFromQuotes ? true : false;\n      });\n    if (this.fromRetrieve) {\n      this.policyStoreSubscription = this.storePolicy\n        .select(fromPolicy.getPolicyData)\n        .subscribe((data) => {\n          this.storeProducer.dispatch(\n            new fromProducerActions.SetCurrentProducerAction(data.producer.code)\n          );\n\n          this.producerServiceSubscription = this.producerService\n            .getProfile(data.producer.code)\n            .subscribe((producer) => {\n              this.storeProducer.dispatch(\n                new fromProducerActions.SetCurrentProducerProfile(producer)\n              );\n            });\n        });\n    }\n    this.producerSubscription = this.producerStore\n      .select(fromProducer.getCurrentProducer)\n      .subscribe((data: IProducer) => {\n        this.currentproducer = data;\n      });\n    this.formsValid$ = combineLatest([\n      this.storeEmission.select(fromEmission.getFormClientIsValid),\n      this.storeEmission.select(fromEmission.getFormResidenceIsValid),\n      this.storeEmission.select(fromEmission.getFormTaxIsValid),\n      this.storeEmission.select(fromEmission.getFormValidityIsValid),\n      this.storeEmission.select(fromEmission.getFormOtherIsValid)\n    ]).pipe(\n      switchMap((x) => {\n        if (x[0] && x[1] && x[2] && x[3] && x[4]) {\n          return of(false);\n        } else {\n          return of(true);\n        }\n      })\n    );\n    this.payment$ = this.storePolicy.select(fromPolicy.getPolicyData).pipe(\n      switchMap((x) => {\n        if (x.payment.id !== null) {\n          return of(false);\n        } else {\n          const paymentValidation = new PaymentValidations(x.payment);\n          if (\n            paymentValidation.completeModel() &&\n            paymentValidation.validatePayment()\n          )\n            return of(false);\n        }\n        return of(true);\n      })\n    );\n\n    this.vehicles$ = this.storePolicy.select(fromPolicy.getPolicyData).pipe(\n      switchMap((x) => {\n        const vehicles = x.motor.vehicles;\n        return of(vehicles);\n      })\n    );\n\n    this.packageSelectedWithAssistance$ = combineLatest([\n      this.storePolicy.select(fromPolicy.getPolicyData),\n      this.storeQuote.select(fromQuote.getQuoteMotorData),\n      this.storeEmission.select(fromEmission.getJobNumber),\n      this.storeQuote.select(fromQuote.getQuoteApproved)\n    ]).pipe(\n      switchMap((x) => {\n        // Se usa para el boton contratar.\n        this.currentPolicy = x[0];\n        this.currentMotor = x[0].motor.vehicles.find(\n          (c) => c.number === x[1].activeMotor\n        ) as IVehicle;\n        const currentMotor = x[0].motor.vehicles.find(\n          (c) => c.number === x[1].activeMotor\n        );\n        this.getQuoteApproved = x[3];\n        // SI NO TENGO AUTO\n        if (currentMotor?.year === null) {\n          return of({});\n        }\n\n        const packageSelected = currentMotor?.packages?.find(\n          (pk) => pk.selected\n        );\n\n        const assistance = packageSelected?.coverages?.find(\n          (cov) => cov.pattern.code === 'SURA_CA7_AsistenciaMecanicaCov'\n        );\n\n        const currentCost = this.currentPolicy?.costs[0];\n\n        return of({\n          package: packageSelected,\n          assistance: assistance\n            ? assistance.terms[0]?.value?.current\n            : 'NoAssistance',\n          cost: currentCost\n        });\n      })\n    );\n\n    //FIXME: Habilitar esto cuando se suba emisión\n    // this.updateCostSubscription = combineLatest([\n    //   this.storeQuote.select(fromQuote.getCosts),\n    //   this.storePolicy.select(fromPolicy.getCosts).pipe(\n    //     switchMap((c) => of(c[0]?.externalId)),\n    //     distinctUntilChanged()\n    //   )\n    // ]).subscribe(([newCosts, currentCost]) => {\n    //   if (currentCost) {\n    //     const newCost = newCosts.filter((c) => c.externalId === currentCost);\n\n    //     if (newCost.length > 0) {\n    //       this.storePolicy.dispatch(\n    //         new fromPolicyActions.UpdateCostsAction(newCost)\n    //       );\n    //     }\n    //   }\n    // });\n\n    this.additionals$ = combineLatest([\n      this.storePolicy.select(fromPolicy.getPolicyData),\n      this.storeQuote.select(fromQuote.getQuoteMotorData)\n    ]).pipe(\n      switchMap((x) => {\n        const currentMotor = x[0].motor.vehicles.filter(\n          (c) => c.number === x[1].activeMotor\n        )[0];\n\n        // SI NO TENGO AUTO\n        if (currentMotor.year === null) {\n          return of({\n            additionalsLenght: 0,\n            additionals: []\n          });\n        }\n\n        const additionalsList = currentMotor?.packages\n          ?.find((pk) => pk.selected)\n          ?.coverages?.filter(\n            (cov) =>\n              cov.pattern.code !== 'SURA_CA7_ClausulaDeAjusteCov' &&\n              cov.pattern.code !== 'SURA_CA7_AsistenciaMecanicaCov' &&\n              !cov.pattern.code.startsWith('SURA_CA7_Mobility')\n          )\n          .filter(\n            (cov: any) =>\n              cov.category.code === 'SURA_CA7_CobAdicionalesGrp' ||\n              cov.category.code === 'SURA_CA7_AccesoriosGrp'\n          );\n\n        return of({\n          additionalsLenght: additionalsList?.length,\n          additionals: additionalsList\n        });\n      })\n    );\n\n    this.brandModelPrizeCar$ = combineLatest([\n      this.storePolicy.select(fromPolicy.getPolicyData),\n      this.storeQuote.select(fromQuote.getQuoteMotorData)\n    ]).pipe(\n      switchMap((x) => {\n        const currentMotor = x[0].motor.vehicles.filter(\n          (c) => c.number === x[1].activeMotor\n        )[0];\n\n        // SI NO TENGO AUTO\n        if (currentMotor.year === null) {\n          return of({});\n        }\n\n        return of({\n          type: currentMotor.group,\n          brand: currentMotor?.brand?.description,\n          model: currentMotor?.model?.description,\n          //! ML: Esto hay que verificarlo\n          prize:\n            currentMotor.statedamount || currentMotor?.model?.statementamount\n        });\n      })\n    );\n\n    this.rebillingPeriod$ = this.storePolicy\n      .select(fromPolicy.getPolicyData)\n      .pipe(\n        switchMap((x) => {\n          let periodMethod = '';\n          switch (x.period.method) {\n            case 'Sura_ThreeMonths':\n              periodMethod = 'Trimestral';\n              break;\n            case 'HalfYear':\n              periodMethod = 'Semestral';\n              break;\n            case 'Sura_OneMonth':\n              periodMethod = 'Mensual';\n              break;\n            case 'Annual':\n              periodMethod = 'Anual';\n              break;\n            default:\n              break;\n          }\n          return of(periodMethod);\n        })\n      );\n\n    this.fiscalCondition$ = combineLatest([\n      this.storePolicy.select(fromPolicy.getPolicyData),\n      this.fiscalConditionService.getAllFiscalCondition()\n    ]).pipe(\n      switchMap((x) => {\n        const fiscalCondition = x[1].filter(\n          (f) => f.code === x[0].fiscalcondition\n        )[0].description;\n        return of(fiscalCondition);\n      })\n    );\n\n    this.discountAndCommission$ = this.storePolicy\n      .select(fromPolicy.getPolicyData)\n      .pipe(\n        switchMap((x) => {\n          const discount = x?.motor?.discounts.find(\n            (d) => d.code === 'SuraCA7_ExternalComercialDiscount'\n          )?.value;\n\n          return of({\n            discount,\n            commission: x.motor.commission.producer\n          });\n        })\n      );\n\n    this.campaign$ = this.storePolicy.select(fromPolicy.getPolicyData).pipe(\n      distinctUntilKeyChanged('campaign'),\n      switchMap((policy: IPolicy) => {\n        if (policy?.campaign) {\n          return of([policy.campaign]);\n        }\n\n        return of((null as unknown) as ICampaign[]);\n      }),\n      tap((campaign: ICampaign[]) => {\n        if (campaign !== null) this.formCampaign.setValue(campaign[0].id);\n      })\n    );\n\n    this.installments$ = this.storePolicy\n      .select(fromPolicy.getPolicyData)\n      .pipe(map((x: IPolicy) => x.paymentTerm.maximumnumberofinstallments));\n\n    this.issueError$ = this.subject.pipe(share());\n\n    this.emissionStoreSubscription = this.storeEmission\n      .select(fromEmission.getEmission)\n      .subscribe((emission) => {\n        this.isApprovedEmission = emission.approvedEmission;\n        this.disabledByRetrieve = emission.jobNumberFromQuotes ? true : false;\n      });\n\n    this.paymentMethod$ = this.storePolicy\n      .select(fromPolicy.getPolicyData)\n      .pipe(\n        distinctUntilKeyChanged('payment'),\n        switchMap((policy) => {\n          if (policy.payment) {\n            return this.paymentMethodService\n              .getAllPaymentMethods(policy.job)\n              .pipe(\n                switchMap((ps) => {\n                  return of(\n                    ps.filter((c) => {\n                      return c.code === policy.payment.method;\n                    })[0]\n                  );\n                })\n              );\n          } else {\n            return of(EMPTY);\n          }\n        })\n      );\n\n    this.paymentPlan$ = this.storePolicy.select(fromPolicy.getPolicyData).pipe(\n      first(),\n      switchMap((policy) => {\n        if (policy) {\n          return this.paymentPlansService\n            .getAllPaymentPlans(\n              'ars',\n              policy.payment.method as string,\n              policy.producer.code,\n              new Date(policy.period.start).toISOString(),\n              new Date(policy.period.end).toISOString()\n            )\n            .pipe(\n              switchMap((pp) => {\n                const currentPlan = pp.find(\n                  (plan) => plan.code === policy.payment.plan.code\n                ) as IPaymentPlan;\n\n                this.storePolicy.dispatch(\n                  new fromPolicyActions.SetCurrentPaymentTermAction(currentPlan)\n                );\n\n                return of(currentPlan);\n              })\n            );\n        } else {\n          return of(EMPTY);\n        }\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.producerServiceSubscription?.unsubscribe();\n    this.policyStoreSubscription?.unsubscribe();\n    this.emissionStoreSubscription?.unsubscribe();\n    this.emissionStoreSubscriptionRetrieve?.unsubscribe();\n    this.producerStoreSubscription?.unsubscribe();\n    this.policyStoreProducerSubscription?.unsubscribe();\n    this.updateCostSubscription?.unsubscribe();\n    this.producerSubscription?.unsubscribe();\n  }\n\n  checkUW() {\n    // ML: Según la US-5866 no debe saltar un modal en esta instancia\n    // ya que en la instancia de DNI y PATENTE ya se avisa que existe UW\n    this.issuePolicy();\n  }\n\n  issuePolicy() {\n    this.loadingIssue$.next(true);\n\n    if (this.isApprovedEmission) {\n      this.quotingService.emitPolicy(this.currentPolicy).subscribe(\n        (data) => this.issueSuccess(data),\n        (err) => this.issueError(err)\n      );\n      return;\n    }\n\n    const adapted = this.quoteIssueAdapter.adapt(this.currentPolicy);\n    this.quotingService.issuePolicy(adapted).subscribe(\n      (data) => this.issueSuccess(data),\n      (err) => this.issueError(err)\n    );\n  }\n\n  closeModal() {\n    this.child_component.closeModal();\n  }\n\n  goThankYouPage() {\n    this.child_component.closeModal();\n    this.storeEmission.dispatch(new fromEmissionActions.SetUWIssueAction(true));\n    this.router.navigateByUrl('quoting/thankyou');\n  }\n\n  closeUWModal(reasonClose = null) {\n    if (reasonClose === 'continue') {\n      this.issuePolicy();\n    }\n    this.uwEmision.closeModal();\n  }\n\n  getAssistanceDescription(code: string): Observable<string> {\n    const currentCode: any = code;\n    //FIXME: ML - En el momento de RETRIEVE no cuento con los datos de asistencias\n    const assistance = [\n      { code: 'SOSBasic', description: 'SOS Básica' },\n      { code: 'SOSPremium', description: 'SOS Premium' },\n      { code: 'NoAssistance', description: 'Sin Asistencia' }\n    ];\n\n    return of(\n      assistance.find((a) => a.code === currentCode)?.description ||\n        'Sin Asistencia'\n    );\n    // return this.storePolicy.select(fromQuote.getQuoteMotorData).pipe(\n    //   switchMap((x) => {\n    //     return of(\n    //       x.mechanicalAssists.filter((ass) => ass.code === code)[0].description\n    //     );\n    //   })\n    // );\n  }\n\n  goCoverage() {\n    this.router.navigateByUrl(\n      'quoting/coverage/' + this.currentMotor.number + ''\n    );\n  }\n  goQuote() {\n    this.storeQuote.dispatch(\n      new fromQuoteActions.SetActiveRouteMotor(\n        'motor/' + this.currentMotor.number + '/sum'\n      )\n    );\n    this.storeQuote.dispatch(new fromQuoteActions.SetCurrentLine('motor'));\n    this.router.navigateByUrl(\n      '/quoting/quote/questions/motor/' + this.currentMotor.number + '/sum'\n    );\n    this.modalEditCoverage.closeModal();\n  }\n  openModal() {\n    this.modalEditCoverage.openModal();\n  }\n\n  goCoverageVehicles(VehicleNumber: any) {\n    this.storeQuote.dispatch(\n      new fromQuoteActions.SetCurrentMotorAction(VehicleNumber)\n    );\n    this.closeVehicleDetails();\n    this.router.navigateByUrl('quoting/coverage/' + VehicleNumber + '');\n  }\n  issueSuccess(data: any) {\n    this.loadingIssue$.next(false);\n    if (data.inspection) {\n      this.storePolicy.dispatch(\n        new fromPolicyActions.SetInspectionStatusAction(data.inspection.status)\n      );\n    }\n    if (data.policynumber) {\n      this.storePolicy.dispatch(\n        new fromPolicyActions.SetPolicyNumberAction(data.policynumber)\n      );\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetUWIssueAction(false)\n      );\n\n      if (!data.inspection) {\n        this.router.navigateByUrl('quoting/thankyou');\n      } else {\n        if (this.currentMotor.zerokm) {\n          this.router.navigateByUrl('quoting/thankyou');\n        } else {\n          this.router.navigateByUrl('quoting/inspection');\n        }\n      }\n    } else if (data.inspection?.status) {\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetUWIssueAction(false)\n      );\n      if (this.currentMotor.zerokm) {\n        this.router.navigateByUrl('quoting/thankyou');\n      } else {\n        this.router.navigateByUrl('quoting/inspection');\n      }\n    } else if (data.error?.code === BACKEND_ERRORS.UNDERWRITER) {\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetUWIssueAction(true)\n      );\n      this.router.navigateByUrl('quoting/thankyou');\n    } else {\n      this.subject.next(data.error);\n      // this.issueError = data.error.description;\n      this.child_component.openModal();\n    }\n  }\n\n  issueError(err: HttpErrorResponse | any) {\n    //FIXME: JC: Parche para evaluar errores ante un status 500 cuando sea una validacion de negocio. (UW)\n    this.loadingIssue$.next(false);\n    if (err.code === BACKEND_ERRORS.UNDERWRITER) {\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetUWIssueAction(true)\n      );\n      this.router.navigateByUrl('quoting/thankyou');\n    } else if (err.message.includes('Bad Request')) {\n      this.notificationService.notify({\n        code: -2,\n        description: 'Ha ocurrido un error, por favor intentelo mas tarde'\n      });\n    } else {\n      this.notificationService.notify({\n        code: -2,\n        description: err.message.replace(/^[^:]+: */, '')\n      });\n    }\n  }\n\n  openVehicleDetails() {\n    this.vehicleDetails.openModal();\n  }\n\n  closeVehicleDetails() {\n    this.vehicleDetails.closeModal();\n  }\n\n  /**\n   * Function to get package description of current vehicle\n   *\n   * @param {IVehicle} vehicle\n   * @returns\n   * @memberof DetailsComponent\n   */\n  getSelectedPackage(vehicle: IVehicle) {\n    return (\n      vehicle.packages?.find((p) => p.selected)?.description ||\n      vehicle.package?.description\n    );\n  }\n\n  /**\n   * Function to get currente mechanical assistance of\n   * current vehicle\n   *\n   * @param {IVehicle} vehicle\n   * @returns\n   * @memberof DetailsComponent\n   */\n  getSelectedMechanicalAssistance(vehicle: IVehicle) {\n    const currentAssistance =\n      vehicle?.packages\n        ?.find((p) => p.selected)\n        ?.coverages?.find(\n          (c) => c.pattern.code === 'SURA_CA7_AsistenciaMecanicaCov'\n        )?.terms[0] ||\n      vehicle.package?.coverages?.find(\n        (c) => c.pattern.code === 'SURA_CA7_AsistenciaMecanicaCov'\n      )?.terms[0];\n\n    const descriptions = [\n      { value: 'SOSBasic', description: 'SOS Básica' },\n      { value: 'SOSPremium', description: 'SOS Premium' },\n      { value: 'NoAssistance', description: 'Sin Asistencia' }\n    ];\n\n    return (\n      descriptions.find((d) => d.value === currentAssistance?.value?.current)\n        ?.description || 'Sin Asistencia'\n    );\n  }\n\n  /**\n   * Function to filter additionals of selected vehicle\n   *\n   * @param {IVehicle} vehicle\n   * @returns\n   * @memberof DetailsComponent\n   */\n  getSelectedAdditionals(vehicle: IVehicle) {\n    const additionals =\n      vehicle.packages?.find((p) => p.selected)?.coverages ||\n      vehicle.package?.coverages;\n\n    const additionalsGroups = [\n      'SURA_CA7_CobAdicionalesGrp',\n      'SURA_CA7_AccesoriosGrp'\n    ];\n\n    const additionalExcludeCodes = [\n      'SURA_CA7_AsistenciaMecanicaCov',\n      'SURA_CA7_ClausulaDeAjusteCov',\n      'SURA_CA7_MobilityTheftDamageCov',\n      'SURA_CA7_MobilityDeathCov',\n      'SURA_CA7_MobilityIncapacityCov',\n      'SURA_CA7_MobilityBoneFractureCov',\n      'SURA_CA7_MobilityInterIncomeCov',\n      'SURA_CA7_MobilityDamageToThirdCov',\n      'SURA_CA7_MobilityTheftPersonalEffectsCov',\n      'SURA_CA7_MobilityTheftPersonalDocCov',\n      'SURA_CA7_MobilityTheftElectronicEquipCov'\n    ];\n\n    return (\n      additionals?.filter(\n        (ad) =>\n          additionalsGroups.includes(ad?.category?.code as string) &&\n          !additionalExcludeCodes.includes(ad?.pattern?.code as string)\n      ) || []\n    );\n  }\n}\n","<div class=\"row\">\n  <div\n    class=\"col-lg-9 pr-2 ps\"\n    style=\"position: relative; min-height: 90vh; max-height: 90vh; height: 90vh;\"\n    [perfectScrollbar]=\"{ suppressScrollY: false }\"\n  >\n    <div class=\"row\">\n      <div class=\"questions col-lg-10 offset-lg-1\">\n        <ul class=\"timeline list-group\">\n          <li\n            *ngFor=\"let item of routes\"\n            [ngClass]=\"{\n              active: item.path == routeActive,\n              visited: !(item.value === null) && !(item.value.length < 1)\n            }\"\n            class=\"list-group-item\"\n          >\n            <div class=\"row header\">\n              <div class=\"col-lg-12 line\">\n                <div class=\"float-right edit\">\n                  <sxf-icon\n                    type=\"edit\"\n                    *ngIf=\"item.show && !item.disabled\"\n                    [routerLink]=\"item.path\"\n                    (click)=\"currentRoute(item.path)\"\n                    [disabled]=\"item.disabled\"\n                  ></sxf-icon>\n                </div>\n                <label class=\"mb-2\">\n                  {{\n                    item.value === null || item.value.length < 1\n                      ? item.question\n                      : item.shortName + ': '\n                  }}\n                  <span\n                    *ngIf=\"!(item.value === null) && !(item.value.length < 1)\"\n                    class=\"item-value\"\n                  >\n                    {{ item.value | uppercase }}\n                  </span>\n                </label>\n              </div>\n            </div>\n            <div id=\"collapseExample\" [ngbCollapse]=\"!item.show\">\n              <div *ngIf=\"item.path === routeActive\" class=\" \">\n                <router-outlet></router-outlet>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-lg-3 px-0 ps\">\n    <sxf-details></sxf-details>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport * as fromEmissionReducer from '../../state/emission.reducer';\nimport * as fromEmission from '../../state';\nimport * as fromEmissionActions from '../../state/emission.actions';\nimport { IRoutes } from '@sura-platform/web/core/models/question/routes.interface';\n\n@Component({\n  selector: 'sxf-emission-questions',\n  templateUrl: './emission-questions.component.html',\n  styleUrls: ['./emission-questions.component.scss']\n})\nexport class EmissionQuestionsComponent implements OnInit {\n  routes: IRoutes[] = [];\n  routeActive = '';\n  constructor(private store: Store<fromEmissionReducer.EmissionState>) {}\n\n  ngOnInit() {\n    this.store.select(fromEmission.getRoutes).subscribe((data: IRoutes[]) => {\n      this.routes = data;\n    });\n\n    this.store.select(fromEmission.getActiveRoute).subscribe((data: string) => {\n      this.routeActive = data;\n      if (data === '') {\n        this.store.dispatch(new fromEmissionActions.SetActiveRoute('client'));\n        this.routeActive = 'client';\n      }\n    });\n  }\n\n  currentRoute(event: string) {\n    this.store.dispatch(new fromEmissionActions.SetActiveRoute(event));\n  }\n}\n","<div [formGroup]=\"formValidaty\">\n  <div class=\"row\">\n    <div class=\"col-lg-4 pl-0\">\n      <label>\n        Inicio de vigencia\n        <sup>*</sup>\n      </label>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-4 pl-0\">\n      <sxf-datetimepicker\n        (keydown.enter)=\"onEnter()\"\n        [minDate]=\"minDate\"\n        [maxDate]=\"maxDate\"\n        formControlName=\"beginningValidity\"\n        name=\"beginningValidityPolicy\"\n        [disabled]=\"disabledByRetrieve\"\n      ></sxf-datetimepicker>\n    </div>\n  </div>\n  <div class=\"row\" *ngIf=\"retroactiveVigence\">\n    <div class=\"col-5 pl-0\">\n      <span class=\"text-danger\" style=\"font-size: 15px;\">\n        <b>La fecha ingresada requiere autorización.</b>\n      </span>\n    </div>\n  </div>\n  <div class=\"row pt-4\">\n    <div class=\"col-lg-8 pl-0\">\n      <span>\n        <button\n          (click)=\"continue()\"\n          class=\"btn btn-primary btn-heft\"\n          name=\"continueValidatePolicyBtn\"\n        >\n          Continuar\n        </button>\n      </span>\n      <span class=\"press-enter ml-3 mr-4\">\n        o presiona ENTER\n      </span>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport * as fromPolicy from '../../../../state/policy';\nimport * as fromQuote from '../../../quote/state';\nimport * as fromPolicyActions from '../../../../state/policy/policy.actions';\nimport * as fromEmission from '../../../emission/state';\nimport * as fromEmissionActions from '../../../emission/state/emission.actions';\nimport { FlowRouteEmissionService } from '../../services/flow-route-emission.service';\nimport { IRoutes } from '@sura-platform/web/core/models/question/routes.interface';\nimport * as moment from 'moment';\nimport { Subject, Subscription, combineLatest } from 'rxjs';\n\n@Component({\n  selector: 'sxf-validity',\n  templateUrl: './validity.component.html',\n  styleUrls: ['./validity.component.scss']\n})\nexport class ValidityComponent implements OnInit, OnDestroy {\n  constructor(\n    private fb: FormBuilder,\n    private storePolicy: Store<fromPolicy.State>,\n    private flowRouteEmissionService: FlowRouteEmissionService,\n    private storeEmission: Store<fromEmission.State>,\n    private storeQuote: Store<fromQuote.State>\n  ) {}\n  formValidaty: FormGroup;\n  date: any;\n  maxDate: any;\n  minDate: any;\n  rebillingMonths: number;\n  rebillingCode: string;\n  routes: IRoutes[];\n  today: moment.Moment;\n  isLessThatToday$: Subject<boolean> = new Subject();\n  retroactiveVigence = false;\n  periodData: any;\n\n  disabledByRetrieve$: Subscription;\n  disabledByRetrieve: boolean;\n\n  ngOnInit() {\n    this.formValidaty = this.fb.group({\n      beginningValidity: [, Validators.required]\n    });\n\n    this.storeQuote.select(fromQuote.getServerDate).subscribe((data) => {\n      this.today = moment(data, 'YYYY-MM-DD');\n\n      this.date = {\n        year: this.today.year(),\n        month: this.today.month() + 1,\n        day: this.today.date()\n      };\n\n      const momentTodayForMinDate = moment(this.today).subtract(2, 'months');\n      const momentTodayForMaxDate = moment(this.today).add(30, 'days');\n\n      this.minDate = {\n        year: momentTodayForMinDate.year(),\n        month: momentTodayForMinDate.month() + 1,\n        day: momentTodayForMinDate.date()\n      };\n\n      this.maxDate = {\n        year: momentTodayForMaxDate.year(),\n        month: momentTodayForMaxDate.month() + 1,\n        day: momentTodayForMaxDate.date()\n      };\n    });\n\n    this.storePolicy\n      .select(fromPolicy.getPeriod)\n      .subscribe((data) => {\n        const dateFromStore = moment(data.start, 'YYYY-MM-DD');\n\n        const dateForInput = {\n          year: dateFromStore.year(),\n          month: dateFromStore.month() + 1,\n          day: dateFromStore.date()\n        };\n\n        switch (data.method) {\n          case 'Sura_ThreeMonths':\n            this.rebillingMonths = 3;\n            this.rebillingCode = 'Sura_ThreeMonths';\n            break;\n          default:\n            this.rebillingMonths = 3;\n            this.rebillingCode = 'Sura_ThreeMonths';\n            break;\n        }\n\n        this.formValidaty\n          .get('beginningValidity')\n          .setValue(dateForInput, { emitEvent: true });\n\n        const _date = new Date(\n          dateForInput.year,\n          dateForInput.month,\n          dateForInput.day\n        ).toDateString();\n\n        const momentDate = moment(_date);\n        if (momentDate.subtract(1, 'month').diff(this.today, 'days') < 0) {\n          this.retroactiveVigence = true;\n        } else {\n          this.retroactiveVigence = false;\n        }\n      })\n      .unsubscribe();\n\n    this.storeEmission.select(fromEmission.getRoutes).subscribe((data) => {\n      this.routes = data;\n    });\n\n    this.formValidaty\n      .get('beginningValidity')\n      .valueChanges.subscribe((data) => {\n        if (data !== null) {\n          const _date = new Date(\n            data.year,\n            data.month,\n            data.day\n          ).toDateString();\n          const momentDate = moment(_date);\n\n          if (momentDate.subtract(1, 'month').diff(this.today, 'days') < 0) {\n            this.retroactiveVigence = true;\n          } else {\n            this.retroactiveVigence = false;\n          }\n          this.periodData = {\n            start: momentDate.format(),\n            end: momentDate.add(this.rebillingMonths, 'months').format(),\n            method: this.rebillingCode\n          };\n\n          this.storePolicy.dispatch(\n            new fromPolicyActions.SetPeriodData(this.periodData)\n          );\n        }\n      });\n\n    this.disabledByRetrieve$ = combineLatest([\n      this.storeEmission.select(fromEmission.getEmission),\n      this.storePolicy.select(fromPolicy.getPolicyData)\n    ]).subscribe((x) => {\n      const job = x[0].jobNumberFromQuotes;\n      const approved = x[0].approvedEmission;\n      const policy = x[1];\n\n      this.disabledByRetrieve =\n        job && approved && policy.period && policy.period.start ? true : false;\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.disabledByRetrieve$) this.disabledByRetrieve$.unsubscribe();\n  }\n\n  onEnter() {\n    if (this.formValidaty.valid) {\n      this.continue();\n    }\n  }\n\n  continue() {\n    this.flowRouteEmissionService.enableRoute(this.routes, `aditionalauto/1`);\n\n    this.storeEmission.dispatch(\n      new fromEmissionActions.SetActiveRoute('aditionalauto/1')\n    );\n\n    // this.storePolicy.dispatch(\n    //   new fromPolicyActions.SetPeriodData(this.periodData)\n    // );\n\n    this.routes.forEach((element) => {\n      if (element.path === 'validity') {\n        element.value =\n          this.formValidaty.get('beginningValidity').value.day +\n          '/' +\n          this.formValidaty.get('beginningValidity').value.month +\n          '/' +\n          this.formValidaty.get('beginningValidity').value.year;\n      }\n    });\n\n    if (this.formValidaty.valid) {\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetFormEmissionTaxIsValidAction(true)\n      );\n    }\n\n    this.flowRouteEmissionService.enableRoute(this.routes, 'aditionalauto/1');\n\n    // this.router.navigateByUrl('quoting/emission/questions/aditionalauto');\n  }\n}\n","<div id=\"tabs\" #tabs>\n  <div class=\"row\">\n    <div class=\"col-lg-12 px-0\">\n      <ul\n        class=\"nav nav-pills nav-fill\"\n        *ngIf=\"paymentMethods$ | async as paymentMethods\"\n      >\n        <li\n          *ngFor=\"let methods of paymentMethods\"\n          class=\"nav-item tab-unselected\"\n        >\n          <label\n            class=\"nav-link active\"\n            [ngClass]=\"{ active: activeTab === methods.code }\"\n            (click)=\"changeTab(methods)\"\n            data-toggle=\"tab\"\n          >\n            <div class=\"cardpayment input-group\">\n              <div class=\"form-radio-label\">\n                <input\n                  type=\"radio\"\n                  name=\"options\"\n                  autocomplete=\"off\"\n                  [checked]=\"methods.code === activeTab\"\n                  name=\"paymentMethod{{ methods.code }}\"\n                />\n                <label for=\"radio\" class=\"radio-label\">\n                  {{ methods.description }}\n                </label>\n              </div>\n              <div></div>\n            </div>\n            <div class=\"text-dark text-left ml-2\">{{ methods.legend }}</div>\n          </label>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class=\"tab-content mt-3\" *ngIf=\"paymentInstruments$ | async as payments\">\n    <!--this is credit card-->\n    <div *ngIf=\"activeTab === 'CreditCard' && payments.length > 0\">\n      <div>\n        <div class=\"row\">\n          <div class=\"col-lg-12 pl-2\">\n            <label>Tarjetas guardadas para este cliente</label>\n            <br />\n          </div>\n        </div>\n\n        <!-- <ul class=\"nav nav-pills justify-fill\"> -->\n        <div class=\"row pl-2\">\n          <div class=\"mr-3\">\n            <button\n              class=\"btn btn-primary btn-icon\"\n              (click)=\"previousPaginate()\"\n              name=\"previousPaginateBtn\"\n            >\n              <sxf-icon class=\"icon-blue\" type=\"arrow-left\"></sxf-icon>\n            </button>\n          </div>\n          <div class=\"col-7\">\n            <div class=\"row p-0\">\n              <div\n                class=\"col mr-3 px-0 nav-item tab-unselected\"\n                *ngFor=\"\n                  let item of paginateCreditCards(payments, 2, 0);\n                  let i = index\n                \"\n              >\n                <label\n                  *ngIf=\"item.method === 'CreditCard'\"\n                  (click)=\"setPaymentMethod(item)\"\n                  class=\"nav-link active\"\n                  data-toggle=\"tab\"\n                >\n                  <div class=\"payment-card\">\n                    <div class=\"input-group\" style=\"cursor: pointer;\">\n                      <div class=\"form-radio-label\">\n                        <input\n                          type=\"radio\"\n                          autocomplete=\"off\"\n                          [checked]=\"currentPolicy.payment.id === item.id\"\n                          name=\"optionPayment{{ item.id }}\"\n                          [disabled]=\"disabledByRetrieve\"\n                        />\n                        <label for=\"radio\" class=\"radio-label\">\n                          &nbsp;&nbsp;&nbsp;&nbsp;\n                          <img\n                            width=\"40\"\n                            src=\"../../../../../../../assets/cards/{{\n                              getCardImg(item.displayname) | uppercase\n                            }}.svg\"\n                            (error)=\"cardNotExists($event)\"\n                          />\n                          &nbsp;&nbsp;\n                          {{ item.displayname | cardnumber }}\n                        </label>\n                      </div>\n                    </div>\n                  </div>\n                </label>\n                <!-- <li class=\"nav-item tab-unselected\" *ngFor=\"let item of payments\"> -->\n              </div>\n            </div>\n          </div>\n          <div class=\"px-0\">\n            <button\n              class=\"btn btn-primary btn-icon\"\n              name=\"nextPaginateBtn\"\n              (click)=\"nextPaginate(payments.length)\"\n            >\n              <sxf-icon class=\"icon-blue\" type=\"arrow-right\"></sxf-icon>\n            </button>\n          </div>\n          <div class=\"col-lg-3 px-0\">\n            <button\n              class=\"btn btn-primary btn-icon\"\n              (click)=\"addNewPaymentWay()\"\n              [disabled]=\"disabledByRetrieve\"\n              name=\"addNewPaymentWayBtn\"\n              style=\"color: #00aec7; border: none; box-shadow: none;\"\n            >\n              <sxf-icon class=\"icon-green\" type=\"plus\"></sxf-icon>\n              Agregar tarjeta\n            </button>\n          </div>\n        </div>\n        <!-- </ul> -->\n      </div>\n    </div>\n    <!--this is debit card-->\n    <div *ngIf=\"activeTab === 'BankingDebt' && payments.length > 0\">\n      <div>\n        <div class=\"row\">\n          <div class=\"col-lg-12 pl-2\">\n            <label>Cuentas guardadas para este cliente</label>\n            <br />\n          </div>\n        </div>\n        <!-- <ul class=\"nav nav-pills justify-fill\"> -->\n        <div class=\"row pl-2\">\n          <div class=\"mr-3\">\n            <button\n              class=\"btn btn-primary btn-icon\"\n              (click)=\"previousPaginate()\"\n              name=\"previousPaginateBtn\"\n            >\n              <sxf-icon class=\"icon-blue\" type=\"arrow-left\"></sxf-icon>\n            </button>\n          </div>\n          <div class=\"col-7\">\n            <div class=\"row p-0\">\n              <div\n                class=\"col mr-3 px-0 nav-item tab-unselected\"\n                *ngFor=\"let item of paginateCbus(payments, 2, 0); let i = index\"\n              >\n                <label\n                  *ngIf=\"item.method === 'BankingDebt'\"\n                  (click)=\"setPaymentMethod(item)\"\n                  class=\"nav-link active\"\n                  data-toggle=\"tab\"\n                >\n                  <div class=\"payment-card\">\n                    <div class=\"input-group pt-1\">\n                      <div class=\"form-radio-label\">\n                        <input\n                          type=\"radio\"\n                          autocomplete=\"off\"\n                          [checked]=\"activePaymentMethodId === item.id\"\n                          name=\"radioPaymentOption{{ item.id }}\"\n                        />\n                        <label for=\"radio\" class=\"radio-label\">\n                          &nbsp;&nbsp;\n                          {{ item.displayname | slice: 5:27 }}\n                        </label>\n                      </div>\n                    </div>\n                  </div>\n                </label>\n                <!-- <li class=\"nav-item tab-unselected\" *ngFor=\"let item of payments\"> -->\n              </div>\n            </div>\n          </div>\n          <div class=\"px-0\">\n            <button\n              class=\"btn btn-primary btn-icon\"\n              name=\"nextPaginatePaymentBtn\"\n              (click)=\"nextPaginate(payments.length)\"\n            >\n              <sxf-icon class=\"icon-blue\" type=\"arrow-right\"></sxf-icon>\n            </button>\n          </div>\n          <div class=\"col-lg-3 px-0\">\n            <button\n              class=\"btn btn-primary btn-icon\"\n              (click)=\"addNewPaymentWay()\"\n              name=\"addNewPaymentWayPaymentBtn\"\n              style=\"color: #00aec7; border: none; box-shadow: none;\"\n            >\n              <sxf-icon class=\"icon-green\" type=\"plus\"></sxf-icon>\n              Agregar CBU\n            </button>\n          </div>\n        </div>\n        <!-- </ul> -->\n      </div>\n    </div>\n    <!--this is coupon-->\n  </div>\n  <div class=\"tab-content mt-3\">\n    <div\n      [formGroup]=\"formCredit\"\n      *ngIf=\"newPaymentWay && activeTab === 'CreditCard'\"\n    >\n      <div class=\"row mt-2 pl-2\">\n        <div class=\"col-lg-4 px-0\">\n          <label>\n            Número de tarjeta\n            <sup>*</sup>\n          </label>\n        </div>\n        <div class=\"col-lg-4\">\n          <label>\n            Vencimiento\n            <sup>*</sup>\n          </label>\n        </div>\n      </div>\n      <div class=\"row pl-2\">\n        <div class=\"col-4 pl-0\">\n          <sxf-textbox\n            type=\"text\"\n            formControlName=\"number\"\n            [mask]=\"numberMask\"\n            label=\"\"\n            placeholder=\"\"\n            [helpFeedback]=\"''\"\n            name=\"numberCard\"\n          ></sxf-textbox>\n        </div>\n        <!-- <input type=\"text\" class=\"form-control\" mask=\"M0/0000\"> -->\n        <div class=\"col-4\">\n          <sxf-textbox\n            type=\"text\"\n            formControlName=\"expirationdate\"\n            placeholder=\"MM/YYYY\"\n            [mask]=\"expirationDateMask\"\n            [helpFeedback]=\"''\"\n            name=\"expirationdateCard\"\n          ></sxf-textbox>\n        </div>\n      </div>\n    </div>\n    <div\n      [formGroup]=\"formDebit\"\n      *ngIf=\"newPaymentWay && activeTab === 'BankingDebt'\"\n    >\n      <div class=\"row pl-2\">\n        <div class=\"col-lg-4 px-0\">\n          <label>\n            CBU\n            <sup>*</sup>\n          </label>\n        </div>\n      </div>\n      <div class=\"row pl-2\">\n        <div class=\"col-lg-4 px-0\">\n          <sxf-textbox\n            type=\"text\"\n            formControlName=\"number\"\n            label=\"\"\n            placeholder=\"\"\n            [maxLength]=\"22\"\n            [minLength]=\"22\"\n            [helpFeedback]=\"''\"\n            placement=\"bottom\"\n            messageTooltips=\"\"\n            name=\"numberCBU\"\n          ></sxf-textbox>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-6 pl-0 mt-2\">\n      <!-- TODO: DG, checkbox de poliza digital, descomentar si deciden volver a ponerlo\n            <div class=\"form-checkbox\">\n            <input\n              type=\"checkbox\"\n              [checked]=\"digitalPolicy\"\n              (click)=\"sendDigitalPolicy()\"\n              class=\"form-checkbox-input\"\n              id=\"digitalPolicy\"\n            />\n            <label class=\"form-checkbox-label\" for=\"digitalPolicy\"></label>\n            <label class=\"label-checkbox\">\n              Póliza digital\n            </label>\n          </div>-->\n      <span class=\"info pl-2\">\n        Vamos a enviar la póliza digital por mail\n      </span>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { BaseComponent } from '@sura-platform/core';\n\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\n\nimport * as fromPolicy from '../../../../state/policy';\nimport * as fromPolicyActions from '../../../../state/policy/policy.actions';\nimport * as fromEmission from '../../state';\nimport { Store } from '@ngrx/store';\nimport {\n  PaymentMethodService,\n  AccountService,\n  IPolicy,\n  ICreditCard,\n  IPayment,\n  IPaymentPlan\n} from '@sura-platform/features';\nimport { Observable, of, EMPTY, Subscription, combineLatest } from 'rxjs';\nimport { switchMap, filter, catchError } from 'rxjs/operators';\nimport * as moment from 'moment';\nimport * as fromQuote from '../../../quote/state';\n\ninterface PaymentMethod {\n  code: number;\n  description: string;\n  discount: number;\n}\n\ninterface Bank {\n  code: number;\n  description: string;\n}\n\ninterface CardStored {\n  code: number;\n  name: string;\n  number: string;\n  bank: Bank;\n  expired: string;\n  security: string;\n}\n\n@Component({\n  selector: 'sxf-paymentmethod',\n  templateUrl: 'paymentmethod.component.html',\n  styleUrls: ['paymentmethod.component.scss']\n})\nexport class PaymentMethodComponent extends BaseComponent\n  implements OnInit, OnDestroy {\n  /**\n   * tab open by default\n   */\n  activeTab: string | null = '';\n\n  /**\n   * Array of payment methods\n   */\n  arrPaymentMethods: PaymentMethod[] = [];\n\n  /**\n   * form for debicard\n   */\n  formDebit: FormGroup = <FormGroup>{};\n\n  /**\n   * form for creditcard\n   */\n  formCredit: FormGroup = <FormGroup>{};\n\n  /**\n   * Array of cards stored\n   */\n  arrCardsStored: CardStored[] = [];\n\n  paymentInstruments$: Observable<any> = new Observable();\n\n  paymentMethods$: Observable<any> = new Observable();\n\n  payment: IPayment = <IPayment>{};\n\n  paymentTerm: IPaymentPlan = <IPaymentPlan>{};\n\n  activePaymentMethodId: string | null = '';\n\n  newPaymentWay = false;\n\n  digitalPolicy = true;\n\n  fromRetrieve = false;\n\n  approvedEmission = false;\n\n  currentPolicy: IPolicy = <IPolicy>{};\n\n  initSlice = 0;\n  endSlice = 2;\n\n  arrayCardsLength = 0;\n  arrayCbusLength = 0;\n\n  public expirationDateMask = [/[0-1]/, /[0-9]/, '/', /\\d/, /\\d/, /\\d/, /\\d/];\n  public numberMask = [\n    /\\d/,\n    /\\d/,\n    /\\d/,\n    /\\d/,\n    ' ',\n    /\\d/,\n    /\\d/,\n    /\\d/,\n    /\\d/,\n    ' ',\n    /\\d/,\n    /\\d/,\n    /\\d/,\n    /\\d/,\n    ' ',\n    /\\d/,\n    /\\d/,\n    /\\d/,\n    /\\d/\n  ];\n\n  disabledByRetrieve = false;\n  paymentSelectedByRetrieve = false;\n  currentServerDate = new Date();\n\n  disabledByRetrieveSubscription: Subscription = new Subscription();\n  serverDataSubscription: Subscription = new Subscription();\n  paymentDataSubscription: Subscription = new Subscription();\n  paymentTermSubscription: Subscription = new Subscription();\n  policyDataSubscription: Subscription = new Subscription();\n  creditCardSubscription: Subscription | undefined = new Subscription();\n  cardExpirationSubcription: Subscription | undefined = new Subscription();\n  debitCardSubscription: Subscription | undefined = new Subscription();\n  emissionStoreSubscription: Subscription = new Subscription();\n\n  constructor(\n    private fb: FormBuilder,\n    private storePolicy: Store<fromPolicy.State>,\n    private storeEmission: Store<fromEmission.State>,\n    private paymentMethodService: PaymentMethodService,\n    private paymentInstrument: AccountService,\n    private storeQuote: Store<fromQuote.State>\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.paymentDataSubscription = this.storePolicy\n      .select(fromPolicy.getPaymentData)\n      .subscribe((data) => {\n        this.payment = data;\n        this.activeTab = data.method;\n      });\n\n    this.paymentTermSubscription = this.storePolicy\n      .select(fromPolicy.getPaymentTerm)\n      .subscribe((data) => {\n        this.paymentTerm = data;\n        this.payment.plan.code = data.code;\n      });\n\n    this.policyDataSubscription = this.storePolicy\n      .select(fromPolicy.getPolicyData)\n      .subscribe((data) => {\n        this.currentPolicy = data;\n        if (data.email) {\n          this.digitalPolicy = true;\n        } else {\n          this.digitalPolicy = false;\n        }\n      });\n\n    this.serverDataSubscription = this.storeQuote\n      .select(fromQuote.getServerDate)\n      .subscribe((date) => {\n        this.currentServerDate = new Date(date as any);\n      });\n\n    this.paymentMethods$ = this.storePolicy.select(fromPolicy.getJob).pipe(\n      switchMap((x) => {\n        if (x) {\n          return this.paymentMethodService.getAllPaymentMethods(x).pipe(\n            switchMap((ps) => {\n              ps.map((hj) => {\n                //FIXME: MP, DG: Marcos, aqui setie esto hardcodeado, lo pidieron asi, pero hay que estar\n                //pendiente que a futuro lo incluyan en la API (el descuento para mostrar a modo informativo)\n                if (hj.code !== 'Coupon') {\n                  hj.legend = '10% de descuento';\n                }\n              });\n              return of(ps.filter((c) => c.code === this.payment.method));\n            })\n          );\n        } else {\n          return of(EMPTY);\n        }\n      })\n    );\n\n    this.paymentInstruments$ = this.storePolicy\n      .select(fromPolicy.getClientData)\n      .pipe(\n        switchMap((x) => {\n          if (x.accountnumber !== null) {\n            return this.paymentInstrument\n              .getPaymentInstruments(x.accountnumber)\n              .pipe(\n                filter((u) => u.length > 0),\n                switchMap((p) => {\n                  const hasPaymentInstrumentsForTabSet = p.filter(\n                    (o) => o.method === this.payment.method\n                  ).length;\n                  if (hasPaymentInstrumentsForTabSet < 1) {\n                    this.newPaymentWay = true;\n                  }\n                  return of(p.filter((o) => o.method === this.payment.method));\n                })\n              );\n          } else {\n            this.newPaymentWay = true;\n            return of(EMPTY);\n          }\n        }),\n        catchError(() => {\n          this.newPaymentWay = true;\n          return of(EMPTY);\n        })\n      );\n\n    this.formDebit = this.fb.group({\n      number: [, [Validators.required, Validators.minLength(22)]]\n    });\n\n    this.formCredit = this.fb.group({\n      //! 14 digits Diners\n      //! 15 digits AMEX\n      //! Others 16 Digits\n      number: [\n        ,\n        [\n          Validators.required,\n          Validators.minLength(14),\n          Validators.maxLength(16)\n        ]\n      ],\n      // expirationdate: [\n      //   ,\n      //   [Validators.required, Validators.pattern('^d{2}/d{4}$')]\n      // ],\n      expirationdate: [, [Validators.required, Validators.minLength(7)]],\n      owner: [, Validators.required]\n    });\n\n    this.creditCardSubscription = this.formCredit\n      .get('number')\n      ?.valueChanges.subscribe((data: string) => {\n        // TODO: Descomentar este codigo siguiente cuando ande la api creditcards..\n        if (data.length > 6) {\n          this.paymentMethodService\n            .getCreditCards(data.substring(0, 6))\n            .subscribe((cc: ICreditCard[]) => {\n              if (cc) {\n                this.payment.creditcard.type = cc[0].code;\n                this.storePolicy.dispatch(\n                  new fromPolicyActions.SetCurrentPaymentMethodAction(\n                    this.payment\n                  )\n                );\n              }\n            });\n        }\n        this.payment.creditcard.number = data;\n        this.storePolicy.dispatch(\n          new fromPolicyActions.SetCurrentPaymentMethodAction(this.payment)\n        );\n      });\n\n    this.cardExpirationSubcription = this.formCredit\n      .get('expirationdate')\n      ?.valueChanges.subscribe((data: string) => {\n        this.payment.creditcard.expirationdate = null;\n        if (data.length === 7) {\n          const _expirationDate = '01/' + data;\n          const dateServer = moment(this.currentServerDate).format(\n            'YYYY-MM-DD'\n          );\n          const dateCard = moment(_expirationDate, 'DD/MM/YYYY').format(\n            'YYYY-MM-DD'\n          );\n\n          /* Si la fecha del servidor es mayor a la fecha de la TDC, hago dispatch */\n          if (dateCard > dateServer) {\n            this.payment.creditcard.expirationdate = moment(\n              _expirationDate,\n              'DD/MM/YYYY'\n            ).toISOString();\n\n            this.storePolicy.dispatch(\n              new fromPolicyActions.SetCurrentPaymentMethodAction(this.payment)\n            );\n          } else {\n            this.payment.creditcard.expirationdate = null;\n            this.storePolicy.dispatch(\n              new fromPolicyActions.SetCurrentPaymentMethodAction(this.payment)\n            );\n          }\n        }\n      });\n\n    this.debitCardSubscription = this.formDebit\n      .get('number')\n      ?.valueChanges.subscribe((data: string) => {\n        this.payment.cbu.number = data;\n        this.payment.cbu.conduit = '17';\n        this.storePolicy.dispatch(\n          new fromPolicyActions.SetCurrentPaymentMethodAction(this.payment)\n        );\n      });\n\n    //TODO DG: hacer que este por defecto la que venga por API (segun US-1715)\n    // this.changeTab(this.arrPaymentMethods[0]);\n\n    this.disabledByRetrieveSubscription = combineLatest([\n      this.storeEmission.select(fromEmission.getJobNumber),\n      this.storePolicy.select(fromPolicy.getPolicyData)\n    ]).subscribe((x) => {\n      const job = x[0];\n      const policy = x[1];\n\n      // ML: Entra en esta sección si retrieve indica que fue seleccionado\n      // un método de pago\n      if (policy.payment.id && !this.paymentSelectedByRetrieve) {\n        if (policy.client.accountnumber !== null) {\n          this.paymentInstrument\n            .getPaymentInstruments(policy.client.accountnumber)\n            .subscribe((pi) => {\n              const payment = pi.find((p) => p.id === policy.payment.id);\n\n              if (payment) {\n                this.setPaymentMethod(payment, true);\n                this.paymentSelectedByRetrieve = true;\n              }\n            });\n        }\n      }\n      this.emissionStoreSubscription = this.storeEmission\n        .select(fromEmission.getEmission)\n        .subscribe((store) => {\n          this.fromRetrieve = store.jobNumberFromQuotes ? true : false;\n          this.approvedEmission = store.approvedEmission;\n        });\n      if (this.fromRetrieve) {\n        this.disabledByRetrieve =\n          this.approvedEmission && policy.payment.id ? true : false;\n      } else {\n        this.disabledByRetrieve = job && policy.payment.id ? true : false;\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.debitCardSubscription?.unsubscribe();\n    this.creditCardSubscription?.unsubscribe();\n    this.cardExpirationSubcription?.unsubscribe();\n    this.emissionStoreSubscription?.unsubscribe();\n    this.serverDataSubscription?.unsubscribe();\n    this.policyDataSubscription?.unsubscribe();\n    this.paymentDataSubscription?.unsubscribe();\n    this.paymentTermSubscription?.unsubscribe();\n    this.disabledByRetrieveSubscription?.unsubscribe();\n  }\n\n  changeTab(tab: any) {\n    //FIXME: MVP 1\n    return false;\n\n    this.initSlice = 0;\n    this.endSlice = 2;\n\n    this.activeTab = tab.code;\n    this.payment.method = tab.code;\n    if (tab.code === 'BankingDebt') {\n      this.newPaymentWay = true;\n    }\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetCurrentPaymentMethodAction(this.payment)\n    );\n  }\n\n  addNewPaymentWay() {\n    this.newPaymentWay = true;\n    this.activePaymentMethodId = null;\n    this.payment.id = null;\n    this.payment.creditcard.number = null;\n    this.payment.creditcard.type = null;\n    this.payment.creditcard.expirationdate = null;\n    this.payment.cbu.number = null;\n    this.formCredit?.get('expirationdate')?.setValue('');\n    this.formCredit?.get('number')?.setValue('');\n    this.formDebit?.get('number')?.setValue('');\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetCurrentPaymentMethodAction(this.payment)\n    );\n  }\n\n  setPaymentMethod(payment: any, selected?: boolean) {\n    if (this.disabledByRetrieve && !selected) return;\n\n    this.payment.plan.code = this.payment.plan.code || this.paymentTerm.code;\n    this.newPaymentWay = false;\n    this.activePaymentMethodId = payment.id;\n    this.payment.id = payment.id;\n    this.payment.cbu.number = null;\n    this.payment.creditcard.expirationdate = null;\n    this.payment.creditcard.number = null;\n    this.payment.creditcard.type = null;\n    switch (payment.method) {\n      case 'CreditCard':\n        const type = payment.displayname\n          .substring(0, payment.displayname.indexOf('('))\n          .replace(' ', '');\n        const number = payment.displayname.substring(\n          payment.displayname.lastIndexOf('(') + 1,\n          payment.displayname.lastIndexOf(')')\n        );\n        const expirationCard = payment.displayname.substring(\n          payment.displayname.length - 10\n        );\n        // const yearExpiration = expirationCard.substring(expirationCard.length - 4);\n        // const monthExpiration =\n\n        this.payment.creditcard.number = number;\n        this.payment.creditcard.expirationdate = moment(\n          expirationCard,\n          'DD/MM/YYYY'\n        ).toISOString();\n        this.payment.creditcard.type = type.toString().toLowerCase().trim();\n        break;\n      case 'BankingDebt':\n        const cbuNumber = payment.displayname.substring(\n          payment.displayname.lastIndexOf('(') + 1,\n          payment.displayname.lastIndexOf(')')\n        );\n        this.payment.cbu.number = cbuNumber;\n        break;\n      default:\n        break;\n    }\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetCurrentPaymentMethodAction(this.payment)\n    );\n  }\n\n  sendDigitalPolicy() {\n    this.digitalPolicy = !this.digitalPolicy;\n    if (this.digitalPolicy) {\n      if (this.currentPolicy.client.email !== null) {\n        this.storePolicy.dispatch(\n          new fromPolicyActions.SetMailDataAction(\n            this.currentPolicy.client.email\n          )\n        );\n      } else {\n      }\n    } else {\n      this.storePolicy.dispatch(new fromPolicyActions.SetMailDataAction(null));\n    }\n  }\n\n  /**\n   * Return name of card from this template 'Visa (4551970002062213) - H - 05/08/2020'\n   */\n  getCardImg(value: string) {\n    const regex = /([^\\(]+)/;\n    const match = regex.exec(value);\n    if (match !== null) {\n      return match[1].trim().replace(' ', '').toUpperCase();\n    } else {\n      return null;\n    }\n  }\n\n  paginateCbus(array: Array<any>) {\n    this.arrayCbusLength = array.length;\n    const _array = array.slice(this.initSlice, this.endSlice);\n    return _array;\n  }\n\n  paginateCreditCards(array: Array<any>) {\n    this.arrayCardsLength = array.length;\n    const _array = array.slice(this.initSlice, this.endSlice);\n    return _array;\n  }\n\n  nextPaginate(lengthArray: number) {\n    if (this.endSlice < lengthArray) {\n      this.initSlice += 2;\n      this.endSlice += 2;\n    }\n  }\n\n  previousPaginate() {\n    if (this.initSlice >= 2) {\n      this.initSlice -= 2;\n      this.endSlice -= 2;\n    }\n  }\n\n  cardNotExists(event: Event): void {\n    const img: HTMLImageElement = <HTMLImageElement>event.target;\n    img.src = '/assets/icons/GENERAL_TARJETA.svg';\n    img.height = 25;\n  }\n}\n","<div [formGroup]=\"form\" class=\"col-lg-12\">\n  <div class=\"row\">\n    <div class=\"col-lg-4 pl-0\">\n      <label>\n        Documento\n        <sup>*</sup>\n      </label>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-lg-6 input-group pl-0\">\n      <sxf-select\n        #documentType\n        style=\"width: 100px;\"\n        formControlName=\"document\"\n        [items]=\"documents$\"\n        bindLabel=\"description\"\n        bindValue=\"code\"\n        [multiple]=\"false\"\n        class=\"custom\"\n        [searchable]=\"false\"\n        placeholder=\"Documento...\"\n        [dropdownPosition]=\"'bottom'\"\n        name=\"documentClientEmission\"\n        [disabled]=\"disabledByRetrieve\"\n      ></sxf-select>\n      <sxf-textbox\n        type=\"text\"\n        formControlName=\"documentNumber\"\n        (keyup.enter)=\"validateDocumentNumber()\"\n        label=\"\"\n        placeholder=\"\"\n        [helpFeedback]=\"''\"\n        placement=\"bottom\"\n        [maxLength]=\"maxLength\"\n        messageTooltips=\"Ingresá los {{\n          maxLength !== 0 ? maxLength : ''\n        }} dígitos del {{ documentDescription }}\"\n        name=\"documentNumberClientEmission\"\n        [disabled]=\"disabledByRetrieve\"\n      ></sxf-textbox>\n      <br />\n    </div>\n    <div class=\"col-lg-3\">\n      <!-- <span *ngIf=\"!loadingData\"> -->\n      <button\n        [disabled]=\"\n          !form.valid || isLegalPerson !== 'undefined' || disabledByRetrieve\n        \"\n        (click)=\"validateDocumentNumber()\"\n        class=\"btn btn-primary btn-block\"\n        name=\"validateDocumentNumberBtn\"\n      >\n        <ng-lottie\n          [hidden]=\"!loadingData\"\n          [options]=\"lottieConfig\"\n          (animationCreated)=\"animationCreated($event)\"\n          height=\"24px\"\n          width=\"24px\"\n        ></ng-lottie>\n        {{ buttonLabel }}\n        <!-- Validar -->\n      </button>\n      <!-- </span>\n      <span *ngIf=\"loadingData\">\n        <button disabled class=\"btn btn-primary\">\n          Validando...\n        </button>\n      </span> -->\n      <div class=\"press-enter ml-3 mr-4\">\n        o presiona ENTER\n      </div>\n    </div>\n    <div class=\"col-lg-3\">\n      <span\n        class=\"question-class\"\n        (click)=\"openModal()\"\n        style=\"cursor: pointer;\"\n      >\n        <b>¿Los datos no coinciden?</b>\n      </span>\n    </div>\n  </div>\n</div>\n<div *ngIf=\"(searchClient$ | async) || (client$ | async)\">\n  <input type=\"hidden\" *ngIf=\"clientBaseN$ | async\" />\n  <!-- Formulario Persona Fisica -->\n\n  <div\n    [formGroup]=\"formPhysicalPerson\"\n    class=\"col-12\"\n    *ngIf=\"\n      !loadingData && isLegalPerson !== 'undefined' && isLegalPerson === 'not'\n    \"\n  >\n    <div class=\"row\">\n      <div class=\"col-lg-4 pl-0\">\n        <label>\n          Nombre\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\">\n        <label>\n          Apellido\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\">\n        <label>\n          Fecha de Nacimiento\n          <sup>*</sup>\n        </label>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-4 pl-0\">\n        <sxf-textbox\n          type=\"text\"\n          [disabled]=\"(clientFromEmission$ | async)?.firstname\"\n          formControlName=\"firstname\"\n          label=\"\"\n          placeholder=\"Ingresá el nombre\"\n          [helpFeedback]=\"\"\n          maxlength=\"100\"\n          placement=\"bottom\"\n          [value]=\"(client$ | async)?.firstname\"\n          name=\"firstnameClientEmission\"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-4\">\n        <sxf-textbox\n          type=\"text\"\n          [disabled]=\"(clientFromEmission$ | async)?.lastname\"\n          formControlName=\"lastname\"\n          maxlength=\"100\"\n          label=\"\"\n          placeholder=\"Ingresá el apellido\"\n          [helpFeedback]=\"\"\n          placement=\"bottom\"\n          name=\"lastnameClientEmission\"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-4\">\n        <sxf-datetimepicker\n          [disabled]=\"(clientFromEmission$ | async)?.birth\"\n          formControlName=\"birth\"\n          navigation=\"select\"\n          [minDate]=\"minDateClient\"\n          [maxDate]=\"maxDateClient\"\n          [helpFeedback]=\"\"\n          name=\"birthClientEmission\"\n        ></sxf-datetimepicker>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-lg-4 pl-0\">\n        <label>\n          Nacionalidad\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\">\n        <label>\n          Estado Civil\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\">\n        <label>\n          Sexo\n          <sup>*</sup>\n        </label>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-4 pl-0\">\n        <sxf-select\n          [disabled]=\"(clientFromEmission$ | async)?.nationality\"\n          formControlName=\"nationality\"\n          [items]=\"nationalities$\"\n          bindLabel=\"description\"\n          bindValue=\"code\"\n          [multiple]=\"false\"\n          [helpFeedback]=\"\"\n          class=\"custom\"\n          [searchable]=\"true\"\n          placeholder=\"Nacionalidad\"\n          [dropdownPosition]=\"'bottom'\"\n          name=\"nationalityClientEmission\"\n        ></sxf-select>\n      </div>\n      <div class=\"col-4\">\n        <sxf-select\n          [disabled]=\"(clientFromEmission$ | async)?.maritalstatus\"\n          formControlName=\"maritalstatus\"\n          [items]=\"maritalStatus$\"\n          bindLabel=\"description\"\n          bindValue=\"code\"\n          [multiple]=\"false\"\n          [helpFeedback]=\"\"\n          class=\"custom\"\n          [searchable]=\"true\"\n          placeholder=\"Estado Civil\"\n          [dropdownPosition]=\"'bottom'\"\n          name=\"maritalstatusClientEmission\"\n        ></sxf-select>\n      </div>\n      <div class=\"col-4\">\n        <sxf-select\n          [disabled]=\"(clientFromEmission$ | async)?.gender\"\n          formControlName=\"gender\"\n          [items]=\"genders$\"\n          bindLabel=\"description\"\n          bindValue=\"code\"\n          [multiple]=\"false\"\n          [helpFeedback]=\"\"\n          class=\"custom\"\n          [searchable]=\"true\"\n          placeholder=\"Sexo\"\n          [dropdownPosition]=\"'bottom'\"\n          name=\"genderClientEmission\"\n        ></sxf-select>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-lg-1 pl-0\">\n        <label>\n          Cód. Área\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-3\">\n        <label>\n          Teléfono\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\">\n        <label>\n          Mail\n          <sup>*</sup>\n        </label>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-1 pl-0 pr-0\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"prefix\"\n          [maxLength]=\"5\"\n          [minLength]=\"2\"\n          placeholder=\"Cód. Área\"\n          [helpFeedback]=\"\n            formPhysicalPerson.controls['prefix'].disabled\n              ? 'No es modificable'\n              : ''\n          \"\n          name=\"prefixClientEmission\"\n          [disabled]=\"\n            (clientFromEmission$ | async)?.cellphone?.area && disabledByRetrieve\n          \"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-3\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"phone\"\n          label=\"\"\n          placeholder=\"Teléfono\"\n          [minLength]=\"6\"\n          [maxLength]=\"8\"\n          [helpFeedback]=\"\n            formPhysicalPerson.controls['phone'].disabled\n              ? 'No es modificable'\n              : ''\n          \"\n          name=\"phoneClientEmission\"\n          [disabled]=\"\n            (clientFromEmission$ | async)?.cellphone?.number &&\n            disabledByRetrieve\n          \"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-4\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"email\"\n          label=\"\"\n          placeholder=\"Ingresá el email\"\n          [maxLength]=\"60\"\n          [helpFeedback]=\"\n            formPhysicalPerson.controls['email'].disabled\n              ? 'No es modificable'\n              : ''\n          \"\n          name=\"emailClientEmission\"\n          [disabled]=\"\n            (clientFromEmission$ | async)?.email && disabledByRetrieve\n          \"\n        ></sxf-textbox>\n        <span\n          *ngIf=\"\n            (formPhysicalPerson.controls.email.dirty ||\n              formPhysicalPerson.controls.email.touched) &&\n            !formPhysicalPerson.controls.email.errors\n          \"\n          class=\"text-danger\"\n        >\n          <b>Este email será usado para enviar la inspección por photo up</b>\n        </span>\n      </div>\n      <div class=\"col-4\">\n        <div class=\"form-checkbox\" id=\"containerExposedPerson\">\n          <span\n            placement=\"bottom\"\n            ngbTooltip=\"Funcionarios públicos nacionales, provinciales o municipales que ocupan u ocuparon altos cargos, puestos jerárquicos, como así también sus familiares\"\n          >\n            <input\n              type=\"checkbox\"\n              formControlName=\"exposedPerson\"\n              class=\"form-checkbox-input\"\n              id=\"exposedPerson\"\n              name=\"exposedPersonClientEmission\"\n              messageTooltips=\"Funcionarios públicos nacionales, provinciales o municipales que ocupan u ocuparon altos cargos, puestos jerárquicos, como así también sus familiares\"\n            />\n            <label class=\"form-checkbox-label\" for=\"exposedPerson\"></label>\n            <label class=\"label-checkbox\">\n              Persona politicamente expuesta\n            </label>\n          </span>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-lg-8 pl-0\">\n        <span>\n          <button\n            [disabled]=\"!formPhysicalPerson.valid\"\n            class=\"btn btn-primary btn-heft\"\n            (click)=\"continue()\"\n            name=\"continueDataClientEmisionBtn\"\n          >\n            Continuar\n          </button>\n        </span>\n      </div>\n    </div>\n  </div>\n  <!-- Formulario Persona Juridica -->\n  <div\n    [formGroup]=\"formLegalPerson\"\n    class=\"col-12\"\n    *ngIf=\"\n      !loadingData && isLegalPerson !== 'undefined' && isLegalPerson === 'yes'\n    \"\n  >\n    <div class=\"row\">\n      <div class=\"col-lg-4 pl-0\">\n        <label>\n          Razon Social\n          <sup>*</sup>\n        </label>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-4 pl-0\">\n        <sxf-textbox\n          type=\"text\"\n          [value]=\"(client$ | async)?.companyname\"\n          formControlName=\"companyname\"\n          [disabled]=\"(clientFromEmission$ | async)?.companyname\"\n          label=\"\"\n          placeholder=\"Ingresá el nombre\"\n          [maxLength]=\"255\"\n          [helpFeedback]=\"\"\n          placement=\"bottom\"\n          messageTooltips=\"Ingresá solo carácteres alfanumericos\"\n          name=\"companynameClientEmission\"\n        ></sxf-textbox>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-lg-1 pl-0\">\n        <label>\n          Cód. Área\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-3\">\n        <label>\n          Teléfono\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\">\n        <label>\n          Mail\n          <sup>*</sup>\n        </label>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-1 pl-0 pr-0\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"prefix\"\n          label=\"\"\n          [maxLength]=\"5\"\n          [minLength]=\"2\"\n          placeholder=\"Cód. Área\"\n          [helpFeedback]=\"''\"\n          name=\"prefixClientEmission\"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-3\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"phone\"\n          label=\"\"\n          placeholder=\"Teléfono\"\n          [minLength]=\"6\"\n          [maxLength]=\"8\"\n          [helpFeedback]=\"''\"\n          name=\"phoneClientEmission\"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-4\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"email\"\n          label=\"\"\n          placeholder=\"Ingresá el email\"\n          [maxLength]=\"60\"\n          [helpFeedback]=\"''\"\n          name=\"emailClientEmission\"\n        ></sxf-textbox>\n        <span\n          *ngIf=\"\n            (formLegalPerson.controls.email.dirty ||\n              formLegalPerson.controls.email.touched) &&\n            !formLegalPerson.controls.email.errors\n          \"\n          class=\"text-danger\"\n        >\n          <b>Este email será usado para enviar la inspección por photo up</b>\n        </span>\n      </div>\n    </div>\n    <div class=\"row\" style=\"display: none;\">\n      <div class=\"col-lg-4\"></div>\n      <div class=\"col-lg-4\"></div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <div class=\"form-checkbox\">\n          <input\n            type=\"checkbox\"\n            id=\"officialorganism\"\n            class=\"form-checkbox-input\"\n            formControlName=\"officialorganism\"\n            name=\"officialorganismClientEmission\"\n          />\n          <label class=\"form-checkbox-label\" for=\"officialorganism\"></label>\n          <label>\n            Organismo social\n          </label>\n        </div>\n      </div>\n      <div class=\"col-4\">\n        <div class=\"form-checkbox\">\n          <input\n            type=\"checkbox\"\n            id=\"consortium\"\n            formControlName=\"consortium\"\n            class=\"form-checkbox-input\"\n            name=\"consortiumClientEmission\"\n          />\n          <label class=\"form-checkbox-label\" for=\"consortium\"></label>\n          <label>\n            Consorcio\n          </label>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"row mt-3\">\n      <div class=\"col-lg-8 pl-0\">\n        <span>\n          <button\n            [disabled]=\"!formLegalPerson.valid\"\n            class=\"btn btn-primary btn-heft\"\n            (click)=\"continue()\"\n            name=\"continueClientEmissionBtn\"\n          >\n            Continuar\n          </button>\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<sxf-modal #modalClient>\n  <div class=\"modal-header modal-header-items\">\n    <!-- <h4 class=\"modal-title\" id=\"modal-basic-title\">¿Los datos no coinciden?</h4> -->\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"closeModal()\"\n      name=\"closeModalBtn\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body modal-body-items\">\n    <h3>¿Los datos no coinciden?</h3>\n    <p>\n      Si el número de {{ documentDescription }} no coincide con los datos de\n      nombre y apellido verificá que no haya errores de tipeo. Si el error\n      persiste, por favor comunicate con tu ejecutivo de cuenta.\n    </p>\n  </div>\n\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-8 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"closeModal()\"\n          name=\"closeModalBtn\"\n        >\n          Volver\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n\n<sxf-modal #modalNoClient>\n  <div class=\"modal-header modal-header-items\">\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">Cliente existente</h4>\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"closeModalNoClient()\"\n      name=\"closeModalBtn\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body modal-body-items\">\n    <h3>Este cliente pertenece a otro productor</h3>\n    <p>\n      Pertenece a otra organización comercial deberá comunicarse con su\n      ejecutivo de cuenta para poder avanzar con esta solicitud.\n    </p>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-8 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"closeModalNoClient()\"\n          name=\"closeModalBtn\"\n        >\n          Volver\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n\n<sxf-modal #modalUW (closed)=\"closeUWModal()\">\n  <div class=\"modal-header\" style=\"padding: 1rem 2rem;\">\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"closeUWModal('Cross click')\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <h4>\n      La presente emisión va a requerir autorización de la compañía.\n    </h4>\n    <h4>¿Desea solicitar autorización?</h4>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-3 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-modal btn-lg btn-block\"\n          (click)=\"closeUWModal()\"\n        >\n          Cancelar\n        </button>\n      </div>\n      <div class=\"col-lg-5 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"closeUWModal('continue')\"\n        >\n          Continuar\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n<sxf-modal #modalMobility [options]=\"{ size: 'lg' }\">\n  <div class=\"modal-header\">\n    <h6 class=\"modal-title\" id=\"modal-basic-title\">\n      Movilidad Sura\n    </h6>\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"closeModalMobility()\"\n      [disabled]=\"loadingCosts\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <h3>Movilidad Sura sólo está disponible para personas físicas.</h3>\n    <h6>\n      Si tu cliente es Jurídico debemos cancelar este producto y realizar una\n      recotización\n    </h6>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-2 offset-lg-4 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-modal btn-lg btn-block\"\n          (click)=\"closeModalMobility()\"\n        >\n          Cancelar\n        </button>\n      </div>\n      <div class=\"col-lg-6 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary\"\n          (click)=\"continueIsLegalPerson()\"\n        >\n          <span *ngIf=\"!loadingCosts\">Recotizar como Persona Jurídica</span>\n          <!-- <span *ngIf=\"loadingCosts\">Recotizando</span> -->\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n\n<sxf-modal #newCosts [options]=\"{ backdrop: 'static', keyboard: false }\">\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">\n      Recotizando\n    </h4>\n  </div>\n  <div class=\"modal-body modal-body-items\">\n    <p *ngIf=\"!loadingCosts; else stillLoadingCost\">\n      Recotizamos sin el seguro de Movilidad, el nuevo valor de la cuota es de\n      <b>$ {{ newQuote | number: '1.0-0' }}</b>\n\n      <br />\n      Para mas detalle revisar el detalle del menú lateral.\n    </p>\n    <ng-template #stillLoadingCost>\n      <div class=\"row\">\n        <div class=\"col-12 text-center\">\n          <ng-lottie\n            [options]=\"suraLoaderConfig\"\n            width=\"8.75rem\"\n            height=\"6.25rem\"\n          ></ng-lottie>\n        </div>\n      </div>\n    </ng-template>\n  </div>\n\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-8 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"closeModalNewCosts()\"\n          [disabled]=\"loadingCosts\"\n          name=\"closeModalNewCostsBtn\"\n        >\n          Aceptar\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n","import cloneDeep from 'lodash/cloneDeep';\nimport { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Observable, Subscription, of, combineLatest, EMPTY } from 'rxjs';\nimport {\n  IGender,\n  GenderService,\n  IDocument,\n  IdentificationService,\n  ICrudIncome,\n  AccountService,\n  IAccount,\n  INationality,\n  NationalityService,\n  IAddress,\n  IPolicy,\n  IVehicle,\n  IMaritalStatus,\n  MaritalStatusService,\n  ClienteNService,\n  IClienteN,\n  UtilService,\n  ContactsService,\n  IOfficialIds,\n  IProvince,\n  ProvinceService,\n  QuotingService,\n  IPackage\n} from '@sura-platform/features';\n\nimport { PolicyAdapter } from '../../../quoting/adapters/policy.adapter';\nimport { FlowRouteEmissionService } from '../../../quoting/components/emission/services/flow-route-emission.service';\nimport * as fromEmission from '../../../quoting/components/emission/state';\nimport * as fromEmissionActions from '../../../quoting/components/emission/state/emission.actions';\n\nimport { IRoutes } from '@sura-platform/web/core/models/question/routes.interface';\nimport { Store } from '@ngrx/store';\n\nimport * as fromPolicy from '../../../quoting/state/policy/index';\nimport * as fromQuote from '../../../quoting/components/quote/state';\nimport * as fromPolicyActions from '../../../quoting/state/policy/policy.actions';\nimport * as fromQuoteActions from '../../../quoting/components/quote/state/quote.actions';\nimport { ModalComponent, SelectComponent } from '@sura-platform/web';\nimport { switchMap, catchError, tap, share } from 'rxjs/operators';\nimport { ApplicationError } from '@sura-platform/core/error/errors';\nimport * as moment from 'moment';\nimport { isNullOrUndefined } from '@swimlane/ngx-datatable';\n//import { IFault } from '@sura-platform/core/error/error.interface';\nimport { AnimationOptions } from 'ngx-lottie';\nimport { AnimationItem } from 'lottie-web';\nimport { ActivatedRoute } from '@angular/router';\nimport { IMotorConfiguration } from '../../../quoting/components/motor/motor.config';\nimport { IPremium } from '@sura-platform/features/package/interfaces/premium.interface';\nimport { ICoverage } from '@sura-platform/features/coverage';\n\n@Component({\n  selector: 'sxf-client-data',\n  templateUrl: './client-data.component.html',\n  styleUrls: ['./client-data.component.scss']\n})\nexport class ClientDataComponent implements OnInit, OnDestroy {\n  lottieConfig: AnimationOptions = {\n    path: '/assets/loadings/data-validation-loader.json',\n    loop: false,\n    autoplay: false\n  };\n\n  suraLoaderConfig: AnimationOptions = {\n    path: '/assets/loadings/sura-loader.json'\n  };\n\n  buttonLabel = 'Validar';\n  buttonAnimated: any;\n\n  constructor(\n    private fb: FormBuilder,\n    private genderService: GenderService,\n    private identificationService: IdentificationService,\n    private flowRouteEmissionService: FlowRouteEmissionService,\n    private storeEmission: Store<fromEmission.State>,\n    private accountService: AccountService,\n    private storePolicy: Store<fromPolicy.State>,\n    private storeQuote: Store<fromQuote.State>,\n    private nationalityService: NationalityService,\n    private maritalStatusService: MaritalStatusService,\n    private _clientNService: ClienteNService,\n    private utilService: UtilService,\n    private contactService: ContactsService,\n    private provinceService: ProvinceService,\n    private route: ActivatedRoute,\n    private policyAdapter: PolicyAdapter,\n    private quotingService: QuotingService\n  ) {\n    this.motorConfig = this.route.snapshot.data.config;\n  }\n\n  @ViewChild('documentType') documentSelect: SelectComponent = <\n    SelectComponent\n  >{};\n\n  @ViewChild('modalClient', { static: true }) modalClient: ModalComponent = <\n    ModalComponent\n  >{};\n\n  @ViewChild('modalNoClient', { static: true })\n  modalNoClient: ModalComponent = <ModalComponent>{};\n\n  @ViewChild('modalUW', { static: true }) modalUW: ModalComponent = <\n    ModalComponent\n  >{};\n\n  @ViewChild('modalMobility') modalMobility: ModalComponent = <\n    ModalComponent\n  >{};\n\n  @ViewChild('newCosts') modalNewCosts: ModalComponent = <ModalComponent>{};\n  //@ViewChild('content', { static: false }) content: ElementRef;\n\n  routes: IRoutes[] = <IRoutes[]>[];\n\n  accounts: IAccount = <IAccount>{};\n\n  /**\n   * Disabled fields for US-5573\n   */\n  disabledFields = false;\n\n  /**\n   * Variable Fiscal condition for get data from api\n   */\n  fiscalConditions$: Subscription = new Subscription();\n\n  /**\n   * Variable Crud income for get data from api\n   */\n  iibb$: Observable<ICrudIncome[]> = new Observable();\n\n  isValidateDocument = false;\n\n  client$: Observable<any> = new Observable();\n\n  clientFromEmission$: Observable<IAccount> = new Observable();\n\n  searchClient$: Observable<any> = new Observable();\n\n  isLegalPerson = 'undefined';\n\n  form: FormGroup = <FormGroup>{};\n\n  loadingData = false;\n\n  formPhysicalPerson: FormGroup = <FormGroup>{};\n\n  formLegalPerson: FormGroup = <FormGroup>{};\n\n  genders$: Observable<IGender[]> = new Observable();\n\n  maritalStatus$: Observable<IMaritalStatus[]> = new Observable();\n\n  documents$: Observable<IDocument[]> = new Observable();\n\n  nationalities$: Observable<INationality[]> = new Observable();\n\n  disabledByRetrieve$: Subscription = new Subscription();\n  disabledByRetrieve: boolean;\n\n  maxLength = 8;\n  documentDescription = 'DNI';\n\n  currentAccount: IAccount = <IAccount>{};\n\n  currentPolicy: IPolicy = <IPolicy>{};\n  currentMotor: IVehicle = <IVehicle>{};\n  vehicles: IVehicle[] = <IVehicle[]>[];\n  showForms = false;\n  currentData: any;\n  currentAccountEmission: any;\n  clientBaseN$: Observable<IClienteN[]> = new Observable();\n  accountReset: IAccount = <IAccount>{};\n  accountResetSubscription: Subscription = new Subscription();\n\n  provincesFromApi: IProvince[] = <IProvince[]>[];\n\n  resetResidenceValues: IAddress = {\n    state: null,\n    id: null,\n    city: null,\n    postalcode: null,\n    street: null,\n    streetnumber: null,\n    apartment: null,\n    floor: null,\n    type: null,\n    clarification: null\n  };\n\n  currentBlackList = false;\n\n  maxDateClient: any;\n  minDateClient: any;\n  motorConfig: IMotorConfiguration[];\n\n  /**\n   * True whether policy has mobility active\n   *\n   * @memberof ClientDataComponent\n   */\n  hasMobility = false;\n\n  MOBILITY_CODE = 'SURA_CA7_MobilityTheftDamageCov';\n\n  /**\n   * True whether call costs endpoint, recotización\n   *\n   * @memberof ClientDataComponent\n   */\n  loadingCosts = false;\n  newQuote = '';\n\n  callCostsSubscription: Subscription = new Subscription();\n\n  ngOnInit() {\n    this.provinceService\n      .getAllProvinces()\n      .subscribe((provs) => (this.provincesFromApi = provs));\n\n    this.utilService.getCurrentServerDate().subscribe((data) => {\n      const currentDate = new Date(data.datetime); // moment().add(9, 'month');\n      const currentDateForMinDateTime = new Date(data.datetime);\n      const date = {\n        year: currentDate.getFullYear() - 16,\n        month: currentDate.getMonth() + 1,\n        day: currentDate.getDate()\n      };\n      this.maxDateClient = date;\n\n      const minDateTime = {\n        year: currentDateForMinDateTime.getFullYear() - 116,\n        month: currentDateForMinDateTime.getMonth() + 1,\n        day: currentDateForMinDateTime.getDate()\n      };\n\n      this.minDateClient = minDateTime;\n    });\n    this.accountResetSubscription = this.storeQuote\n      .select(fromPolicy.getInitialAccountState)\n      .subscribe((initState) => {\n        this.accountReset = initState;\n      });\n\n    this.genders$ = this.genderService.getGenders();\n\n    this.maritalStatus$ = this.maritalStatusService.getMaritalStatus();\n\n    combineLatest([\n      this.storePolicy.select(fromPolicy.getPolicyData),\n      this.storeQuote.select(fromQuote.getQuoteMotorData)\n    ]).subscribe((data) => {\n      this.currentPolicy = data[0];\n      this.currentMotor = data[0].motor.vehicles.filter(\n        (c) => c.number === data[1].activeMotor\n      )[0];\n      this.vehicles = data[0].motor.vehicles;\n\n      // Se busca si algún vehículo tiene movilidad\n      this.vehicles.some((v) => {\n        const currentPkg = v?.packages?.find((p) => p.selected);\n\n        this.hasMobility = <boolean>(\n          currentPkg?.coverages?.some(\n            (c) => c.pattern.code === this.MOBILITY_CODE\n          )\n        );\n\n        // Si al menos un vehiculo tiene movilidad se sale\n        if (this.hasMobility) {\n          return true;\n        }\n      });\n    });\n\n    this.form = this.fb.group({\n      document: [\n        !this.currentPolicy.client.documentType\n          ? 'SSN'\n          : this.currentPolicy.client.documentType,\n        Validators.required\n      ],\n      documentNumber: [\n        this.currentPolicy.client.documentNumber,\n        [\n          Validators.required,\n          Validators.pattern('^[0-9]+$'),\n          Validators.minLength(8)\n        ]\n      ]\n    });\n\n    this.documents$ = this.identificationService.getDocumentTypes();\n\n    this.nationalities$ = this.nationalityService.getNationalities().pipe(\n      switchMap((x) => {\n        const nationatiliesFromServer = [];\n        const argentino = x.filter((g) => g.description === 'Argentino(a)')[0];\n\n        nationatiliesFromServer.push(argentino);\n\n        x.filter((j) => j.code !== 'N010').forEach((f) => {\n          nationatiliesFromServer.push(f);\n        });\n\n        return of(nationatiliesFromServer);\n      })\n    );\n\n    this.storeEmission.select(fromEmission.getRoutes).subscribe((data) => {\n      this.routes = data;\n    });\n\n    this.formPhysicalPerson = this.fb.group({\n      firstname: [\n        ,\n        [\n          Validators.required,\n          Validators.pattern('[A-zÀ-ÿ ]*'),\n          Validators.maxLength(100)\n        ]\n      ],\n      lastname: [\n        ,\n        [\n          Validators.required,\n          Validators.pattern('[A-zÀ-ÿ ]*'),\n          Validators.maxLength(100)\n        ]\n      ],\n      birth: [, Validators.required],\n      nationality: [, Validators.required],\n      maritalstatus: [, Validators.required],\n      gender: [, Validators.required],\n      prefix: [\n        ,\n        [\n          Validators.required,\n          Validators.minLength(2),\n          Validators.maxLength(5),\n          Validators.pattern(/^\\d+$/)\n        ]\n      ],\n      phone: [\n        ,\n        [\n          Validators.required,\n          Validators.minLength(6),\n          Validators.maxLength(8),\n          Validators.pattern(/^-?(0|[1-9]\\d*)?$/)\n        ]\n      ],\n      email: [\n        '',\n        [\n          Validators.required,\n          Validators.pattern(\n            '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$'\n          ),\n          Validators.maxLength(60)\n        ]\n      ],\n      exposedPerson: [false]\n    });\n\n    this.formPhysicalPerson\n      .get('birth')\n      ?.valueChanges.pipe(\n        switchMap((x) => {\n          const _birthDate = moment(x).subtract(1, 'months');\n          return of(_birthDate);\n        })\n      )\n      .subscribe();\n\n    this.formLegalPerson = this.fb.group({\n      companyname: [, [Validators.required, Validators.maxLength(255)]],\n      consortium: [],\n      officialorganism: [],\n      prefix: [\n        ,\n        [\n          Validators.required,\n          Validators.minLength(2),\n          Validators.maxLength(5),\n          Validators.pattern(/^\\d+$/)\n        ]\n      ],\n      phone: [\n        ,\n        [\n          Validators.required,\n          Validators.minLength(6),\n          Validators.maxLength(8),\n          Validators.pattern(/^-?(0|[1-9]\\d*)?$/)\n        ]\n      ],\n      email: [\n        ,\n        [\n          Validators.required,\n          Validators.pattern(\n            '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$'\n          )\n        ]\n      ]\n    });\n\n    this.client$ = this.storePolicy.select(fromPolicy.getClientData).pipe(\n      switchMap((x: IAccount) => {\n        this.currentAccount = x;\n        // Si es persona fisica\n        if (x.type === 'Person') {\n          this.isLegalPerson = 'not';\n          this.form.patchValue(\n            {\n              document:\n                x.documentType === null\n                  ? this.form.get('document')?.value\n                  : x.documentType,\n              documentNumber:\n                x.documentNumber === null\n                  ? this.form.get('documentNumber')?.value\n                  : x.documentNumber\n            },\n            { emitEvent: false }\n          );\n\n          this.formPhysicalPerson.patchValue({\n            firstname: x.firstname?.toUpperCase(),\n            lastname: x.lastname?.toUpperCase(),\n            birth: !isNullOrUndefined(x.birth)\n              ? {\n                  year: parseInt(x.birth.substring(0, 4), 0),\n                  month: parseInt(x.birth.substring(5, 7), 0),\n                  day: parseInt(x.birth.substring(8, 10), 0)\n                }\n              : null,\n            nationality: x.nationality,\n            maritalstatus: x.maritalstatus,\n            gender: x.gender,\n            prefix: !isNullOrUndefined(x.cellphone) ? x.cellphone.area : [],\n            phone: !isNullOrUndefined(x.cellphone) ? x.cellphone.number : [],\n            email: x.email,\n            exposedPerson: x.politicallyexposed\n          });\n        } else if (x.type === 'Company') {\n          this.isLegalPerson = 'yes';\n          this.openModalMobility();\n          this.form.patchValue(\n            {\n              document: x.documentType,\n              documentNumber: x.documentNumber\n            },\n            { emitEvent: false }\n          );\n          this.form.updateValueAndValidity();\n          this.formLegalPerson.patchValue({\n            companyname: x.companyname?.toUpperCase(),\n            consortium: x.consortium,\n            prefix: x.workphone?.area,\n            phone: x.workphone?.number,\n            officialorganism: x.officialorganism,\n            email: x.email\n          });\n        }\n        return of(x);\n      }),\n      share()\n    );\n\n    this.clientFromEmission$ = this.storeEmission.select(\n      fromEmission.getClientData\n    );\n\n    this.form.get('documentNumber')?.valueChanges.subscribe(() => {\n      this.formPhysicalPerson.reset();\n      this.formLegalPerson.reset();\n      this.isLegalPerson = 'undefined';\n      this.currentBlackList = false;\n    });\n\n    this.form.get('document')?.valueChanges.subscribe((data: any) => {\n      this.maxLength = 11;\n      switch (data) {\n        case 'SSN':\n          this.maxLength = 8;\n          this.documentDescription = 'DNI';\n          break;\n        case 'FEIN':\n          this.maxLength = 11;\n          this.documentDescription = 'CUIT';\n          break;\n        case 'CUILSura':\n          this.maxLength = 11;\n          this.documentDescription = 'CUIL';\n          break;\n        case 'PassportSura':\n          this.documentDescription = 'Pasaporte';\n          //this.maxLength = 0;\n          break;\n      }\n      this.formPhysicalPerson.reset();\n      this.formLegalPerson.reset();\n      this.currentBlackList = false;\n\n      this.form.get('documentNumber')?.reset();\n      this.isLegalPerson = 'undefined';\n    });\n\n    // ML: Verificar y deshabilitar el form en caso de que el usuario\n    // ya estaba asignado desde RETRIEVE\n    this.disabledByRetrieve$ = combineLatest([\n      this.storeEmission.select(fromEmission.getEmission),\n      this.storePolicy.select(fromPolicy.getClientData)\n    ]).subscribe((x) => {\n      const job = x[0].jobNumberFromQuotes;\n      const approved = x[0].approvedEmission;\n      const client = x[1];\n\n      this.disabledByRetrieve =\n        job && approved && client.accountnumber ? true : false;\n\n      if (this.disabledByRetrieve)\n        this.formPhysicalPerson.get('exposedPerson')?.disable();\n    });\n  }\n\n  validateDocumentNumber() {\n    if (\n      this.form.get('document')?.value === 'FEIN' &&\n      parseInt(this.form.get('documentNumber')?.value.substring(0, 2), 0) >= 30\n    ) {\n      this.isLegalPerson = 'yes';\n      this.openModalMobility();\n    } else {\n      this.isLegalPerson = 'not';\n    }\n\n    this.checkClienteN(this.form.get('documentNumber')?.value);\n\n    // Reset depende de form\n    const accountReset: IAccount = {\n      ...this.accountReset,\n      type: this.isLegalPerson === 'yes' ? 'Company' : 'Person',\n      documentType: this.form.get('document')?.value,\n      documentNumber: this.form.get('documentNumber')?.value,\n      address: <IAddress>{\n        ...this.accountReset.address,\n        state: <string>this.currentPolicy.insured?.address?.state,\n        city: <string>this.currentPolicy.insured?.address?.city\n      }\n    };\n\n    // Se setean vacias las propiedades client para policy y para emission.\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetClientDataAction(accountReset)\n    );\n\n    this.storeEmission.dispatch(\n      new fromEmissionActions.SetClientData(accountReset)\n    );\n\n    // Se limpia la descripcion de la ruta\n\n    this.routes.forEach((element) => {\n      if (element.path === 'residence') {\n        element.value = '';\n      }\n    });\n\n    // Se limpia la propiedad address para policy\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetAddressAction({\n        ...this.resetResidenceValues,\n        city: <string>this.currentPolicy.insured?.address?.city,\n        state: <string>this.currentPolicy.insured?.address?.state\n      })\n    );\n\n    const requestAccount: any = {\n      officialid: {\n        type: this.form.get('document')?.value,\n        value: this.form.get('documentNumber')?.value\n      }\n    };\n\n    const requestContact = {\n      type: this.isLegalPerson === 'yes' ? 'Company' : 'Person',\n      officialid: this.form.get('documentNumber')?.value\n    };\n\n    // Si el form (tipoDoc y nroDoc) es valido, entonces...\n    this.formPhysicalPerson.reset();\n    this.formLegalPerson.reset();\n\n    this.loadingData = true;\n    this.buttonLabel = 'Validando';\n    this.buttonAnimated.playSegments([[0, 119]], true);\n\n    // Busco por cuenta y por contacto..\n    this.searchClient$ = combineLatest([\n      this.accountService.getAccounts(requestAccount),\n      this.contactService.getContacts(requestContact)\n    ]).pipe(\n      switchMap((x) => {\n        const fromAccount = x[0];\n        const fromContact = x[1];\n        const typePerson = this.isLegalPerson === 'yes' ? 'Company' : 'Person';\n        this.buttonAnimated.playSegments([[120, 175]], false);\n        setTimeout(() => {\n          this.buttonLabel = 'Validado';\n        }, 2000);\n        this.loadingData = false;\n        // No encontre nada en account ni en contact\n        if (!fromAccount && !fromContact) {\n          return of(EMPTY);\n        } else {\n          // Si encuentro en account\n          if (fromAccount) {\n            fromAccount.documentNumber = this.form.get('documentNumber')?.value;\n            fromAccount.documentType = this.form.get('document')?.value;\n            fromAccount.address = fromAccount.primaryaddress;\n            this.storePolicy.dispatch(\n              new fromPolicyActions.SetClientDataAction(fromAccount)\n            );\n            this.storeEmission.dispatch(\n              new fromEmissionActions.SetClientData(cloneDeep(fromAccount))\n            );\n          } else {\n            const fromContactAddress = fromContact[0].address.split('|');\n            const _address: IAddress = {\n              id: fromContactAddress[0],\n              street: fromContactAddress[1],\n              streetnumber: fromContactAddress[2],\n              floor: fromContactAddress[3],\n              apartment: fromContactAddress[4],\n              postalcode: fromContactAddress[5],\n              city: fromContactAddress[6],\n              state: this.provincesFromApi.filter(\n                (p) => p.description === fromContactAddress[7]\n              )[0].code,\n              clarification: null,\n              type: 'home'\n            };\n            // Plancho en policy\n            this.storePolicy.dispatch(\n              new fromPolicyActions.SetBasicDataForClientAction(\n                typePerson,\n                fromContact[0].companyname.toUpperCase(),\n                fromContact[0].firstname.toUpperCase(),\n                fromContact[0].lastname.toUpperCase(),\n                fromContact[0].id,\n                this.form.get('documentNumber')?.value,\n                this.form.get('document')?.value,\n                _address\n              )\n            );\n            // Plancho en emission\n            this.storeEmission.dispatch(\n              new fromEmissionActions.SetBasicDataForClientAction(\n                typePerson,\n                fromContact[0].companyname.toUpperCase(),\n                fromContact[0].firstname.toUpperCase(),\n                fromContact[0].lastname.toUpperCase(),\n                fromContact[0].id,\n                this.form.get('documentNumber')?.value,\n                this.form.get('document')?.value,\n                _address\n              )\n            );\n          }\n          this.routes.forEach((element) => {\n            if (element.path === 'client') {\n              element.value =\n                this.isLegalPerson === 'yes'\n                  ? this.formLegalPerson.get('companyname')?.value\n                  : this.formPhysicalPerson.get('firstname')?.value +\n                    ' ' +\n                    this.formPhysicalPerson.get('lastname')?.value;\n            }\n          });\n          this.storeEmission.dispatch(\n            new fromEmissionActions.SetRoutes(this.routes)\n          );\n\n          return of(EMPTY);\n        }\n      }),\n      catchError((err: ApplicationError) => {\n        this.loadingData = false;\n        //si no pertenece el cliente a ese grupo comercial\n        if (parseInt(err.code, 0) === -1) {\n          this.openModalNoClient();\n        }\n        return of([]);\n      }),\n      share()\n    );\n  }\n\n  checkClienteN(officialId: any) {\n    this.clientBaseN$ = this._clientNService.validateClientN(officialId).pipe(\n      tap((ctl) => {\n        let blackList = false;\n        if (ctl !== null && ctl.length > 0) {\n          blackList = true;\n        }\n\n        this.currentBlackList = blackList;\n\n        if (this.currentBlackList) this.modalUW.openModal();\n      })\n    );\n  }\n\n  continue() {\n    const officialids: IOfficialIds[] = [];\n    officialids.push({\n      primary: true,\n      type: this.form.get('document')?.value,\n      value: this.form.get('documentNumber')?.value\n    });\n    this.currentAccount.officialids = officialids;\n\n    if (this.isLegalPerson === 'not' && this.formPhysicalPerson.valid) {\n      const formData = this.formPhysicalPerson.getRawValue();\n      (this.currentAccount.contactid = !this.currentAccount.contactid\n        ? null\n        : this.currentAccount.contactid),\n        (this.currentAccount.documentNumber = this.form.get(\n          'documentNumber'\n        )?.value),\n        (this.currentAccount.documentType = this.form.get('document')?.value),\n        (this.currentAccount.firstname = formData.firstname),\n        (this.currentAccount.lastname = formData.lastname),\n        (this.currentAccount.fiscalcondition = !this.currentAccount\n          .fiscalcondition\n          ? this.currentPolicy.fiscalcondition\n          : this.currentAccount.fiscalcondition);\n      this.currentAccount.type = 'Person';\n      this.currentAccount.maritalstatus = formData.maritalstatus;\n      this.currentAccount.nationality = formData.nationality;\n      this.currentAccount.gender = formData.gender;\n      this.currentAccount.email = formData.email;\n      this.currentAccount.birth = moment(\n        formData.birth.year +\n          '-' +\n          formData.birth.month +\n          '-' +\n          formData.birth.day\n      ).format();\n      this.currentAccount.politicallyexposed = formData.exposedPerson;\n      this.currentAccount.blacklist = this.currentBlackList;\n      this.currentAccount.cellphone = {\n        area: formData.prefix,\n        number: formData.phone\n      };\n\n      let workPhone = '';\n      if (this.currentAccount?.workphone) {\n        workPhone =\n          (this.currentAccount.workphone.area || '') +\n          (this.currentAccount.workphone.number || '');\n      }\n\n      this.storePolicy.dispatch(\n        new fromPolicyActions.SetInspectionPhoneNumberAction(workPhone)\n      );\n    } else if (this.formLegalPerson.valid && this.isLegalPerson === 'yes') {\n      const formData = this.formLegalPerson.getRawValue();\n      (this.currentAccount.contactid = !this.currentAccount.contactid\n        ? null\n        : this.currentAccount.contactid),\n        (this.currentAccount.documentNumber = this.form.get(\n          'documentNumber'\n        )?.value),\n        (this.currentAccount.documentType = this.form.get('document')?.value),\n        (this.currentAccount.companyname = formData.companyname);\n      this.currentAccount.fiscalcondition = !this.currentAccount.fiscalcondition\n        ? this.currentPolicy.fiscalcondition\n        : this.currentAccount.fiscalcondition;\n      this.currentAccount.email = formData.email;\n      this.currentAccount.consortium = formData.consortium;\n      this.currentAccount.officialorganism = formData.officialorganism;\n      this.currentAccount.blacklist = this.currentBlackList;\n      this.currentAccount.type = 'Company';\n      this.currentAccount.workphone = {\n        area: formData.prefix,\n        number: formData.phone\n      };\n\n      let phone = '';\n      if (this.currentAccount?.workphone) {\n        phone =\n          (this.currentAccount.workphone.area || '') +\n          (this.currentAccount.workphone.number || '');\n      }\n\n      this.storePolicy.dispatch(\n        new fromPolicyActions.SetInspectionPhoneNumberAction(phone)\n      );\n    }\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetClientDataAction(this.currentAccount)\n    );\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetMailDataAction(<string>this.currentAccount.email)\n    );\n    const vhc = this.vehicles.filter(\n      (x) => x.number === this.currentMotor.number\n    );\n    if (this.disabledByRetrieve) {\n      //TODO: Implementar de otra forma la detección del retrieve\n    } else if (\n      this.isLegalPerson === 'not' &&\n      vhc.length > 0 &&\n      vhc[0].driver\n    ) {\n      vhc[0].driver.clientIsDriver = this.motorConfig?.filter(\n        (p) => p.vehicleType === this.currentMotor.group\n      )[0]?.clientIsDriver;\n    } else if (this.vehicles) {\n      if (vhc.length > 0 && vhc[0].driver) {\n        vhc[0].driver.clientIsDriver = false;\n      }\n    }\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n    );\n\n    this.flowRouteEmissionService.enableRoute(this.routes, 'residence');\n\n    this.storeEmission.dispatch(\n      new fromEmissionActions.SetActiveRoute('residence')\n    );\n\n    this.routes.forEach((element) => {\n      if (element.path === 'residence') {\n        element.value = '';\n      }\n    });\n\n    this.routes.forEach((element) => {\n      if (element.path === 'client') {\n        element.value =\n          this.isLegalPerson === 'yes'\n            ? this.formLegalPerson.get('companyname')?.value\n            : this.formPhysicalPerson.get('firstname')?.value +\n              ' ' +\n              this.formPhysicalPerson.get('lastname')?.value;\n      }\n    });\n\n    this.flowRouteEmissionService.enableRoute(this.routes, 'residence');\n\n    if (this.formLegalPerson.valid || this.formPhysicalPerson.valid) {\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetFormEmissionClientIsValidAction(true)\n      );\n    }\n  }\n\n  closeModal() {\n    this.modalClient.closeModal();\n  }\n\n  openModal() {\n    this.modalClient.openModal();\n  }\n\n  closeModalNoClient() {\n    this.modalNoClient.closeModal();\n  }\n\n  openModalNoClient() {\n    this.modalNoClient.openModal();\n  }\n\n  ngOnDestroy(): void {\n    if (this.fiscalConditions$) {\n      this.fiscalConditions$.unsubscribe();\n    }\n    if (this.accountResetSubscription) {\n      this.accountResetSubscription.unsubscribe();\n    }\n\n    if (this.disabledByRetrieve$) {\n      this.disabledByRetrieve$.unsubscribe();\n    }\n\n    if (this.callCostsSubscription) {\n      this.callCostsSubscription.unsubscribe();\n    }\n  }\n\n  /**\n   * Control lottie animation\n   */\n  animationCreated(animationItem: AnimationItem): void {\n    this.buttonAnimated = animationItem;\n  }\n\n  closeUWModal(action?: string) {\n    if (action === 'continue') {\n      this.modalUW.closeModal();\n      return;\n    }\n\n    this.form.get('documentNumber')?.setValue('');\n    this.modalUW.closeModal();\n  }\n\n  /**\n   * Open modal mobility whether policy has mobility active\n   *\n   * @memberof ClientDataComponent\n   */\n  openModalMobility() {\n    if (this.hasMobility) {\n      this.modalMobility.openModal();\n    }\n  }\n\n  closeModalMobility() {\n    this.form.get('documentNumber')?.setValue('', { emitEvent: true });\n    this.form.get('document')?.setValue('SSN', { emitEvent: true });\n    this.modalMobility.closeModal();\n  }\n\n  continueIsLegalPerson() {\n    this.loadingCosts = true;\n    this.modalMobility.closeModal();\n    this.modalNewCosts.openModal();\n\n    // Se sacan los paquetes de movilidad\n    this.vehicles.forEach((v) => {\n      const currentPkg = v?.packages?.find((p) => p.selected);\n      if (currentPkg) {\n        currentPkg.coverages = <ICoverage[]>(\n          currentPkg?.coverages?.filter(\n            (c) => c.pattern.code !== this.MOBILITY_CODE\n          )\n        );\n      }\n    });\n\n    // Se hace la recotización\n    const adapted = this.policyAdapter.adapt(this.currentPolicy);\n    adapted.motor.vehicles.forEach((v) => {\n      v.packages = <IPackage[]>v.packages?.filter((p) => p.selected);\n    });\n\n    this.callCostsSubscription = this.quotingService\n      .getCosts(adapted)\n      .subscribe((newCosts) => {\n        // Solo guardaré en costs la cotización del vehículo actual\n        const packageSelected = this.currentMotor?.packages?.find(\n          (p) => p.selected\n        );\n\n        this.storePolicy.dispatch(\n          new fromPolicyActions.UpdateCostsAction(\n            newCosts.costs?.filter((c: any) =>\n              c.externalId\n                .split('&')\n                .includes(\n                  `${this.currentPolicy.productcode},${this.currentMotor.number},${packageSelected?.code}`\n                )\n            )\n          )\n        );\n\n        this.vehicles.forEach((v) => {\n          // Actualizar preminewCostsums con el resultado de la nueva cotización\n          const selected = v?.packages?.find((p) => p.selected);\n\n          // Buscar error en motor.errors de este vehículo y paquete\n          const error = newCosts.errors?.find((e: any) =>\n            e.externalId\n              .split('&')\n              .includes(\n                `${this.currentPolicy.productcode},${v.number},${selected?.code}`\n              )\n          );\n\n          // Busco los datos del paquete con la nueva cotización si existiera\n          const newPackage = newCosts.motor.vehicles\n            ?.find((costVehicle: any) => costVehicle.number === v.number)\n            ?.packages.find((p: any) => p.code === selected?.code);\n\n          if (!error?.code) {\n            if (selected) {\n              selected.premiums = <IPremium>newPackage?.premiums;\n            }\n\n            this.newQuote = newCosts.costs\n              ?.find((c: any) =>\n                c.externalId\n                  .split('&')\n                  .includes(\n                    `${this.currentPolicy.productcode},${v.number},${selected?.code}`\n                  )\n              )\n              .invoice.toString();\n            this.newQuote = <string>(\n              (this.newQuote ? parseFloat(this.newQuote).toFixed(2) : '')\n            );\n          } else {\n            if (selected) {\n              selected.premiums = <IPremium>{};\n            }\n\n            this.newQuote = '';\n          }\n        });\n\n        this.storePolicy.dispatch(\n          new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n        );\n\n        this.storeQuote.dispatch(\n          new fromQuoteActions.SetCostsResponseAction(newCosts)\n        );\n\n        this.loadingCosts = false;\n      });\n  }\n\n  closeModalNewCosts() {\n    this.modalNewCosts.closeModal();\n  }\n}\n","import { reduce } from './reduce';\nfunction toArrayReducer(arr, item, index) {\n    if (index === 0) {\n        return [item];\n    }\n    arr.push(item);\n    return arr;\n}\nexport function toArray() {\n    return reduce(toArrayReducer, []);\n}\n//# sourceMappingURL=toArray.js.map","<div class=\"col-12\">\n  <div class=\"row\">\n    <div class=\"col-lg-12 pl-0\">\n      <ng-template #stillLoading>\n        <div class=\"grid-container\">\n          <div class=\"grid-item\">\n            <button class=\"btn btn-primary btn-block\">\n              Cargando...\n            </button>\n          </div>\n        </div>\n      </ng-template>\n      <div class=\"grid-container\" *ngIf=\"residences$ | async as addresses\">\n        <span class=\"data-not-found\" *ngIf=\"addresses.length == 0\">\n          No se encontraron resultados\n        </span>\n        <div class=\"grid-item\" *ngFor=\"let address of addresses\">\n          <button\n            [ngClass]=\"{\n              active: address.id === addressIdSelected\n            }\"\n            (click)=\"selectAddress(address)\"\n            class=\"btn btn-primary btn-block\"\n            (keydown.enter)=\"onEnter()\"\n            name=\"selectAddressClientEmissionBtn\"\n            [disabled]=\"disabledByRetrieve\"\n          >\n            {{ address.street | uppercase }}\n            {{ address.streetnumber | uppercase }},\n            {{ address.city | uppercase }}\n          </button>\n        </div>\n        <div class=\"grid-item\">\n          <button\n            [ngClass]=\"{\n              active: addressIdSelected === null\n            }\"\n            (click)=\"addAddress([])\"\n            class=\"btn btn-primary btn-block\"\n            name=\"addAddressClientEmissionBtn\"\n            [disabled]=\"disabledByRetrieve\"\n          >\n            + Agregar nuevo domicilio\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div *ngIf=\"addressType$ | async as addressType\">\n  <div [formGroup]=\"formClientResidence\" class=\"col-12\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 pl-0\">\n        <label>\n          Cód. postal\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\">\n        <label>\n          Provincia\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\">\n        <label>\n          Localidad\n          <sup>*</sup>\n        </label>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-lg-4 pl-0\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"postalcode\"\n          (keyup.enter)=\"validatePostalCode()\"\n          [disabled]=\"!clientIsEditable\"\n          label=\"\"\n          placeholder=\"Codigo Postal\"\n          [maxLength]=\"4\"\n          name=\"postalcodeAddressEmission\"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-lg-4\">\n        <sxf-select\n          #province\n          formControlName=\"state\"\n          (keydown.enter)=\"onEnter()\"\n          [disabled]=\"!clientIsEditable\"\n          [items]=\"provinces$ | async\"\n          bindLabel=\"description\"\n          bindValue=\"code\"\n          [multiple]=\"false\"\n          class=\"custom\"\n          [searchable]=\"true\"\n          placeholder=\"Provincia\"\n          [dropdownPosition]=\"'bottom'\"\n          name=\"stateAddressEmission\"\n          [loading]=\"loadingPostalCode\"\n        ></sxf-select>\n      </div>\n      <div class=\"col-lg-4\">\n        <sxf-select\n          #location\n          formControlName=\"city\"\n          (keydown.enter)=\"onEnter()\"\n          [disabled]=\"!clientIsEditable || loadingPostalCode\"\n          [items]=\"locations$\"\n          bindLabel=\"city\"\n          bindValue=\"city\"\n          [multiple]=\"false\"\n          class=\"custom\"\n          [searchable]=\"true\"\n          placeholder=\"Localidad\"\n          [dropdownPosition]=\"'bottom'\"\n          name=\"cityAddressEmission\"\n        ></sxf-select>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-lg-5 pl-0\">\n        <label>\n          Calle\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-3\">\n        <label>\n          Altura\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-2\">\n        <label>\n          Piso\n        </label>\n      </div>\n      <div class=\"col-lg-2\">\n        <label>\n          Depto\n        </label>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-lg-5 pl-0\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"street\"\n          (keydown.enter)=\"onEnter()\"\n          [disabled]=\"!clientIsEditable\"\n          label=\"\"\n          placeholder=\"Calle\"\n          [maxLength]=\"200\"\n          name=\"streetAddressEmission\"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-lg-3\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"streetnumber\"\n          (keydown.enter)=\"onEnter()\"\n          [disabled]=\"!clientIsEditable\"\n          label=\"\"\n          placeholder=\"Altura\"\n          [maxLength]=\"10\"\n          name=\"streetNumberAddressEmission\"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-lg-2\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"floor\"\n          (keydown.enter)=\"onEnter()\"\n          [disabled]=\"!clientIsEditable\"\n          label=\"\"\n          placeholder=\"Piso\"\n          [maxLength]=\"10\"\n          name=\"floorAddressEmission\"\n        ></sxf-textbox>\n      </div>\n      <div class=\"col-lg-2\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"apartment\"\n          (keydown.enter)=\"onEnter()\"\n          [disabled]=\"!clientIsEditable\"\n          label=\"\"\n          placeholder=\"Depto\"\n          [maxLength]=\"10\"\n          name=\"apartmentAddressEmission\"\n        ></sxf-textbox>\n      </div>\n      <!-- <div class=\"col-lg-4\">\n      <sxf-select #typehab formControlName=\"typehab\" [items]=\"[]\" bindLabel=\"typehab\" bindValue=\"code\"\n        [multiple]=\"false\" class=\"custom\" [searchable]=\"true\" placeholder=\"\" [dropdownPosition]=\"'bottom'\"></sxf-select>\n    </div> -->\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-lg-4 pl-0\">\n        <label>\n          Tipo\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-8 pl-0\">\n        <label>\n          Aclaraciones\n        </label>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-lg-4 pl-0\">\n        <sxf-select\n          #typeHome\n          formControlName=\"type\"\n          (keydown.enter)=\"onEnter()\"\n          [disabled]=\"!clientIsEditable\"\n          [items]=\"addressType\"\n          bindLabel=\"description\"\n          bindValue=\"code\"\n          [multiple]=\"false\"\n          class=\"custom\"\n          [searchable]=\"true\"\n          placeholder=\"Tipo de vivienda\"\n          [dropdownPosition]=\"'bottom'\"\n          name=\"typeAddressEmission\"\n        ></sxf-select>\n      </div>\n      <div class=\"col-lg-8 pl-0\">\n        <sxf-textbox\n          type=\"text\"\n          formControlName=\"clarification\"\n          (keydown.enter)=\"onEnter()\"\n          [disabled]=\"!clientIsEditable\"\n          label=\"\"\n          placeholder=\"Notas\"\n          name=\"clarificationAddressEmission\"\n        ></sxf-textbox>\n      </div>\n    </div>\n\n    <div class=\"row pt-4\">\n      <div class=\"col-lg-8 pl-0\">\n        <span>\n          <button\n            [disabled]=\"!formClientResidence.valid\"\n            (click)=\"continue()\"\n            class=\"btn btn-primary btn-heft\"\n            name=\"continueAddressEmissionBtn\"\n          >\n            Continuar\n          </button>\n        </span>\n        <span class=\"press-enter ml-3 mr-4\">\n          o presiona ENTER\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<sxf-modal #newCosts [options]=\"{ backdrop: 'static', keyboard: false }\">\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">\n      Recotizando\n    </h4>\n    <!-- <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"closeModalNewCosts()\"\n      name=\"closeModalFiscalConditionNewCostsBtn\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button> -->\n  </div>\n  <div class=\"modal-body modal-body-items\">\n    <p *ngIf=\"!loadingCosts; else stillLoadingCost\">\n      Recotizamos en base a la dirección del cliente, el nuevo valor de la cuota\n      es de\n      <b>$ {{ newQuote | number: '1.0-0' }}</b>\n      <br />\n      Para mas detalle revisar el detalle del menú lateral.\n    </p>\n    <ng-template #stillLoadingCost>\n      <div class=\"row\">\n        <div class=\"col-12 text-center\">\n          <ng-lottie\n            [options]=\"lottieConfig\"\n            width=\"8.75rem\"\n            height=\"6.25rem\"\n          ></ng-lottie>\n        </div>\n      </div>\n    </ng-template>\n  </div>\n\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-8 pl-0\">\n        <button\n          type=\"button\"\n          class=\"btn btn-primary btn-lg btn-block\"\n          (click)=\"closeModalNewCosts()\"\n          [disabled]=\"loadingCosts\"\n          name=\"closeModalFiscalConditionNewCostsBtn\"\n        >\n          Aceptar\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n","import { Component, OnInit, ViewChild, OnDestroy } from '@angular/core';\nimport {\n  FormGroup,\n  FormBuilder,\n  Validators,\n  FormControl\n} from '@angular/forms';\nimport { Observable, of, combineLatest, Subscription, EMPTY } from 'rxjs';\nimport {\n  IProvince,\n  ProvinceService,\n  LocationService,\n  ILocation,\n  IAddress,\n  AddressTypeService,\n  IAddressType,\n  IAccount,\n  IVehicle,\n  IPolicy,\n  QuotingService,\n  IPackage\n} from '@sura-platform/features';\nimport {\n  switchMap,\n  tap,\n  filter,\n  map,\n  groupBy,\n  mergeMap,\n  toArray,\n  catchError,\n  first\n} from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport * as fromQuote from '../../../quoting/components/quote/state';\nimport * as fromQuoteActions from '../../../quoting/components/quote/state/quote.actions';\nimport * as fromPolicy from '../../../quoting/state/policy';\nimport * as fromPolicyActions from '../../../quoting/state/policy/policy.actions';\nimport { PolicyAdapter } from '../../../quoting/adapters/policy.adapter';\nimport * as fromEmission from '../../../quoting/components/emission/state';\nimport * as fromEmissionActions from '../../../quoting/components/emission/state/emission.actions';\nimport { FlowRouteEmissionService } from '../../../quoting/components/emission/services/flow-route-emission.service';\nimport { IRoutes } from '@sura-platform/web/core/models/question/routes.interface';\nimport { ModalComponent } from '@sura-platform/web';\nimport { AnimationOptions } from 'ngx-lottie';\nimport { IPremium } from '@sura-platform/features/package/interfaces/premium.interface';\n// import * as fromPolicyActions from '../../../quoting/state/policy/policy.actions';\n\n@Component({\n  selector: 'sxf-client-residence',\n  templateUrl: './client-residence.component.html',\n  styleUrls: ['./client-residence.component.scss']\n})\nexport class ClientResidenceComponent implements OnInit, OnDestroy {\n  lottieConfig: AnimationOptions = {\n    path: '/assets/loadings/sura-loader.json'\n  };\n  zipCode = new FormControl('');\n  formClientResidence: FormGroup = <FormGroup>{};\n  provinces$: Observable<IProvince[]> = new Observable();\n  policyclientaddress$: Observable<IAddress> = new Observable();\n  primaryClientAddress$: Observable<IAddress> = new Observable();\n  provinceDescription = '';\n  locations$: Observable<ILocation[]> = new Observable();\n  routes: IRoutes[] = <IRoutes[]>[];\n  residences$: Observable<any> = new Observable();\n  addressType$: Observable<IAddressType[]> = new Observable();\n  defaultAddressType = '';\n  dataByPostalCodeSubscriber: Subscription = new Subscription();\n  dataByPostalCode$: Observable<any> = new Observable();\n  arrProvinces: IProvince[] = <IProvince[]>[];\n  addressIdSelected = '';\n  filledQuestion = false;\n  loadingPostalCode = false;\n  client: IAccount = <IAccount>{};\n  clientIsEditable = false;\n  vehicles: IVehicle[] = <IVehicle[]>[];\n  currentMotor: IVehicle = <IVehicle>{};\n  currentPolicy: IPolicy = <IPolicy>{};\n  loadingCosts = false;\n  newQuote = '';\n  getClientFromStore$: Subscription = new Subscription();\n\n  @ViewChild('newCosts') modalNewCosts: ModalComponent = <ModalComponent>{};\n\n  disabledByRetrieve$: Subscription = new Subscription();\n  disabledByRetrieve = false;\n  policySubscription: Subscription = new Subscription();\n\n  constructor(\n    private fb: FormBuilder,\n    private provinceService: ProvinceService,\n    private locationService: LocationService,\n    private storePolicy: Store<fromPolicy.State>,\n    private storeQuote: Store<fromQuote.State>,\n    private flowRouteEmissionService: FlowRouteEmissionService,\n    private storeEmission: Store<fromEmission.State>,\n    private _addressTypeService: AddressTypeService,\n    private quotingService: QuotingService,\n    private policyAdapter: PolicyAdapter\n  ) {}\n\n  ngOnInit() {\n    this.formClientResidence = this.fb.group({\n      id: [null],\n      state: [, Validators.required],\n      city: [, Validators.required],\n      postalcode: [, Validators.required],\n      street: [, Validators.required],\n      streetnumber: [, Validators.required],\n      apartment: [],\n      floor: [],\n      type: [, Validators.required],\n      clarification: []\n    });\n\n    this.storeEmission\n      .select(fromEmission.getClientData)\n      .subscribe((data) => (this.clientIsEditable = <boolean>data.editable));\n\n    this.storePolicy.select(fromPolicy.getClientData).subscribe((data) => {\n      this.client = data;\n    });\n\n    this.policySubscription = combineLatest([\n      this.storePolicy.select(fromPolicy.getPolicyData),\n      this.storeQuote.select(fromQuote.getQuoteMotorData)\n    ]).subscribe((data) => {\n      this.vehicles = data[0].motor.vehicles;\n      this.currentMotor = data[0].motor.vehicles.filter(\n        (c) => c.number === data[1].activeMotor\n      )[0];\n      this.currentPolicy = data[0];\n    });\n\n    this.provinces$ = this.provinceService.getAllProvinces().pipe(\n      switchMap((x) => {\n        this.arrProvinces = x;\n        return of(x);\n      })\n    );\n\n    this.addressType$ = this._addressTypeService.getAddressType().pipe(\n      tap((ty) => {\n        this.defaultAddressType = ty[0].code;\n        this.loadAddressSave();\n      })\n    );\n    this.addressIdSelected = '';\n\n    // ML: Verificar y deshabilitar el form en caso de que el usuario\n    // ya estaba asignado desde RETRIEVE\n    this.disabledByRetrieve$ = this.storeEmission\n      .select(fromEmission.getEmission)\n      .subscribe((emission) => {\n        const job = emission.jobNumberFromQuotes;\n        const approved = emission.approvedEmission;\n\n        this.disabledByRetrieve = job && approved ? true : false;\n      });\n  }\n\n  loadAddressSave() {\n    this.storeEmission.select(fromEmission.getRoutes).subscribe((data) => {\n      this.routes = data;\n    });\n\n    //Para evitar busqueda por codigo postal cuando ya hay guardada una direccion nueva\n    this.routes.forEach((element) => {\n      if (element.path === 'residence') {\n        if (element.value === null) {\n          this.filledQuestion = false;\n        } else {\n          this.filledQuestion = true;\n        }\n      }\n    });\n\n    this.residences$ = combineLatest([\n      this.storeEmission.select(fromEmission.getClientAddresses),\n      this.storePolicy.select(fromPolicy.getClientData)\n    ]).pipe(\n      switchMap((idd) => {\n        if (idd[0] === null) idd[0] = [];\n        const arrayAddress = idd[0].filter((jk) => jk.postalcode);\n\n        if (!(arrayAddress.length > 0)) {\n          if (\n            idd &&\n            idd.length > 1 &&\n            idd[1]?.address?.postalcode !== null &&\n            idd[1]?.address?.postalcode !== ''\n          ) {\n            this.addAddress(<any>idd[1].address);\n          } else {\n            this.addAddress([]);\n          }\n        }\n\n        //si hay una sola la selecciono por defecto siempre que no este ya una previamente guardada (cuando se vuelve una pregunta atras)\n        if (\n          arrayAddress.length === 1 &&\n          idd &&\n          idd.length > 0 &&\n          idd[1]?.address?.postalcode === null\n        ) {\n          this.selectAddress(arrayAddress[0]);\n        }\n        return of(arrayAddress);\n      })\n    );\n\n    this.formClientResidence.get('state')?.valueChanges.subscribe((data) => {\n      if (data !== null) {\n        // this.locations$ = this.locationService.getLocations(data);\n\n        this.locations$ = this.locationService.getLocations(data).pipe(\n          tap((x) => {\n            if (x.length === 1) {\n              this.formClientResidence\n                ?.get('city')\n                ?.setValue(x[0].city, { onlySelf: true, emitEvent: true });\n            } else {\n              this.formClientResidence\n                ?.get('city')\n                ?.setValue([], { onlySelf: true, emitEvent: false });\n            }\n          })\n        );\n      }\n    });\n\n    this.primaryClientAddress$ = <Observable<IAddress>>(\n      this.storePolicy.select(fromPolicy.getPrimaryAddressClient)\n    );\n\n    this.getClientFromStore$ = combineLatest([\n      this.storePolicy.select(fromPolicy.getClientData),\n      this.provinceService.getAllProvinces(),\n      this.storePolicy.select(fromPolicy.getAddress)\n    ])\n      .pipe(\n        filter(\n          (x) =>\n            x[0].address !== undefined &&\n            x[0].address !== null &&\n            x[0].address.state !== null\n        ),\n        switchMap((x: any) => {\n          const province = x[1].filter(\n            (p: any) => p.code === x[0].address.state\n          )[0];\n          this.provinceDescription = province.description;\n          this.formClientResidence.patchValue(\n            {\n              id: x[0].address.id,\n              state: x[0].address.state,\n              city: x[0].address.city,\n              postalcode: x[0].address.postalcode,\n              street: x[0].address.street,\n              streetnumber: x[0].address.streetnumber,\n              apartment: x[0].address.apartment,\n              floor: x[0].address.floor,\n              type: x[0].address.type,\n              clarification: x[0].address.clarification\n            },\n            { emitEvent: false }\n          );\n          if (x[0].address.id !== undefined)\n            this.addressIdSelected = x[0].address.id;\n\n          return of(x[0].address);\n        })\n      )\n      .subscribe();\n\n    this.formClientResidence\n      .get('postalcode')\n      ?.valueChanges.subscribe((data) => {\n        if (data !== null && data.length === 4 && !this.filledQuestion) {\n          this.loadingPostalCode = true;\n          this.validatePostalCode();\n        }\n      });\n  }\n\n  selectAddress(address: any) {\n    this.addressIdSelected = address.id;\n    this.clientIsEditable = false;\n    this.formClientResidence.patchValue(\n      {\n        id: address.id ? address.id : null,\n        state: address.state ? address.state : null,\n        city: address.city ? address.city : null,\n        postalcode: address.postalcode ? address.postalcode : null,\n        street: address.street ? address.street : null,\n        streetnumber: address.streetnumber ? address.streetnumber : null,\n        apartment: address.apartment ? address.apartment : null,\n        floor: address.floor ? address.floor : null,\n        type: address.type ? address.type : null,\n        clarification: address.clarification ? address.clarification : null\n      },\n      { emitEvent: false }\n    );\n\n    // const addressTemp = {\n    //   ...this.formClientResidence.value,\n    //   id: address.id\n    // };\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetAddressAction(this.formClientResidence.value)\n    );\n  }\n\n  addAddress(address: any) {\n    this.clientIsEditable = true;\n    if (address.length === 0) {\n      this.filledQuestion = false;\n      this.addressIdSelected = '';\n      this.formClientResidence.reset();\n\n      this.formClientResidence.patchValue(\n        {\n          type: this.defaultAddressType\n        },\n        { emitEvent: true }\n      );\n    } else {\n      this.addressIdSelected = address?.id;\n      this.formClientResidence.patchValue(\n        {\n          id: address?.id,\n          state: address?.state,\n          city: address?.city,\n          postalcode: address?.postalcode,\n          street: address?.street,\n          streetnumber: address?.streetnumber,\n          apartment: address?.apartment,\n          floor: address?.floor,\n          type: address?.type,\n          clarification: address?.clarification\n        },\n        { emitEvent: false }\n      );\n    }\n  }\n\n  onEnter() {\n    if (this.formClientResidence.valid) {\n      this.continue();\n    }\n  }\n\n  continue() {\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetAddressAction(this.formClientResidence.value)\n    );\n\n    // ML: En caso de ser cliente existente, debo enviar el policy.address\n    if (\n      this.client.accountnumber &&\n      this.formClientResidence.get('id')?.value === null\n    )\n      this.storePolicy.dispatch(\n        new fromPolicyActions.SetPolicyAddressAction(\n          this.formClientResidence.value\n        )\n      );\n\n    this.callCost();\n  }\n\n  callCost() {\n    if (this.disabledByRetrieve) {\n      this.closeModalNewCosts();\n      return;\n    }\n\n    combineLatest([\n      this.storePolicy.select(fromPolicy.getPolicyData),\n      this.storeEmission.select(fromEmission.getPolicyAddressFromQuote)\n    ])\n      .pipe(first())\n      .subscribe(([policy, address]) => {\n        if (\n          policy?.client?.address?.state === address?.state &&\n          policy?.client?.address?.city === address?.city\n        ) {\n          this.closeModalNewCosts();\n          return;\n        }\n\n        this.loadingCosts = true;\n        this.modalNewCosts.openModal();\n\n        const adapted = this.policyAdapter.adapt(policy);\n        adapted.motor.vehicles.forEach((v) => {\n          v.packages = <IPackage[]>v?.packages?.filter((p) => p.selected);\n        });\n\n        this.quotingService.getCosts(adapted).subscribe((newCosts: IPolicy) => {\n          // Solo guardaré en costs la cotización del vehículo actual\n          const packageSelected = this.currentMotor?.packages?.find(\n            (p) => p.selected\n          );\n\n          this.storePolicy.dispatch(\n            new fromPolicyActions.UpdateCostsAction(\n              newCosts.costs?.filter((c) =>\n                c.externalId\n                  .split('&')\n                  .includes(\n                    `${this.currentPolicy.productcode},${this.currentMotor.number},${packageSelected?.code}`\n                  )\n              )\n            )\n          );\n\n          this.vehicles.forEach((v) => {\n            // Actualizar premiums con el resultado de la nueva cotización\n            const selected = v?.packages?.find((p) => p.selected);\n\n            // Buscar error en motor.errors de este vehículo y paquete\n            const error = newCosts.errors?.find((e) =>\n              e.externalId\n                .split('&')\n                .includes(\n                  `${this.currentPolicy.productcode},${v.number},${selected?.code}`\n                )\n            );\n\n            // Busco los datos del paquete con la nueva cotización si existiera\n            const newPackage = newCosts?.motor?.vehicles\n              ?.find((costVehicle) => costVehicle.number === v.number)\n              ?.packages?.find((p) => p.code === selected?.code);\n\n            if (!error?.code) {\n              if (selected) {\n                selected.premiums = <IPremium>newPackage?.premiums;\n              }\n\n              this.newQuote = <string>(\n                newCosts?.costs\n                  ?.find((c) =>\n                    c?.externalId\n                      ?.split('&')\n                      ?.includes(\n                        `${this.currentPolicy.productcode},${v.number},${selected?.code}`\n                      )\n                  )\n                  ?.invoice.toString()\n              );\n              this.newQuote = <string>(\n                (this.newQuote ? parseFloat(this.newQuote).toFixed(2) : '')\n              );\n            } else {\n              if (selected) {\n                selected.premiums = <IPremium>{};\n              }\n\n              this.newQuote = '';\n            }\n          });\n\n          this.storePolicy.dispatch(\n            new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n          );\n\n          this.storeQuote.dispatch(\n            new fromQuoteActions.SetCostsResponseAction(newCosts)\n          );\n\n          this.loadingCosts = false;\n        });\n      })\n      .unsubscribe();\n  }\n\n  closeModalNewCosts() {\n    this.modalNewCosts.closeModal();\n    this.routes.forEach((element) => {\n      if (element.path === 'residence') {\n        element.value =\n          this.client?.address?.street +\n          ' ' +\n          this.client?.address?.streetnumber +\n          ', ' +\n          this.arrProvinces.filter(\n            (f) => f.code === this.client?.address?.state\n          )[0].description;\n      }\n    });\n\n    this.storeEmission.dispatch(\n      new fromEmissionActions.SetActiveRoute('tax-condition')\n    );\n\n    if (this.formClientResidence.valid) {\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetFormEmissionResidenceIsValidAction(true)\n      );\n    }\n\n    this.flowRouteEmissionService.enableRoute(this.routes, 'tax-condition');\n  }\n\n  validatePostalCode() {\n    this.formClientResidence\n      ?.get('city')\n      ?.setValue([], { onlySelf: true, emitEvent: false });\n\n    this.provinces$ = this.provinceService.getAllProvinces();\n\n    this.locations$ = this.locationService\n      .getLocationAndProvince(this.formClientResidence.get('postalcode')?.value)\n      .pipe(\n        map((locations) => locations),\n        tap((x) => {\n          if (x) {\n            x = x.filter((zx) => zx.postalcode);\n            if (x.length === 1) {\n              this.formClientResidence\n                ?.get('city')\n                ?.setValue(x[0].city, { onlySelf: true, emitEvent: true });\n            } else {\n              this.formClientResidence\n                ?.get('city')\n                ?.setValue([], { onlySelf: true, emitEvent: false });\n            }\n          }\n        })\n      );\n\n    this.dataByPostalCode$ = this.locations$.pipe(\n      groupBy((state) => state.map((x) => x.state.description)),\n      mergeMap((x) => combineLatest([of(x.key), x.pipe(toArray())])),\n      map((x) => x[0])\n    );\n\n    this.dataByPostalCodeSubscriber = this.dataByPostalCode$\n      .pipe(\n        map((x) => {\n          if (x) {\n            this.loadingPostalCode = false;\n            const codes = x;\n            const distinctCodes: any[] = Array.from(new Set(codes));\n\n            if (distinctCodes.length === 1) {\n              const codeProvince = this.arrProvinces.filter(\n                (zg) => zg.description === distinctCodes[0].toString()\n              )[0];\n\n              this.formClientResidence\n                ?.get('state')\n                ?.setValue(codeProvince.code, {\n                  onlySelf: true,\n                  emitEvent: false\n                });\n              return distinctCodes[0];\n            } else {\n              // this.searchingLocations = false;\n              this.formClientResidence\n                ?.get('state')\n                ?.setValue([], { onlySelf: true, emitEvent: false });\n              return EMPTY;\n            }\n          }\n        }),\n        catchError(() => {\n          this.formClientResidence\n            .get('state')\n            ?.setValue([], { onlySelf: true, emitEvent: false });\n          this.formClientResidence\n            .get('city')\n            ?.setValue([], { onlySelf: true, emitEvent: false });\n          this.loadingPostalCode = false;\n          // alert(\n          //   'La busqueda no trajo ningun resultado. Cargue los datos manualmente.'\n          // );\n          return of([]);\n        })\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    if (this.disabledByRetrieve$) this.disabledByRetrieve$.unsubscribe();\n    if (this.getClientFromStore$) this.getClientFromStore$.unsubscribe();\n    if (this.policySubscription) this.policySubscription.unsubscribe();\n  }\n}\n","import { scan } from './scan';\nimport { takeLast } from './takeLast';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { pipe } from '../util/pipe';\nexport function reduce(accumulator, seed) {\n    if (arguments.length >= 2) {\n        return function reduceOperatorFunctionWithSeed(source) {\n            return pipe(scan(accumulator, seed), takeLast(1), defaultIfEmpty(seed))(source);\n        };\n    }\n    return function reduceOperatorFunction(source) {\n        return pipe(scan((acc, value, index) => accumulator(acc, value, index + 1)), takeLast(1))(source);\n    };\n}\n//# sourceMappingURL=reduce.js.map","<div class=\"row\">\n  <div [formGroup]=\"formClienTax\" class=\"col-lg-12\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 pl-0\">\n        <label>\n          Condición fiscal\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\" *ngIf=\"showIIBB\">\n        <label>\n          Ingresos Brutos\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\" *ngIf=\"showiibbNumber\">\n        <label>\n          N° IIBB\n          <sup>*</sup>\n        </label>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-lg-4 pl-0\">\n        <sxf-select #fiscalcondition formControlName=\"fiscalcondition\" (keydown.enter)=\"onEnter()\"\n          [items]=\"fiscalConditions$ | async\" bindLabel=\"description\" bindValue=\"code\" [multiple]=\"false\" class=\"custom\"\n          [searchable]=\"true\" placeholder=\"Cond. Fiscal\" dropdownPosition=\"bottom\" name=\"fiscalconditionSelectEmission\"\n          [disabled]=\"disabledByRetrieve\"></sxf-select>\n      </div>\n      <div class=\"col-lg-4\" *ngIf=\"showIIBB\">\n        <sxf-select #iibb formControlName=\"iibb\" (keydown.enter)=\"onEnter()\" [items]=\"iibb$ | async\"\n          bindLabel=\"description\" bindValue=\"code\" [multiple]=\"false\" class=\"custom\" [searchable]=\"true\"\n          placeholder=\"Ing. Brutos\" dropdownPosition=\"bottom\" name=\"iibbEmission\" [disabled]=\"disabledByRetrieve\">\n        </sxf-select>\n      </div>\n      <div class=\"col-lg-4\" *ngIf=\"showiibbNumber\">\n        <sxf-textbox #numiibb type=\"text\" formControlName=\"iibbNumber\" (keydown.enter)=\"onEnter()\" label=\"\"\n          placeholder=\"\" [helpFeedback]=\"''\" placement=\"bottom\" name=\"numIibbEmission\" [disabled]=\"disabledByRetrieve\">\n        </sxf-textbox>\n      </div>\n    </div>\n\n    <div class=\"row\" *ngIf=\"showCertified\">\n      <div class=\"col-lg-4 pl-0\">\n        <label>\n          Inicio de certificado\n          <sup>*</sup>\n        </label>\n      </div>\n      <div class=\"col-lg-4\">\n        <label>\n          Vencimiento de certificado\n          <sup>*</sup>\n        </label>\n      </div>\n    </div>\n\n    <div class=\"row\" *ngIf=\"showCertified\">\n      <div class=\"col-lg-4 pl-0\">\n        <sxf-datetimepicker formControlName=\"beginningValidity\" (keydown.enter)=\"onEnter()\"\n          name=\"beginningValidityFiscalConditionEmission\"></sxf-datetimepicker>\n      </div>\n      <div class=\"col-lg-4\">\n        <sxf-datetimepicker [minDate]=\"date\" [maxDate]=\"maxDate\" formControlName=\"endingValidity\"\n          (keydown.enter)=\"onEnter()\" name=\"endingValidityFiscalConditionEmission\"></sxf-datetimepicker>\n      </div>\n    </div>\n\n    <div class=\"row pt-4\">\n      <div class=\"col-lg-8 pl-0\">\n        <span>\n          <button [disabled]=\"!formClienTax.valid\" class=\"btn btn-primary btn-heft\" (click)=\"continue()\"\n            name=\"continueFiscalConditionBtn\">\n            Continuar\n          </button>\n        </span>\n        <span class=\"press-enter ml-3 mr-4\">\n          o presiona ENTER\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<sxf-modal #modalFiscal>\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">\n      La condición fiscal no coincide\n    </h4>\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"closeModal()\" name=\"closeModalFiscalConditionBtn\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body modal-body-items\">\n    <p>\n      La condición fiscal usada para cotizar no coincide con la registrada para\n      el cliente. Vamos a recotizar la cobertura elegida con la condición fiscal\n      existente. De haber un cambio en la misma, por favor comunicate con tu\n      Ejecutivo Comercial.\n    </p>\n  </div>\n\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-8 pl-0\">\n        <button type=\"button\" class=\"btn btn-primary btn-lg btn-block\" (click)=\"closeModal()\"\n          name=\"closeModalFiscalConditionBtn\">\n          Aceptar\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>\n\n<sxf-modal #newCosts>\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">\n      Nueva cotización\n    </h4>\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"closeModalNewCosts()\"\n      name=\"closeModalFiscalConditionNewCostsBtn\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body modal-body-items\">\n    <ng-template #stillLoading>\n      <div class=\"row\">\n        <div class=\"col-12 text-center\">\n          <ng-lottie [options]=\"lottieConfig\" width=\"8.75rem\" height=\"6.25rem\"></ng-lottie>\n        </div>\n      </div>\n    </ng-template>\n    <p *ngIf=\"!loadingCosts; else stillLoading\">\n      Recotizamos tu cobertura con la condición fiscal registrada. el nuevo\n      valor de la cuota es de {{ newQuote | number: '1.0-0' }} Para mas detalle\n      revisar el detalle del menú lateral.\n    </p>\n  </div>\n\n  <div class=\"modal-footer\">\n    <div class=\"row\">\n      <div class=\"col-lg-4 offset-lg-8 pl-0\">\n        <button type=\"button\" class=\"btn btn-primary btn-lg btn-block\" (click)=\"closeModalNewCosts()\"\n          [disabled]=\"loadingCosts\" name=\"closeModalFiscalConditionNewCostsBtn\">\n          Aceptar\n        </button>\n      </div>\n    </div>\n  </div>\n</sxf-modal>","import { Component, OnInit, ViewChild, OnDestroy } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport {\n  IFiscalcondition,\n  ICrudIncome,\n  FiscalConditionService,\n  CrudIncomeService,\n  IAccount,\n  IPolicy,\n  QuotingService,\n  IVehicle\n} from '@sura-platform/features';\nimport { Observable, of, combineLatest, Subscription } from 'rxjs';\nimport { Store } from '@ngrx/store';\nimport { FlowRouteEmissionService } from '../../../quoting/components/emission/services/flow-route-emission.service';\nimport * as fromPolicy from '../../../quoting/state/policy';\nimport * as fromPolicyActions from '../../../quoting/state/policy/policy.actions';\nimport * as fromEmission from '../../../quoting/components/emission/state';\nimport * as fromEmissionActions from '../../../quoting/components/emission/state/emission.actions';\nimport * as fromQuote from '../../../quoting/components/quote/state';\nimport * as fromQuoteActions from '../../../quoting/components/quote/state/quote.actions';\nimport { IRoutes } from '@sura-platform/web/core/models/question/routes.interface';\nimport { switchMap, first } from 'rxjs/operators';\nimport { SelectComponent, ModalComponent } from '@sura-platform/web';\nimport { IPackage } from '@sura-platform/features/package';\nimport { NgbDateStruct } from '@ng-bootstrap/ng-bootstrap';\nimport { AnimationOptions } from 'ngx-lottie';\nimport { PolicyAdapter } from '../../../quoting/adapters/policy.adapter';\nimport { IPremium } from '@sura-platform/features/package/interfaces/premium.interface';\n\n@Component({\n  selector: 'sxf-client-tax-condition',\n  templateUrl: './client-tax-condition.component.html',\n  styleUrls: ['./client-tax-condition.component.scss']\n})\nexport class ClientTaxConditionComponent implements OnInit, OnDestroy {\n  lottieConfig: AnimationOptions = {\n    path: '/assets/loadings/sura-loader.json'\n  };\n  constructor(\n    private fb: FormBuilder,\n    private fiscalService: FiscalConditionService,\n    private iibbService: CrudIncomeService,\n    private storePolicy: Store<fromPolicy.State>,\n    private flowRouteEmissionService: FlowRouteEmissionService,\n    private storeEmission: Store<fromEmission.State>,\n    private quotingService: QuotingService,\n    private storeQuote: Store<fromQuote.State>,\n    private policyAdapter: PolicyAdapter\n  ) {}\n\n  @ViewChild('fiscalcondition')\n  fiscalConditionSelect: SelectComponent = <SelectComponent>{};\n  @ViewChild('iibb') iibbSelect: SelectComponent = <SelectComponent>{};\n\n  @ViewChild('modalFiscal') modalFiscal: ModalComponent = <ModalComponent>{};\n\n  @ViewChild('newCosts') modalNewCosts: ModalComponent = <ModalComponent>{};\n\n  /**\n   * Object any for pupulate the store\n   */\n  currentMotor: IVehicle = <IVehicle>{};\n\n  formClienTax: FormGroup = <FormGroup>{};\n\n  /**\n   * Variable Fiscal condition for get data from api\n   */\n  fiscalConditions$: Observable<IFiscalcondition[]> = new Observable();\n  /**\n   * Variable Crud income for get data from api\n   */\n  iibb$: Observable<ICrudIncome[]> = new Observable();\n\n  routes: IRoutes[] = <IRoutes[]>[];\n\n  currentPackageSelected: any;\n\n  client: IAccount = <IAccount>{};\n\n  /**\n   * variable to get policy from store\n   */\n  currentPolicy: IPolicy = <IPolicy>{};\n\n  packageSelected: IPackage = <IPackage>{};\n\n  arrayFiscalCondition: IFiscalcondition[] = <IFiscalcondition[]>[];\n  clientData: IAccount = <IAccount>{};\n  firstTimeFiscalCondition = false;\n\n  date: any;\n  maxDate: NgbDateStruct = <NgbDateStruct>{};\n  minDate: NgbDateStruct = <NgbDateStruct>{};\n  showCertified = false;\n  showIIBB = false;\n  showiibbNumber = false;\n  loadingCosts = false;\n  vehicles: IVehicle[] = <IVehicle[]>{};\n  firstTimeFiscalConditionChangeValue = false;\n  newQuote = '';\n  CONSUMIDOR_FINAL = 'consumidorFinal';\n  NORESPONSABLE = 'noResponsable';\n  arrCondFiscalOriginal: any[] = [];\n\n  disabledByRetrieve$: Subscription = new Subscription();\n  disabledByRetrieve = false;\n\n  ngOnInit() {\n    this.newQuote = '0';\n    const currentTime = new Date(Date.now());\n    const month = currentTime.getMonth() + 1;\n    const day = currentTime.getDate();\n    const year = currentTime.getFullYear();\n\n    this.date = {\n      day: day,\n      month: month,\n      year: year\n    };\n    this.firstTimeFiscalCondition = false;\n    this.firstTimeFiscalConditionChangeValue = false;\n    this.loadingCosts = false;\n    this.showIIBB = false;\n    this.showCertified = false;\n    this.showiibbNumber = true;\n\n    this.minDate = this.date;\n\n    this.maxDate = {\n      day: this.date.day,\n      month: month,\n      year: year + 10\n    };\n\n    combineLatest([\n      this.storePolicy.select(fromPolicy.getPolicyData),\n      this.storeQuote.select(fromQuote.getQuoteMotorData)\n    ])\n      .subscribe((data) => {\n        this.vehicles = data[0].motor.vehicles;\n        this.currentMotor = data[0].motor.vehicles.filter(\n          (c) => c.number === data[1].activeMotor\n        )[0];\n        this.currentPolicy = data[0];\n      })\n      .unsubscribe();\n\n    this.formClienTax = this.fb.group({\n      fiscalcondition: [\n        this.currentPolicy.fiscalcondition,\n        Validators.required\n      ],\n      iibb: [this.currentPolicy.iibb.type],\n      iibbNumber: [this.currentPolicy.iibb.number],\n      beginningValidity: [this.date],\n      endingValidity: []\n    });\n\n    this.iibb$ = this.iibbService.getAllCrudIncome();\n\n    this.storeEmission.select(fromEmission.getRoutes).subscribe((data) => {\n      this.routes = data;\n    });\n\n    // Si el cliente es existente maximo puedo mostrar 2 opciones\n\n    this.storePolicy\n      .select(fromPolicy.getPolicyData)\n      .subscribe((data) => {\n        const isLegalPerson = data.client.type === 'Company';\n        this.fiscalConditions$ = this.fiscalService\n          .getAllFiscalCondition()\n          .pipe(\n            switchMap((xa) => {\n              this.arrayFiscalCondition = xa;\n\n              let itemsFiscalConditionMandatory = this.CONSUMIDOR_FINAL;\n              if (isLegalPerson) {\n                itemsFiscalConditionMandatory = this.NORESPONSABLE;\n              }\n\n              let itemsFiscalCondition = [itemsFiscalConditionMandatory];\n              //si la condicion fiscal informada es diferente a la del cliente\n              if (\n                data.client.fiscalcondition !== itemsFiscalConditionMandatory\n              ) {\n                itemsFiscalCondition.push(<string>data.client.fiscalcondition);\n              }\n\n              let arrayConditionFiscal = [];\n\n              if (this.arrCondFiscalOriginal.length) {\n                itemsFiscalCondition = <string[]>this.arrCondFiscalOriginal;\n              }\n\n              //es cliente nuevo\n              if (data.client.contactid === null) {\n                let noCode = this.CONSUMIDOR_FINAL;\n                if (!isLegalPerson) {\n                  noCode = this.NORESPONSABLE;\n                }\n                arrayConditionFiscal = xa.filter((afc) => afc.code !== noCode);\n              } else {\n                arrayConditionFiscal = xa.filter((afc) =>\n                  itemsFiscalCondition.includes(afc.code)\n                );\n              }\n\n              if (\n                data.client.fiscalcondition !== data.fiscalcondition &&\n                !this.firstTimeFiscalCondition &&\n                data.client.contactid !== null\n              ) {\n                this.modalFiscal.openModal();\n              }\n\n              let options = { emitEvent: false, onlySelf: true };\n              if (!this.firstTimeFiscalCondition) {\n                this.firstTimeFiscalCondition = true;\n                options = { emitEvent: true, onlySelf: true };\n                this.activateCertifiedDates(data.client.fiscalcondition);\n                this.activateIIBB(data.client.fiscalcondition);\n                if (\n                  data.client.iibb &&\n                  data.client.iibb.type &&\n                  data.client.iibb.type !== null\n                )\n                  this.activateIIBBnumber(data.client.iibb.type);\n\n                this.arrCondFiscalOriginal = itemsFiscalCondition;\n              }\n\n              let fiscalConditionForm = data.client.fiscalcondition;\n              let iibbType = data.client.iibb?.type;\n\n              // caso en el que elijan una condicion fiscal que no corresponde con el tipo de persona\n              if (\n                arrayConditionFiscal.filter(\n                  (acf) => acf.code === data.client.fiscalcondition\n                ).length === 0 &&\n                data.client.contactid === null\n              ) {\n                if (isLegalPerson) {\n                  fiscalConditionForm = this.NORESPONSABLE;\n                  iibbType = iibbType || 'noInscripto';\n                } else {\n                  fiscalConditionForm = this.CONSUMIDOR_FINAL;\n                }\n                this.modalFiscal.openModal();\n              }\n\n              this.formClienTax.patchValue(\n                {\n                  fiscalcondition: fiscalConditionForm,\n                  iibb: iibbType,\n                  iibbNumber: data.client.iibb ? data.client.iibb.number : ''\n                },\n                options\n              );\n\n              return of(arrayConditionFiscal);\n            })\n          );\n      })\n      .unsubscribe();\n\n    this.formClienTax\n      .get('beginningValidity')\n      ?.valueChanges.subscribe((dateInit) => {\n        this.date = dateInit;\n        this.maxDate = {\n          day: this.date.day,\n          month: this.date.month,\n          year: this.date.year + 5\n        };\n      });\n\n    this.formClienTax.get('iibb')?.valueChanges.subscribe((iibb) => {\n      this.activateIIBBnumber(iibb);\n      this.updateCrudIncomeType(iibb);\n    });\n\n    this.formClienTax.get('fiscalcondition')?.valueChanges.subscribe((data) => {\n      let item = this.fiscalConditionSelect.getValue();\n      if (item === undefined) {\n        const fiscalTemp = this.arrayFiscalCondition.filter(\n          (afc) => afc.code === data\n        )[0];\n        item = fiscalTemp;\n      }\n\n      this.activateCertifiedDates(data);\n      this.activateIIBB(data);\n      this.updateConditionFiscal(item);\n\n      //FIXME: mejorar esto.. tengo que recotizar cada vez que ocurre un valuechange, pero no el 1ero..\n      //FIXME: porque el 1ero verifica si condiciones fiscales de cliente y cotizacion coinciden o no\n      if (!this.firstTimeFiscalConditionChangeValue) {\n        this.firstTimeFiscalConditionChangeValue = true;\n      } else {\n        this.callCost();\n      }\n    });\n\n    combineLatest([\n      this.storeEmission.select(fromEmission.getEmission),\n      this.storePolicy.select(fromPolicy.getFiscalCondition)\n    ]).subscribe((x) => {\n      const job = x[0].jobNumberFromQuotes;\n      const approved = x[0].approvedEmission;\n      const fiscalCondition = x[1];\n\n      this.disabledByRetrieve =\n        job && approved && fiscalCondition ? true : false;\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.disabledByRetrieve$) this.disabledByRetrieve$.unsubscribe();\n  }\n\n  activateCertifiedDates(data: any) {\n    if (data === 'inscriptoExentoPercepcion') {\n      //inscriptoExentoPercepcion\n      this.showCertified = true;\n      this.formClienTax\n        .get('beginningValidity')\n        ?.setValidators(Validators.required);\n      this.formClienTax\n        .get('endingValidity')\n        ?.setValidators(Validators.required);\n\n      if (\n        this.currentPolicy.client.certificate &&\n        this.currentPolicy.client.certificate.start !== null\n      ) {\n        const _dateInitFromStore = this.currentPolicy.client.certificate.start.toString();\n        const _dateInit = {\n          year: parseInt(_dateInitFromStore.substring(0, 4), 0),\n          month: parseInt(_dateInitFromStore.substring(5, 7), 0),\n          day: parseInt(_dateInitFromStore.substring(8, 10), 0)\n        };\n        const _dateEndFromStore = this.currentPolicy?.client?.certificate?.end?.toString();\n        const _dateEnd = {\n          year: parseInt(<string>_dateEndFromStore?.substring(0, 4), 0),\n          month: parseInt(<string>_dateEndFromStore?.substring(5, 7), 0),\n          day: parseInt(<string>_dateEndFromStore?.substring(8, 10), 0)\n        };\n        this.formClienTax.patchValue(\n          {\n            beginningValidity: _dateInit,\n            endingValidity: _dateEnd\n          },\n          { emitEvent: false, onlySelf: true }\n        );\n      }\n    } else {\n      this.showCertified = false;\n      this.formClienTax.get('beginningValidity')?.clearValidators();\n      this.formClienTax.get('beginningValidity')?.updateValueAndValidity();\n      this.formClienTax.get('endingValidity')?.clearValidators();\n      this.formClienTax.get('endingValidity')?.updateValueAndValidity();\n    }\n  }\n\n  activateIIBB(data: any) {\n    if (data !== this.CONSUMIDOR_FINAL) {\n      //inscriptoExentoPercepcion\n      this.showIIBB = true;\n      this.formClienTax.get('iibb')?.setValidators(Validators.required);\n      this.activateIIBBnumber(\n        this.currentPolicy.client.iibb && this.currentPolicy.client.iibb.type\n          ? this.currentPolicy.client.iibb.type\n          : ''\n      );\n    } else {\n      this.showIIBB = false;\n      this.formClienTax.get('iibb')?.clearValidators();\n      this.formClienTax.get('iibb')?.updateValueAndValidity();\n      this.activateIIBBnumber('');\n    }\n  }\n\n  activateIIBBnumber(data: any) {\n    if (\n      data === 'inscriptoConvenioMultilateral' ||\n      data === 'inscriptoConvenioLocal'\n    ) {\n      //inscriptoExentoPercepcion\n      this.showiibbNumber = true;\n      this.formClienTax.get('iibbNumber')?.setValidators(Validators.required);\n    } else {\n      this.showiibbNumber = false;\n      this.formClienTax.get('iibbNumber')?.clearValidators();\n      this.formClienTax.get('iibbNumber')?.updateValueAndValidity();\n    }\n  }\n\n  updateConditionFiscal(fiscalCondition: any) {\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetCurrentFiscalConditionAction(\n        fiscalCondition.code\n      )\n    );\n  }\n\n  updateCrudIncomeType(type: string) {\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetCurrentCrudIncomeTypeAction(type)\n    );\n  }\n\n  continue() {\n    const iibbSavedContinue = this.formClienTax.get('iibb')?.value;\n    const iibbNumberSavedContinue = this.formClienTax.get('iibbNumber')?.value;\n    const conditionFiscalSavedContinue = this.currentPolicy.fiscalcondition;\n\n    if (conditionFiscalSavedContinue === 'inscriptoExentoPercepcion') {\n      const dateInit = this.formClienTax.get('beginningValidity')?.value;\n      const dateEnd = this.formClienTax.get('endingValidity')?.value;\n\n      let isoDatebeginningValidity =\n        dateInit.year + '-' + dateInit.month + '-' + dateInit.day;\n      isoDatebeginningValidity = new Date(\n        isoDatebeginningValidity\n      ).toISOString();\n\n      let isoDateendingValidity =\n        dateEnd.year + '-' + dateEnd.month + '-' + dateEnd.day;\n      isoDateendingValidity = new Date(isoDateendingValidity).toISOString();\n\n      const certificate = {\n        start: isoDatebeginningValidity,\n        end: isoDateendingValidity\n      };\n      this.storePolicy.dispatch(\n        new fromPolicyActions.SetCertificateAction(certificate)\n      );\n    }\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetCurrentCrudIncomeTypeAction(iibbSavedContinue)\n    );\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetCurrentCrudIncomeNumberAction(\n        iibbNumberSavedContinue\n      )\n    );\n\n    this.storePolicy.dispatch(\n      new fromPolicyActions.SetCurrentCrudIncomeClientAndInsuredAction({\n        code: iibbSavedContinue,\n        description: '',\n        type: iibbSavedContinue,\n        number: iibbNumberSavedContinue\n      })\n    );\n\n    // const fiscalConditionDescription = this.currentPolicy.fiscalconditionDesc;\n\n    //si es cliente nuevo, entonces le seteo por defecto la condicion fiscal\n    if (this.currentPolicy.client.contactid === null) {\n      this.storePolicy.dispatch(\n        new fromPolicyActions.SetCurrentFiscalConditionClientAndInsuredAction(\n          this.currentPolicy.fiscalcondition\n        )\n      );\n    }\n\n    this.flowRouteEmissionService.enableRoute(this.routes, 'validity');\n\n    this.storeEmission.dispatch(\n      new fromEmissionActions.SetActiveRoute('validity')\n    );\n\n    let iibbDescription = '';\n    if (this.showIIBB) {\n      iibbDescription = this.iibbSelect.getValue().description;\n    }\n\n    this.routes.forEach((element) => {\n      if (element.path === 'tax-condition') {\n        element.value =\n          this.arrayFiscalCondition.filter(\n            (f) => f.code === this.formClienTax.get('fiscalcondition')?.value\n          )[0].description +\n          ' ' +\n          iibbDescription;\n      }\n    });\n\n    if (this.formClienTax.valid) {\n      this.storeEmission.dispatch(\n        new fromEmissionActions.SetFormEmissionValidityIsValidAction(true)\n      );\n    }\n\n    this.flowRouteEmissionService.enableRoute(this.routes, 'validity');\n  }\n\n  closeModal() {\n    this.modalFiscal.closeModal();\n    this.callCost();\n  }\n\n  closeModalNewCosts() {\n    this.modalNewCosts.closeModal();\n  }\n\n  onEnter() {\n    if (this.formClienTax.valid) {\n      this.continue();\n    }\n  }\n\n  callCost() {\n    this.loadingCosts = true;\n    this.modalNewCosts.openModal();\n\n    this.storePolicy\n      .select(fromPolicy.getPolicyData)\n      .pipe(\n        first(),\n        switchMap((policy) => {\n          const adapted = this.policyAdapter.adapt(policy);\n\n          adapted.motor.vehicles?.forEach((v) => {\n            v.packages = <IPackage[]>v?.packages?.filter((p) => p.selected);\n          });\n\n          return this.quotingService.getCosts(adapted);\n        })\n      )\n      .subscribe((newCosts) => {\n        // Solo guardaré en costs la cotización del vehículo actual\n        const packageSelected = this.currentMotor?.packages?.find(\n          (p) => p.selected\n        );\n\n        this.storePolicy.dispatch(\n          new fromPolicyActions.UpdateCostsAction(\n            newCosts.costs?.filter((c: any) =>\n              c.externalId\n                .split('&')\n                .includes(\n                  `${this.currentPolicy.productcode},${this.currentMotor.number},${packageSelected?.code}`\n                )\n            )\n          )\n        );\n\n        this.vehicles.forEach((v) => {\n          // Actualizar premiums con el resultado de la nueva cotización\n          const selected = v?.packages?.find((p) => p.selected);\n\n          // Buscar error en motor.errors de este vehículo y paquete\n          const error = newCosts.motor.errors?.find((e: any) =>\n            e.externalId\n              .split('&')\n              .includes(\n                `${this.currentPolicy.productcode},${v.number},${selected?.code}`\n              )\n          );\n\n          // Busco los datos del paquete con la nueva cotización si existiera\n          const newPackage = newCosts.motor.vehicles\n            ?.find((costVehicle: any) => costVehicle.number === v.number)\n            ?.packages.find((p: any) => p.code === selected?.code);\n\n          if (!error?.code) {\n            if (selected) {\n              selected.premiums = newPackage?.premiums;\n            }\n            this.newQuote = newCosts.costs\n              ?.find((c: any) =>\n                c.externalId\n                  .split('&')\n                  .includes(\n                    `${this.currentPolicy.productcode},${v.number},${selected?.code}`\n                  )\n              )\n              .invoice.toString();\n            this.newQuote = <string>this.newQuote\n              ? parseFloat(this.newQuote).toFixed(2)\n              : '';\n          } else {\n            if (selected) {\n              selected.premiums = <IPremium>{};\n            }\n            this.newQuote = '';\n          }\n        });\n\n        this.storePolicy.dispatch(\n          new fromPolicyActions.UpdateVehicleAction(this.vehicles)\n        );\n\n        this.storeQuote.dispatch(\n          new fromQuoteActions.SetCostsResponseAction(newCosts)\n        );\n\n        this.loadingCosts = false;\n      });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable, of, combineLatest } from 'rxjs';\nimport { switchMap, first } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport * as fromEmission from '../state';\nimport * as fromEmissionActions from '../state/emission.actions';\nimport * as fromPolicy from '../../../state/policy';\nimport * as fromPolicyActions from '../../../state/policy/policy.actions';\n\nimport {\n  AccountService,\n  QuotesService,\n  UtilService,\n  IVehicle,\n  IPayment,\n  IPolicy,\n  IOfficialIds,\n  IAccount,\n  VehicleGroup,\n  IPaymentPlan,\n  IAddress,\n  IDiscount,\n  ICost,\n  IMotorError\n} from '@sura-platform/features';\n\nimport * as moment from 'moment';\nimport { MOTOR_CONF } from '../../motor/motor.config';\n\n@Injectable()\nexport class QuoteResolver implements Resolve<Observable<any>> {\n  /**\n   * Current date and time of\n   * the server.\n   *\n   * @type {string}\n   * @memberof QuoteResolver\n   */\n  serverDate: string | null = null;\n\n  /**\n   * Flag used to detect if payment.period\n   * should be modified or not.\n   *\n   * @type {boolean}\n   * @memberof QuoteResolver\n   */\n  approved: boolean | null = null;\n\n  constructor(\n    private quotesService: QuotesService,\n    private accountService: AccountService,\n    private storeEmission: Store<fromEmission.State>,\n    private storePolicy: Store<fromPolicy.State>,\n    private utilService: UtilService\n  ) {}\n\n  resolve() {\n    return combineLatest([\n      this.storePolicy.select(fromPolicy.getJob),\n      this.storeEmission.select(fromEmission.getEmission),\n      this.utilService.getCurrentServerDate()\n    ]).pipe(\n      switchMap((x) => {\n        const jobFromPolicy = x[0].number;\n        const jobFromEmission = x[1].jobNumberFromQuotes;\n        this.serverDate = x[2].datetime;\n        this.approved = x[1].approvedEmission;\n\n        // Si no hay jobnumber en policy, entonces no cargo RETRIEVE\n        if (jobFromPolicy !== null) return of(true);\n\n        // Si no hay jobnumber en emission, entonces no cargo RETRIEVE\n        if (!jobFromEmission || jobFromEmission === '') return of(true);\n\n        // En caso de que haya jobnumber en emission entonces hago el RETRIEVE\n        return this.quotesService.getQuote(jobFromEmission).pipe(\n          switchMap(async (retrieve) => {\n            this.fillPolicyAttributes(retrieve);\n\n            // Si obtener información sobre el usuario en guidewire\n            const officialId = retrieve.client?.officialids?.find(\n              (id) => id.primary\n            );\n            await this.getAccountInfo(officialId as IOfficialIds, retrieve);\n\n            // ML: En Emission guardo el ID del policy.address\n            this.storeEmission.dispatch(\n              new fromEmissionActions.SetPolicyAddressFromQuotesAction(\n                retrieve.address as IAddress\n              )\n            );\n            return of(true);\n          })\n        );\n      }),\n      first()\n    );\n  }\n\n  private fillPolicyAttributes(policy: Partial<IPolicy>) {\n    // Jobtype\n    policy = {\n      ...policy,\n      job: {\n        ...policy?.job,\n        type: 'Submission'\n      } as {\n        number: string;\n        type: string;\n      }\n    };\n\n    // Completo los campos faltantes en retrieve para payment y paymentTerm\n    const payment: IPayment = {\n      method: null,\n      plan: {\n        code: null\n      },\n      cbu: {\n        alias: null,\n        conduit: null,\n        number: null\n      },\n      creditcard: {\n        expirationdate: null,\n        number: null,\n        type: null\n      },\n      id: null\n    };\n\n    const paymentTerm: IPaymentPlan = {\n      code: policy?.payment?.plan?.code as string,\n      description: null,\n      maximumnumberofinstallments: null\n    };\n\n    policy.payment = {\n      ...payment,\n      ...policy.payment\n    };\n\n    policy.paymentTerm = {\n      ...paymentTerm,\n      ...policy.paymentTerm\n    };\n\n    this.populatePeriod(policy);\n\n    // En policy agrego el document type y number del cliente\n    const officialid = policy?.client?.officialids?.find((id) => id.primary);\n\n    policy = {\n      ...policy,\n      client: {\n        ...policy.client,\n        documentNumber: officialid?.value as string,\n        documentType: officialid?.type as string\n      } as IAccount,\n      motor: {\n        ...policy.motor,\n        fleet: 'NonFleet',\n        vehicles: policy?.motor?.vehicles?.sort((a, b) => {\n          if (a.number && b.number) {\n            return a?.number - b?.number;\n          }\n          return a.number as number;\n        })\n      } as {\n        fleet: string;\n        vehicles: Array<IVehicle>;\n        discounts: IDiscount[];\n        commission: {\n          producer: number;\n        };\n        costs: ICost[];\n        errors?: Array<IMotorError>;\n      }\n    };\n\n    policy?.motor?.discounts?.forEach((discount) => {\n      discount.value = Math.abs(discount.value);\n    });\n\n    // Esto es para meter package dentro del arreglo packages\n    policy?.motor?.vehicles?.forEach((vehicle: Partial<IVehicle>) => {\n      // No tengo ID desde retrieve\n      vehicle.id = vehicle.number;\n\n      // ML: Sin estos campos en el objeto, falla en emission\n      vehicle.group = this.findVehicleGroup(vehicle?.model?.type as string);\n      vehicle.license = vehicle.license || null;\n\n      // Sumas aseguradas y base\n      vehicle.statedamount = vehicle.model?.statementamount;\n\n      if (!vehicle.zerokm && vehicle.model) {\n        vehicle.model.statementamount = vehicle.model.originalcostnew;\n        vehicle.model.originalcostnew = 0;\n      }\n\n      // Detectar si el conductor es el cliente\n      let clientIsDriver = false;\n      const driver = vehicle.driver;\n      const client = policy.client;\n\n      if (driver) {\n        if (\n          client?.firstname?.toLowerCase() ===\n            driver?.firstname?.toLowerCase() &&\n          client?.lastname?.toLowerCase() === driver?.lastname?.toLowerCase()\n        ) {\n          clientIsDriver = true;\n        }\n      }\n\n      vehicle.driver = {\n        firstname: null,\n        lastname: null,\n        birth: null,\n        gender: null,\n        clientIsDriver,\n        ...vehicle.driver\n      };\n\n      if (!vehicle.bondholder) {\n        vehicle.bondholder = {\n          finish: null,\n          firstinstallmentdue: null,\n          number: null,\n          quotas: null,\n          start: null,\n          type: null\n        };\n      } else {\n        vehicle.bondholder.type = Number(vehicle.bondholder.type);\n      }\n\n      if (vehicle.package) {\n        // Buscar la descripción del paquete en JSON\n        let pkgDescription = '';\n        MOTOR_CONF?.find(\n          (v) => v.vehicleType === vehicle.group\n        )?.package?.forEach((pkg) => {\n          pkg?.packages?.forEach((pkgs) => {\n            if (pkgs?.code === vehicle?.package?.code) {\n              // Este campo es necesario para identificar a qué grupo corresponde\n              // esta cotización\n              vehicle.package.group = pkg.code;\n\n              pkgDescription = pkgs.description;\n              return;\n            }\n          });\n        });\n        vehicle.package.description = pkgDescription;\n        vehicle.package.selected = true;\n        vehicle.package.externalid = `${vehicle.number}_${vehicle.package.code}`;\n\n        vehicle.packages = [];\n        vehicle.packages.push(vehicle.package);\n      }\n    });\n\n    this.storePolicy.dispatch(new fromPolicyActions.SetPolicyAction(policy));\n  }\n\n  private getAccountInfo(\n    officialid: IOfficialIds,\n    policy: Partial<IPolicy>\n  ): Promise<IAccount> {\n    const data: any = {\n      officialid\n    };\n\n    return new Promise((res, rej) => {\n      this.accountService.getAccounts(data).subscribe((account) => {\n        if (!account) {\n          const client = policy.client;\n\n          this.storeEmission.dispatch(\n            new fromEmissionActions.SetBasicDataForClientAction(\n              client?.type as string,\n              client?.companyname?.toUpperCase() as string,\n              client?.firstname?.toUpperCase() as string,\n              client?.lastname?.toUpperCase() as string,\n              client?.contactid as string,\n              client?.documentNumber as string,\n              client?.documentType as string,\n              client?.address as IAddress\n            )\n          );\n\n          return res();\n        }\n\n        account.documentNumber = officialid.value;\n        account.documentType = officialid.type;\n\n        if (policy?.client?.address?.id) {\n          const address = account?.addresses?.find(\n            (add) => add.id === policy?.client?.address?.id\n          );\n\n          account.address = address\n            ? address\n            : {\n                apartment: null,\n                city: null,\n                clarification: null,\n                floor: null,\n                id: null,\n                postalcode: null,\n                state: null,\n                street: null,\n                streetnumber: null,\n                type: null\n              };\n        }\n\n        this.storePolicy.dispatch(\n          new fromPolicyActions.SetClientDataAction(account)\n        );\n        this.storeEmission.dispatch(\n          new fromEmissionActions.SetClientData(account)\n        );\n        res(account);\n      }, rej);\n    });\n  }\n\n  /**\n   * Method used for find the vehicle group\n   *\n   * @private\n   * @param {string} type\n   * @returns {(VehicleGroup | null)}\n   * @memberof QuoteResolver\n   */\n  private findVehicleGroup(type: string): VehicleGroup | null {\n    return MOTOR_CONF.find((conf) => conf.types.includes(type))\n      ?.vehicleType as VehicleGroup | null;\n  }\n\n  /**\n   * Method used to change period properties\n   * when the policy does not come from\n   * an approved issue.\n   *\n   * @private\n   * @param {Partial<IPolicy>} policy\n   * @returns\n   * @memberof QuoteResolver\n   */\n  private populatePeriod(policy: Partial<IPolicy>) {\n    const currentDate = moment(this.serverDate);\n    let methodName: string;\n    let methodMonths: number;\n\n    if (this.approved) {\n      return;\n    }\n\n    if (!policy.period) {\n      policy.period = {\n        start: currentDate.toDate(),\n        end: null,\n        method: null,\n        rate: null\n      };\n\n      return;\n    }\n\n    switch (policy.period.method) {\n      case 'Sura_ThreeMonths':\n        methodName = 'Sura_ThreeMonths';\n        methodMonths = 3;\n        break;\n\n      default:\n        methodName = 'Sura_ThreeMonths';\n        methodMonths = 3;\n    }\n\n    const start = currentDate.toDate();\n    const end = currentDate.clone().add(methodMonths, 'months').toDate();\n\n    policy.period = {\n      start,\n      end,\n      method: methodName,\n      rate: undefined\n    };\n  }\n}\n","import { Routes, RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { emissionReducer } from './state/emission.reducer';\nimport { EmissionComponent } from './emission.component';\n\nimport {\n  EmissionQuestionsComponent,\n  ValidityComponent,\n  PaymentMethodComponent,\n  ClientTaxConditionComponent\n} from './components';\nimport { ClientDataComponent } from '../../../client/components/client-data/client-data.component';\nimport { ClientResidenceComponent } from '../../../client/components/client-residence/client-residence.component';\nimport { OthersMotorComponent } from '../motor/components/others/others.component';\nimport { QuoteResolver } from './services/quote.resolver';\nimport JSON_CONF from '../motor/motor.config.json';\nimport { IMotorConfiguration } from '../motor/motor.config';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EmissionComponent,\n    resolve: { data: QuoteResolver },\n    children: [\n      {\n        path: 'questions',\n        component: EmissionQuestionsComponent,\n        children: [\n          {\n            path: 'client',\n            component: ClientDataComponent,\n            data: {\n              question: 'Algunos datos más de tu cliente',\n              show: true,\n              disabled: false,\n              value: '',\n              shortName: 'Cliente',\n              config: <IMotorConfiguration>JSON_CONF\n            }\n          },\n          {\n            path: 'residence',\n            component: ClientResidenceComponent,\n            data: {\n              question: '¿Cual es tu domicilio?',\n              show: true,\n              disabled: true,\n              value: '',\n              shortName: '¿Este es el domicilio fiscal?'\n            }\n          },\n          {\n            path: 'tax-condition',\n            component: ClientTaxConditionComponent,\n            data: {\n              question: '¿Cuál es la condición fiscal?',\n              show: true,\n              disabled: true,\n              value: '',\n              shortName: 'Condicion fiscal'\n            }\n          },\n          {\n            path: 'validity',\n            component: ValidityComponent,\n            data: {\n              question: '¿Cuál es el inicio de vigencia?',\n              show: true,\n              disabled: true,\n              value: '',\n              shortName: 'Inicio de vigencia'\n            }\n          },\n          {\n            path: 'aditionalauto/:id',\n            component: OthersMotorComponent,\n            data: {\n              question: '¿Cuál es le número de chasis y de motor?',\n              show: true,\n              disabled: true,\n              value: '',\n              shortName: 'Chasis y motor'\n            }\n          },\n          {\n            path: 'payment-method',\n            component: PaymentMethodComponent,\n            data: {\n              question: '¿Cómo lo quiere pagar?',\n              show: true,\n              disabled: true,\n              value: '',\n              shortName: 'payment'\n            }\n          }\n        ]\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes),\n    StoreModule.forFeature('emission', emissionReducer)\n  ],\n  exports: [RouterModule],\n  providers: []\n})\nexport class EmissionRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { EmissionRoutingModule } from './emission-routing.routing';\nimport { SharedModule } from '../../../shared/shared.module';\nimport { PeriodMethodPipe, CardNumberPipe } from '@sura-platform/core';\nimport { EMISSION_COMPONENTS } from './components';\nimport { LottieModule } from 'ngx-lottie';\nimport {\n  GenderService,\n  IdentificationService,\n  DocumentationService,\n  AccountService,\n  NationalityService,\n  AddressTypeService,\n  MaritalStatusService,\n  ClienteNService,\n  PatentBlackListService,\n  QuotesService,\n  PatentUseService,\n  BondholderService\n} from '@sura-platform/features';\nimport { FlowRouteEmissionService } from './services/flow-route-emission.service';\nimport { QuoteResolver } from './services/quote.resolver';\n\nexport function playerFactory() {\n  return import('lottie-web');\n}\n@NgModule({\n  imports: [\n    SharedModule,\n    EmissionRoutingModule,\n    LottieModule.forRoot({ player: playerFactory })\n  ],\n  exports: [...EMISSION_COMPONENTS],\n  declarations: [EMISSION_COMPONENTS],\n  providers: [\n    GenderService,\n    IdentificationService,\n    DocumentationService,\n    FlowRouteEmissionService,\n    AccountService,\n    NationalityService,\n    PeriodMethodPipe,\n    CardNumberPipe,\n    AddressTypeService,\n    MaritalStatusService,\n    ClienteNService,\n    PatentBlackListService,\n    QuoteResolver,\n    QuotesService,\n    PatentUseService,\n    BondholderService\n  ]\n})\nexport class EmissionModule { }\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar subscribeToArray_1 = require(\"./subscribeToArray\");\nvar subscribeToPromise_1 = require(\"./subscribeToPromise\");\nvar subscribeToIterable_1 = require(\"./subscribeToIterable\");\nvar subscribeToObservable_1 = require(\"./subscribeToObservable\");\nvar isArrayLike_1 = require(\"./isArrayLike\");\nvar isPromise_1 = require(\"./isPromise\");\nvar isObject_1 = require(\"./isObject\");\nvar iterator_1 = require(\"../symbol/iterator\");\nvar observable_1 = require(\"../symbol/observable\");\nexports.subscribeTo = function (result) {\n    if (!!result && typeof result[observable_1.observable] === 'function') {\n        return subscribeToObservable_1.subscribeToObservable(result);\n    }\n    else if (isArrayLike_1.isArrayLike(result)) {\n        return subscribeToArray_1.subscribeToArray(result);\n    }\n    else if (isPromise_1.isPromise(result)) {\n        return subscribeToPromise_1.subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[iterator_1.iterator] === 'function') {\n        return subscribeToIterable_1.subscribeToIterable(result);\n    }\n    else {\n        var value = isObject_1.isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.observable = (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar InnerSubscriber_1 = require(\"../InnerSubscriber\");\nvar subscribeTo_1 = require(\"./subscribeTo\");\nvar Observable_1 = require(\"../Observable\");\nfunction subscribeToResult(outerSubscriber, result, outerValue, outerIndex, innerSubscriber) {\n    if (innerSubscriber === void 0) { innerSubscriber = new InnerSubscriber_1.InnerSubscriber(outerSubscriber, outerValue, outerIndex); }\n    if (innerSubscriber.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable_1.Observable) {\n        return result.subscribe(innerSubscriber);\n    }\n    return subscribeTo_1.subscribeTo(result)(innerSubscriber);\n}\nexports.subscribeToResult = subscribeToResult;\n//# sourceMappingURL=subscribeToResult.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar hostReportError_1 = require(\"./hostReportError\");\nexports.subscribeToPromise = function (promise) { return function (subscriber) {\n    promise.then(function (value) {\n        if (!subscriber.closed) {\n            subscriber.next(value);\n            subscriber.complete();\n        }\n    }, function (err) { return subscriber.error(err); })\n        .then(null, hostReportError_1.hostReportError);\n    return subscriber;\n}; };\n//# sourceMappingURL=subscribeToPromise.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar canReportError_1 = require(\"./util/canReportError\");\nvar toSubscriber_1 = require(\"./util/toSubscriber\");\nvar observable_1 = require(\"./symbol/observable\");\nvar pipe_1 = require(\"./util/pipe\");\nvar config_1 = require(\"./config\");\nvar Observable = (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber_1.toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config_1.config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError_1.canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[observable_1.observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipe_1.pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexports.Observable = Observable;\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config_1.config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.subscribeToArray = function (array) { return function (subscriber) {\n    for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n        subscriber.next(array[i]);\n    }\n    subscriber.complete();\n}; };\n//# sourceMappingURL=subscribeToArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\nexports.hostReportError = hostReportError;\n//# sourceMappingURL=hostReportError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar Subscription_1 = require(\"../Subscription\");\nfunction scheduleArray(input, scheduler) {\n    return new Observable_1.Observable(function (subscriber) {\n        var sub = new Subscription_1.Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\nexports.scheduleArray = scheduleArray;\n//# sourceMappingURL=scheduleArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar config_1 = require(\"./config\");\nvar hostReportError_1 = require(\"./util/hostReportError\");\nexports.empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError_1.hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isFunction(x) {\n    return typeof x === 'function';\n}\nexports.isFunction = isFunction;\n//# sourceMappingURL=isFunction.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\nexports.isPromise = isPromise;\n//# sourceMappingURL=isPromise.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isScheduler_1 = require(\"../util/isScheduler\");\nvar isArray_1 = require(\"../util/isArray\");\nvar OuterSubscriber_1 = require(\"../OuterSubscriber\");\nvar subscribeToResult_1 = require(\"../util/subscribeToResult\");\nvar fromArray_1 = require(\"./fromArray\");\nvar NONE = {};\nfunction combineLatest() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var resultSelector = null;\n    var scheduler = null;\n    if (isScheduler_1.isScheduler(observables[observables.length - 1])) {\n        scheduler = observables.pop();\n    }\n    if (typeof observables[observables.length - 1] === 'function') {\n        resultSelector = observables.pop();\n    }\n    if (observables.length === 1 && isArray_1.isArray(observables[0])) {\n        observables = observables[0];\n    }\n    return fromArray_1.fromArray(observables, scheduler).lift(new CombineLatestOperator(resultSelector));\n}\nexports.combineLatest = combineLatest;\nvar CombineLatestOperator = (function () {\n    function CombineLatestOperator(resultSelector) {\n        this.resultSelector = resultSelector;\n    }\n    CombineLatestOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));\n    };\n    return CombineLatestOperator;\n}());\nexports.CombineLatestOperator = CombineLatestOperator;\nvar CombineLatestSubscriber = (function (_super) {\n    __extends(CombineLatestSubscriber, _super);\n    function CombineLatestSubscriber(destination, resultSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.resultSelector = resultSelector;\n        _this.active = 0;\n        _this.values = [];\n        _this.observables = [];\n        return _this;\n    }\n    CombineLatestSubscriber.prototype._next = function (observable) {\n        this.values.push(NONE);\n        this.observables.push(observable);\n    };\n    CombineLatestSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            this.active = len;\n            this.toRespond = len;\n            for (var i = 0; i < len; i++) {\n                var observable = observables[i];\n                this.add(subscribeToResult_1.subscribeToResult(this, observable, observable, i));\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n        if ((this.active -= 1) === 0) {\n            this.destination.complete();\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var values = this.values;\n        var oldVal = values[outerIndex];\n        var toRespond = !this.toRespond\n            ? 0\n            : oldVal === NONE ? --this.toRespond : this.toRespond;\n        values[outerIndex] = innerValue;\n        if (toRespond === 0) {\n            if (this.resultSelector) {\n                this._tryResultSelector(values);\n            }\n            else {\n                this.destination.next(values.slice());\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, values);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return CombineLatestSubscriber;\n}(OuterSubscriber_1.OuterSubscriber));\nexports.CombineLatestSubscriber = CombineLatestSubscriber;\n//# sourceMappingURL=combineLatest.js.map"]}