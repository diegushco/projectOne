function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(s){r=!0,i=s}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{lRTb:function(e,t,n){"use strict";n.r(t),n.d(t,"MobilityModule",(function(){return Y}));var o=n("2kYt"),r=n("sEIs"),i=n("nIj0"),l=n("ZTXN"),a=n("bwdy"),s=n("HM3f"),d=n("3mST"),c=n("8j5Y"),u=n("TLy2"),m=n("YtkY"),p=n("c2re"),v=n.n(p),f=n("HHj5"),h=n("+E71"),b=n("jCLe"),g=n("EM62"),y=n("sN6X"),S=n("qgZ/"),C=n("YroZ"),E=n("BJIp"),_=n("GobW"),O=n("+m/I"),A=n("NcZ/"),I=n("Fv+M"),w=n("SVrd"),M=["t"];function x(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"p"),g["\u0275\u0275text"](1," Este producto no est\xe1 habilitado para la cobertura seleccionada. Si quieres sumar Movilidad tendr\xe1s que cambiar de cobertura. "),g["\u0275\u0275elementEnd"]())}function T(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementStart"](1,"div",25),g["\u0275\u0275elementStart"](2,"div",26),g["\u0275\u0275elementStart"](3,"label",27),g["\u0275\u0275text"](4,"Suma asegurada"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](5,"sxf-select",28),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",29),g["\u0275\u0275elementStart"](7,"div",30),g["\u0275\u0275element"](8,"img",31),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",32),g["\u0275\u0275elementStart"](10,"span"),g["\u0275\u0275text"](11," Robo y da\xf1o por uso de Bicicleta/Monopatin/Skates/Rollers "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"div",25),g["\u0275\u0275elementStart"](13,"div",30),g["\u0275\u0275element"](14,"img",33),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"div",32),g["\u0275\u0275elementStart"](16,"span"),g["\u0275\u0275text"](17,"Accidentes personales"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",25),g["\u0275\u0275elementStart"](19,"div",30),g["\u0275\u0275element"](20,"img",34),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"div",32),g["\u0275\u0275elementStart"](22,"span"),g["\u0275\u0275text"](23,"Robo al desplazarse"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"div",25),g["\u0275\u0275elementStart"](25,"div",30),g["\u0275\u0275element"](26,"img",35),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](27,"div",32),g["\u0275\u0275elementStart"](28,"span"),g["\u0275\u0275text"](29,"Da\xf1os a terceros"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](30,"div",25),g["\u0275\u0275elementStart"](31,"div",30),g["\u0275\u0275element"](32,"img",36),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](33,"div",32),g["\u0275\u0275elementStart"](34,"span"),g["\u0275\u0275text"](35,"Asistencia Movilidad"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](5),g["\u0275\u0275classMap"]("custom"),g["\u0275\u0275property"]("items",n.mobility)("multiple",!1)("searchable",!0)("placeholder","Seleccione suma asegurada")("dropdownPosition","bottom")}}var k=function(){return{suppressScrollY:!1}};function P(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",1),g["\u0275\u0275elementStart"](1,"div",2),g["\u0275\u0275elementStart"](2,"div",3),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"div",4),g["\u0275\u0275elementStart"](5,"div",5),g["\u0275\u0275elementStart"](6,"div",6),g["\u0275\u0275elementStart"](7,"span",7),g["\u0275\u0275text"](8,"Nuevo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"a",8),g["\u0275\u0275element"](10,"sxf-icon",9),g["\u0275\u0275elementStart"](11,"span",10),g["\u0275\u0275text"](12,"Info sobre Movilidad Sura"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](13,"div",5),g["\u0275\u0275elementStart"](14,"div",6),g["\u0275\u0275elementStart"](15,"label",11),g["\u0275\u0275text"](16," \xbfQuer\xe9s sumar el seguro de Movilidad a tu p\xf3liza? "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](17,"div",2),g["\u0275\u0275elementStart"](18,"div",12),g["\u0275\u0275elementStart"](19,"div",13,14),g["\u0275\u0275element"](21,"input",15),g["\u0275\u0275elementStart"](22,"label",16),g["\u0275\u0275text"](23," \xa0\xa0S\xed, quiero sumarla "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](24,x,2,0,"ng-template",null,17,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"div",18),g["\u0275\u0275elementStart"](27,"div",19),g["\u0275\u0275element"](28,"input",20),g["\u0275\u0275elementStart"](29,"label",21),g["\u0275\u0275text"](30," \xa0\xa0No, no quiero sumarla "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](31,T,36,7,"ng-container",22),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](32,"div",23),g["\u0275\u0275elementStart"](33,"sxf-summarycoverage",24),g["\u0275\u0275listener"]("allowCost",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().allowCost()})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var o=g["\u0275\u0275reference"](25),r=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("formGroup",r.form),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("perfectScrollbar",g["\u0275\u0275pureFunction0"](6,k)),g["\u0275\u0275advance"](17),g["\u0275\u0275property"]("ngbTooltip",o)("triggers",null),g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngIf","on"===r.form.get("yes").value),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("loadingCost",r.loadingCost)}}var j,L,D,R=[{path:"",component:(j=function(){function e(t,n,o,r,i,s,d){_classCallCheck(this,e),this.fb=t,this.storePolicy=n,this.storeQuote=o,this.policyAdapter=r,this.additionalService=i,this.quotingService=s,this.routeExtService=d,this.disabledTooltip={},this.policy={},this.vehicles=[],this.currentVehicle={},this.form={},this.mobility=[],this.mobilityPkg={},this.mobilityCompleted=new l.a,this.callCost$=new l.a,this.loadingCost=!1,this.MOBILITY_CODE="SURA_CA7_MobilityTheftDamageCov",this.MOBILITY_DEFAULT="SURA_CA7_MobilityTheftDamageOpt3",this.callCostSubscription=new a.a,this.formChangesSubscription=new a.a,this.getQuoteSubscription=new a.a,this.fromUrl=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.fromUrl=this.routeExtService.getPreviousUrl().split("/")[2],this.storeQuote.dispatch(new b.x(!0)),this.createForm(),this.loadFromStore(),this.callCostSubscription=this.callCost$.pipe(Object(d.a)(1),Object(c.a)((function(){return e.loadingCost=!0})),Object(u.a)((function(){var t=v()(e.policy);return t.motor.vehicles.forEach((function(e){var t;e.packages=null===(t=null==e?void 0:e.packages)||void 0===t?void 0:t.filter((function(e){return e.selected}))})),e.quotingService.getCosts(e.policyAdapter.adapt(t))}))).subscribe((function(t){return e.handleCost(t)}))}},{key:"ngAfterViewInit",value:function(){this.currentVehicle?this.disabledTooltip.disableTooltip=!0:(this.disabledTooltip.autoClose=!1,this.disabledTooltip.open())}},{key:"ngOnDestroy",value:function(){var e,t;null===(e=this.callCostSubscription)||void 0===e||e.unsubscribe(),null===(t=this.formChangesSubscription)||void 0===t||t.unsubscribe()}},{key:"createForm",value:function(){var e=this;this.form=this.fb.group({yes:["off",i.Validators.required],coverageSum:[]}),this.form.disable(),this.formChangesSubscription=Object(s.a)([this.form.valueChanges.pipe(Object(d.a)(1)),this.mobilityCompleted]).subscribe((function(t){var n,o,r,i,l=_slicedToArray(t,1)[0];if(e.currentVehicle){var a=null===(n=e.currentVehicle.packages)||void 0===n?void 0:n.find((function(e){return e.selected})),s=v()(null===(o=null==a?void 0:a.coverages)||void 0===o?void 0:o.find((function(t){return t.pattern.code===e.MOBILITY_CODE})));a.coverages=null===(r=null==a?void 0:a.coverages)||void 0===r?void 0:r.filter((function(t){return t.pattern.code!==e.MOBILITY_CODE})),"on"===l.yes&&l.coverageSum&&e.mobilityPkg&&(e.mobilityPkg.terms[0].value=l.coverageSum,a.coverages=[].concat(_toConsumableArray(a.coverages),[e.mobilityPkg])),e.storeQuote.dispatch(new b.w(e.form.valid));var d=null===(i=null==a?void 0:a.coverages)||void 0===i?void 0:i.find((function(t){return t.pattern.code===e.MOBILITY_CODE}));d="object"==typeof(null==d?void 0:d.terms[0].value)?null==d?void 0:d.terms[0].value.current:null==d?void 0:d.terms[0].value,(null==s?void 0:s.terms[0].value)!==d&&e.callCost$.next()}}))}},{key:"loadFromStore",value:function(){var e=this;this.storePolicy.select(f.p).subscribe((function(t){e.policy=v()(t),e.vehicles=e.policy.motor.vehicles,e.verifyPackages(),e.loadSumOptions()})).unsubscribe()}},{key:"verifyPackages",value:function(){var e,t,n,o,r,l,a=this;if(this.currentVehicle=this.vehicles.find((function(e){var t;return null===(t=e.packages)||void 0===t?void 0:t.find((function(e){var t;return e.selected&&"A"!==e.code&&(null===(t=null==e?void 0:e.coverages)||void 0===t?void 0:t.some((function(e){return e.pattern.code===a.MOBILITY_CODE})))}))}))||this.vehicles.find((function(e){var t;return null===(t=e.packages)||void 0===t?void 0:t.find((function(e){return e.selected&&"A"!==e.code}))})),this.currentVehicle){var s=null===(r=null===(o=null===(n=null===(t=null===(e=this.currentVehicle.packages)||void 0===e?void 0:e.find((function(e){var t;return e.selected&&(null===(t=e.coverages)||void 0===t?void 0:t.some((function(e){return e.pattern.code===a.MOBILITY_CODE})))})))||void 0===t?void 0:t.coverages)||void 0===n?void 0:n.find((function(e){return e.pattern.code===a.MOBILITY_CODE})))||void 0===o?void 0:o.terms[0])||void 0===r?void 0:r.value;s?(s=(null==s?void 0:s.current)||s,this.form.patchValue({yes:"on",coverageSum:s})):this.form.patchValue("emission"===this.fromUrl?{yes:"off",coverageSum:this.MOBILITY_DEFAULT}:{yes:null,coverageSum:this.MOBILITY_DEFAULT}),null===(l=this.form.get("coverageSum"))||void 0===l||l.setValidators(i.Validators.required),this.form.enable()}else this.storeQuote.dispatch(new b.w(!0))}},{key:"loadSumOptions",value:function(){var e=this;this.currentVehicle&&this.additionalService.getAdditionalAccessorios(this.policyAdapter.adaptAdditional(this.policy)).pipe(Object(m.a)((function(t){var n,o,r=null===(o=null===(n=t.motor)||void 0===n?void 0:n.vehicles.find((function(t){return t.number===e.currentVehicle.number})))||void 0===o?void 0:o.package.coverages.find((function(t){return t.pattern.code===e.MOBILITY_CODE}));return r.terms[0].value=r.terms[0].value,e.mobilityPkg=r,(null==r?void 0:r.terms[0].options)||[]}))).subscribe((function(t){e.mobility=t,e.mobilityCompleted.next()}))}},{key:"allowCost",value:function(){this.callCost$.next()}},{key:"handleCost",value:function(e){this.storePolicy.dispatch(new h.F(e.costs)),this.vehicles.forEach((function(t){var n,o,r,i,l,a,s=null===(n=null==t?void 0:t.packages)||void 0===n?void 0:n.find((function(e){return e.selected})),d=null===(o=e.errors)||void 0===o?void 0:o.find((function(n){return n.externalId.split("&").includes("".concat(e.productcode,",").concat(t.number,",").concat(null==s?void 0:s.code))})),c=null===(a=null===(l=null===(i=null===(r=null==e?void 0:e.motor)||void 0===r?void 0:r.vehicles)||void 0===i?void 0:i.find((function(e){return e.number===t.number})))||void 0===l?void 0:l.packages)||void 0===a?void 0:a.find((function(e){return e.code===(null==s?void 0:s.code)}));!(null==d?void 0:d.code)&&s?s.premiums=null==c?void 0:c.premiums:s&&(s.premiums=null)})),this.loadingCost=!1,this.storePolicy.dispatch(new h.H(this.vehicles)),this.storeQuote.dispatch(new b.m(e))}}]),e}(),j.\u0275fac=function(e){return new(e||j)(g["\u0275\u0275directiveInject"](i.FormBuilder),g["\u0275\u0275directiveInject"](y.h),g["\u0275\u0275directiveInject"](y.h),g["\u0275\u0275directiveInject"](S.a),g["\u0275\u0275directiveInject"](C.AditionalAccessoriesService),g["\u0275\u0275directiveInject"](C.QuotingService),g["\u0275\u0275directiveInject"](E.a))},j.\u0275cmp=g["\u0275\u0275defineComponent"]({type:j,selectors:[["sxf-mobility"]],viewQuery:function(e,t){var n;1&e&&g["\u0275\u0275viewQuery"](M,!0),2&e&&g["\u0275\u0275queryRefresh"](n=g["\u0275\u0275loadQuery"]())&&(t.disabledTooltip=n.first)},decls:2,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-lg-9","pr-2","ps","pt-4",2,"position","relative","max-height","90vh",3,"perfectScrollbar"],[1,"offset-lg-3"],[1,"row","mb-2"],[1,"col-lg-12"],[1,"tag","mr-2"],["href","https://www.segurossura.com.ar/wp-content/uploads/2020/06/Movilidad-SURA.pdf","target","_blank"],["type","info",1,"icon-green"],[1,"title"],[1,"question"],[1,"col-lg-5","input-group"],["placement","bottom","tooltipClass","disabled-mobility-tooltip",1,"form-radio-label",3,"ngbTooltip","triggers"],["t","ngbTooltip"],["type","radio","name","yes","id","yes","value","on","formControlName","yes"],["for","yes",1,"radio-label"],["disabledContent",""],[1,"col-lg-6","input-group"],[1,"form-radio-label"],["type","radio","name","yes","id","no","value","off","formControlName","yes"],["for","no",1,"radio-label"],[4,"ngIf"],[1,"col-lg-3","px-0","ps"],[3,"loadingCost","allowCost"],[1,"row","pt-3"],[1,"offset-lg-3","col-lg-3","pl-0"],["for","suma"],["formControlName","coverageSum","bindLabel","description","bindValue","code","name","sumaAsegurada",3,"items","multiple","searchable","placeholder","dropdownPosition"],[1,"row","pt-4"],[1,"offset-lg-3","mr-2"],["src","/assets/mobility/ROBO_Y_DANIO_POR_USO.svg","alt","Robo y da\xf1o por uso de Bicicleta/Monopatin/Skates/Rollers","width","30px","height","30px"],[1,"col-lg-6","pl-0","line"],["src","/assets/mobility/ACCIDENTES_PERSONALES.svg","alt","Accidentes\n          personales","width","30px","height","30px"],["src","/assets/mobility/ROBO_AL_DESPLAZARSE.svg","alt","Robo al\n          desplazarse","width","30px","height","30px"],["src","/assets/mobility/DANIOS_A_TERCEROS.svg","alt","Da\xf1os a\n          terceros","width","30px","height","30px"],["src","/assets/mobility/ASISTENCIA_MOVILIDAD.svg","alt","Asistencia\n          Movilidad","width","30px","height","30px"]],template:function(e,t){1&e&&(g["\u0275\u0275template"](0,P,34,7,"div",0),g["\u0275\u0275element"](1,"router-outlet")),2&e&&g["\u0275\u0275property"]("ngIf",t.form)},directives:[o.o,r.k,i.NgControlStatusGroup,i.FormGroupDirective,_.b,O.a,A.o,i.RadioControlValueAccessor,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlName,I.a,w.a],styles:["label.question[_ngcontent-%COMP%]{font-size:1.625rem;color:#06369e;font-weight:700}.title[_ngcontent-%COMP%]{color:#00aec7}.tag[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-weight:700}.tag[_ngcontent-%COMP%]{background-color:#06369e;color:#fff;padding:.3rem .5rem;border-radius:2px;text-align:center;font-size:.75rem}.form-radio-label[_ngcontent-%COMP%]{margin:0}.form-radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + .radio-label[_ngcontent-%COMP%]{font-size:.875rem}.form-radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + .radio-label[_ngcontent-%COMP%]:before{top:.15rem}.line[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.125);padding-bottom:7px}.line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem}label[for=suma][_ngcontent-%COMP%]{font-size:.75rem}[_nghost-%COMP%]     .disabled-mobility-tooltip{z-index:inherit!important}[_nghost-%COMP%]     .disabled-mobility-tooltip .arrow{left:25%!important}[_nghost-%COMP%]     .disabled-mobility-tooltip .arrow:before{border-bottom:.75rem solid red!important}[_nghost-%COMP%]     .disabled-mobility-tooltip .tooltip-inner{color:red;border-color:red!important;padding:1rem}[_nghost-%COMP%]     .disabled-mobility-tooltip .tooltip-inner p{padding:0;margin:0}"]}),j)}],V=((L=function e(){_classCallCheck(this,e)}).\u0275mod=g["\u0275\u0275defineNgModule"]({type:L}),L.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(e){return new(e||L)},providers:[],imports:[[r.j.forChild(R)],r.j]}),L),N=n("NdbC"),Y=((D=function e(){_classCallCheck(this,e)}).\u0275mod=g["\u0275\u0275defineNgModule"]({type:D}),D.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(e){return new(e||D)},providers:[C.AccountService,C.QuotingService,C.AditionalAccessoriesService],imports:[[o.c,N.a,V]]}),D)}}]);