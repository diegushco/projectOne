(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1hPV":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=n("v2vP"),r=n("uzuk"),l=n("6Br6"),a=n("7oWP"),s=n("QuXn"),d=n("tpAt"),c=function(e){function t(n,i,o){var l=e.call(this)||this;switch(l.syncErrorValue=null,l.syncErrorThrown=!1,l.syncErrorThrowable=!1,l.isStopped=!1,arguments.length){case 0:l.destination=r.empty;break;case 1:if(!n){l.destination=r.empty;break}if("object"==typeof n){n instanceof t?(l.syncErrorThrowable=n.syncErrorThrowable,l.destination=n,n.add(l)):(l.syncErrorThrowable=!0,l.destination=new m(l,n));break}default:l.syncErrorThrowable=!0,l.destination=new m(l,n,i,o)}return l}return i(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,n,i){var o=new t(e,n,i);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(l.Subscription);t.Subscriber=c;var m=function(e){function t(t,n,i,l){var a,s=e.call(this)||this;s._parentSubscriber=t;var d=s;return o.isFunction(n)?a=n:n&&(a=n.next,i=n.error,l=n.complete,n!==r.empty&&(d=Object.create(n),o.isFunction(d.unsubscribe)&&s.add(d.unsubscribe.bind(d)),d.unsubscribe=s.unsubscribe.bind(s))),s._context=d,s._next=a,s._error=i,s._complete=l,s}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):d.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;d.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.config.useDeprecatedSynchronousErrorHandling)throw n;d.hostReportError(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!s.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return s.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(d.hostReportError(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(c);t.SafeSubscriber=m},"6Br6":function(e,t,n){"use strict";var i=n("D9en"),o=n("a96P"),r=n("v2vP"),l=n("ZGdk");function a(e){return e.reduce((function(e,t){return e.concat(t instanceof l.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,s=this._unsubscribe,d=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var c=0;c<n.length;++c)n[c].remove(this);if(r.isFunction(s))try{s.call(this)}catch(p){t=p instanceof l.UnsubscriptionError?a(p.errors):[p]}if(i.isArray(d)){c=-1;for(var m=d.length;++c<m;){var u=d[c];if(o.isObject(u))try{u.unsubscribe()}catch(p){t=t||[],p instanceof l.UnsubscriptionError?t=t.concat(a(p.errors)):t.push(p)}}}if(t)throw new l.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof e){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}()},"7bXj":function(e,t,n){"use strict";function i(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}t.getSymbolIterator=i,t.iterator=i(),t.$$iterator=t.iterator},"7oWP":function(e,t,n){"use strict";t.rxSubscriber=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),t.$$rxSubscriber=t.rxSubscriber},D9en:function(e,t,n){"use strict";t.isArray=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},DtmU:function(e,t,n){"use strict";var i=n("qiMw"),o=n("sBpz"),r=n("uHtI");t.fromArray=function(e,t){return t?r.scheduleArray(e,t):new i.Observable(o.subscribeToArray(e))}},"E/Xc":function(e,t,n){"use strict";var i=n("RKpm");function o(e){return 0===e.length?i.identity:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)},t.pipeFromArray=o},GB03:function(e,t,n){"use strict";var i=n("7bXj");t.subscribeToIterable=function(e){return function(t){for(var n=e[i.iterator]();;){var o=void 0;try{o=n.next()}catch(r){return t.error(r),t}if(o.done){t.complete();break}if(t.next(o.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}}},JJ8B:function(e,t,n){"use strict";var i=n("1hPV");t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof i.Subscriber?t:null}return!0}},Lbxd:function(e,t,n){"use strict";var i=n("k/06");t.subscribeToObservable=function(e){return function(t){var n=e[i.observable]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},QuXn:function(e,t,n){"use strict";var i=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}}},RKpm:function(e,t,n){"use strict";t.identity=function(e){return e}},VTS6:function(e,t,n){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},Yfti:function(e,t,n){"use strict";var i=n("1hPV"),o=n("7oWP"),r=n("uzuk");t.toSubscriber=function(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(r.empty)}},ZGdk:function(e,t,n){"use strict";t.UnsubscriptionError=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},a96P:function(e,t,n){"use strict";t.isObject=function(e){return null!==e&&"object"==typeof e}},ci3w:function(e,t,n){"use strict";t.isScheduler=function(e){return e&&"function"==typeof e.schedule}},d4zx:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();t.InnerSubscriber=function(e){function t(t,n,i){var o=e.call(this)||this;return o.parent=t,o.outerValue=n,o.outerIndex=i,o.index=0,o}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n("1hPV").Subscriber)},dmvN:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();t.OuterSubscriber=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e,t,n,i,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n("1hPV").Subscriber)},eUpz:function(e,t,n){"use strict";n.r(t),n.d(t,"playerFactory",(function(){return In})),n.d(t,"EmissionModule",(function(){return Mn}));var i=n("sEIs"),o=n("sN6X"),r=n("Bxzl"),l=n("R186"),a=n("jCLe"),s=n("LXme"),d=n("OIWk"),c=n("+E71"),m=n("HHj5"),u=n("bwdy"),p=n("HM3f"),h=n("ROBh"),v=n("47ST"),b=n("mWib"),f=n("8j5Y"),g=n("TLy2"),y=n("jOdJ"),S=n("4e/d"),E=n("c2re"),x=n.n(E),C=n("EM62"),P=n("YroZ"),w=n("qgZ/"),I=n("smBE"),M=n("2kYt"),O=n("yEyH");const k=["modalCupos"];function _(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"h3",7),C["\u0275\u0275text"](1," El cup\xf3n de descuento aplicado en la cotizaci\xf3n no se encuentra disponible actualmente. "),C["\u0275\u0275elementEnd"]())}function N(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",8),C["\u0275\u0275elementStart"](1,"div",9),C["\u0275\u0275elementStart"](2,"div",10),C["\u0275\u0275elementStart"](3,"button",11),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().callCostWithoutDiscounts()})),C["\u0275\u0275text"](4," Recotizar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("disabled",e.loadingCosts)}}function V(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",12),C["\u0275\u0275elementStart"](1,"div",13),C["\u0275\u0275element"](2,"ng-lottie",14),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("options",e.lottieConfig)}}let j=(()=>{class e extends l.BaseComponent{constructor(e,t,n,i,o,r,l){super(),this.router=e,this.storeQuote=t,this.storeEmission=n,this.storePolicy=i,this.discountService=o,this.quotingService=r,this.policyAdapter=l,this.modalCupos={},this.routes=[],this.policy={},this.discounts=[],this.loadingCosts=!1,this.newCost=!1,this.emissionSubscription=new u.a,this.policySubscription=new u.a,this.discountSubscription=new u.a,this.lottieConfig={path:"/assets/loadings/sura-loader.json"}}ngOnInit(){Object(p.a)([this.storeEmission.select(d.e),this.storePolicy.select(m.p)]).subscribe(([e,t])=>{var n,i,o,r,l;if(!e){this.storeQuote.dispatch(new a.r(1));const e=null===(l=null===(r=null===(o=null===(i=null===(n=null==t?void 0:t.motor)||void 0===n?void 0:n.vehicles)||void 0===i?void 0:i.find(e=>1===e.number))||void 0===o?void 0:o.packages)||void 0===r?void 0:r.find(e=>e.selected))||void 0===l?void 0:l.group;this.storeQuote.dispatch(new a.u(e))}}).unsubscribe(),this.storeEmission.dispatch(new s.g(!0)),this.emissionSubscription=this.storeEmission.select(d.m).subscribe(e=>{var t,n;if(e.length<1){let e={};e=null===(n=null===(t=this.router)||void 0===t?void 0:t.config)||void 0===n?void 0:n.find(e=>"quoting"===e.path),e&&(e._loadedConfig.routes[0].children.find(e=>"emission"===e.path)._loadedConfig.routes[0].children[0].children.forEach(e=>{const t=String(e.path).replace(":id",String(1));let n={};n=e,this.routes.push({path:t,question:n.data.question,show:n.data.show,disabled:n.data.disabled,value:n.data.value,shortName:n.data.shortName,visible:n.data.visible,line:n.data.line})}),this.storeEmission.dispatch(new s.o(this.routes)),this.storeEmission.dispatch(new s.c("client")))}}),this.policySubscription=this.storePolicy.select(m.p).subscribe(e=>this.policy=x()(e))}checkDiscount(){this.discountSubscription=Object(p.a)([this.storeEmission.select(d.d),this.storePolicy.select(m.p)]).pipe(Object(b.a)(500),Object(f.a)(e=>{this.discounts=x()(e[1].motor.discounts)}),Object(g.a)(e=>{const t=e[1];return e[0].jobNumberFromQuotes&&t.motor.discounts.some(e=>e.value>0)?this.discountService.getAvailableDiscounts({job:{number:t.job.number}}):Object(h.a)(null)}),Object(y.a)()).subscribe(e=>{!e||e.applied<e.total||(this.modalCupos.options.backdrop="static",this.modalCupos.options.keyboard=!1,this.modalCupos.openModal())})}callCostWithoutDiscounts(){this.newCost=!1,this.loadingCosts=!0,this.discounts.forEach(e=>e.value=e.value?0:null),this.storePolicy.dispatch(new c.o(this.discounts));const e=this.policyAdapter.adapt(this.policy);this.quotingService.getCosts(e).pipe(Object(S.a)(e=>(this.loadingCosts=!1,Object(v.a)(e)))).subscribe(e=>{const t=e.motor.vehicles,n=this.policy.motor.vehicles;n.forEach(e=>{var n;const i=t.find(t=>t.number===e.number);if(!i)return;let o={};i&&i.packages&&i.packages.length>0&&(o=null==i?void 0:i.packages[0]);const r=null===(n=null==e?void 0:e.packages)||void 0===n?void 0:n.find(e=>e.externalid===o.externalid);r&&(r.costs=o.costs,r.premiums=o.premiums)}),this.storePolicy.dispatch(new c.H(n)),this.loadingCosts=!1,this.newCost=!0,this.modalCupos.closeModal()})}ngOnDestroy(){this.emissionSubscription&&this.emissionSubscription.unsubscribe(),this.discountSubscription&&this.discountSubscription.unsubscribe(),this.policySubscription&&this.policySubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275directiveInject"](i.h),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](P.DiscountService),C["\u0275\u0275directiveInject"](P.QuotingService),C["\u0275\u0275directiveInject"](w.a))},e.\u0275cmp=C["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-emission"]],viewQuery:function(e,t){var n;1&e&&C["\u0275\u0275viewQuery"](k,!0),2&e&&C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalCupos=n.first)},features:[C["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:4,consts:[["modalCupos",""],[1,"modal-header","modal-header-items"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body","modal-body-items"],["style","padding-top: 1.5rem;",4,"ngIf","ngIfElse"],["class","modal-footer",4,"ngIf"],["stillLoadingCost",""],[2,"padding-top","1.5rem"],[1,"modal-footer"],[1,"row"],[1,"col-lg-4","offset-lg-8","pl-0"],["type","button",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled","click"],[1,"row",2,"padding","1rem 0"],[1,"col-12","text-center"],["width","8.75rem","height","6.25rem",3,"options"]],template:function(e,t){if(1&e&&(C["\u0275\u0275element"](0,"router-outlet"),C["\u0275\u0275elementStart"](1,"sxf-modal",null,0),C["\u0275\u0275elementStart"](3,"div",1),C["\u0275\u0275elementStart"](4,"h4",2),C["\u0275\u0275text"](5),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"div",3),C["\u0275\u0275template"](7,_,2,0,"h3",4),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](8,N,5,1,"div",5),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](9,V,3,1,"ng-template",null,6,C["\u0275\u0275templateRefExtractor"])),2&e){const e=C["\u0275\u0275reference"](10);C["\u0275\u0275advance"](5),C["\u0275\u0275textInterpolate1"](" ",t.loadingCosts?"Recotizando":"Descuento comercial no disponible"," "),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",!t.loadingCosts)("ngIfElse",e),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",!t.loadingCosts)}},directives:[i.k,I.a,M.o,O.a],styles:[""],changeDetection:0}),e})();var B=n("ZTXN"),A=n("Z3wF"),R=n("nIj0"),$=n("J+dc"),D=n("soHz"),L=n("q2B7");let F=(()=>{class e{constructor(e,t){this.storeEmission=e,this.router=t}goToNextStep(e){const t=e.filter(e=>""===e.value||null===e.value)[0].path.split("/")[2];return e.forEach(e=>{e.path===t&&(e.disabled=!1)}),this.storeEmission.dispatch(new s.o(e)),this.storeEmission.dispatch(new s.c(t)),this.router.navigateByUrl("quoting/emission/questions/"+t)}enableRoute(e,t){e.forEach(e=>{e.path===t&&(e.disabled=!1,e.value=null)}),this.storeEmission.dispatch(new s.c(t)),this.router.navigateByUrl("quoting/emission/questions/"+t),this.storeEmission.dispatch(new s.o(e))}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275inject"](o.h),C["\u0275\u0275inject"](i.h))},e.\u0275prov=C["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var T=n("+m/I"),q=n("ScPh"),Q=n("SVrd"),U=n("etEC");const z=["modalNoGNC"],G=["modalPatentInUse"],H=["modalUW"];function Y(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",25),C["\u0275\u0275elementStart"](1,"div",26),C["\u0275\u0275elementStart"](2,"div",7),C["\u0275\u0275elementStart"](3,"div",27),C["\u0275\u0275elementStart"](4,"span",28),C["\u0275\u0275element"](5,"sxf-icon",29),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"div",7),C["\u0275\u0275elementStart"](7,"div",30),C["\u0275\u0275element"](8,"img",31),C["\u0275\u0275pipe"](9,"uppercase"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](10,"div",32),C["\u0275\u0275elementStart"](11,"div",33),C["\u0275\u0275text"](12),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](13,"div",34),C["\u0275\u0275text"](14),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]().$implicit;C["\u0275\u0275advance"](8),C["\u0275\u0275propertyInterpolate1"]("src","/assets/icons/TYPE_",C["\u0275\u0275pipeBind1"](9,4,e.group),".svg",C["\u0275\u0275sanitizeUrl"]),C["\u0275\u0275advance"](4),C["\u0275\u0275textInterpolate"](null==e||null==e.brand?null:e.brand.description),C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate2"](" ",null==e?null:e.shortModel," ",null==e?null:e.year," ")}}function W(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",36),C["\u0275\u0275elementStart"](1,"div",55),C["\u0275\u0275element"](2,"input",67),C["\u0275\u0275element"](3,"label",68),C["\u0275\u0275elementStart"](4,"label",58),C["\u0275\u0275text"](5," Conduce el cliente "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function J(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",36),C["\u0275\u0275elementStart"](1,"div",55),C["\u0275\u0275element"](2,"input",69),C["\u0275\u0275element"](3,"label",70),C["\u0275\u0275elementStart"](4,"label",58),C["\u0275\u0275text"](5," GNC "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function X(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",71),C["\u0275\u0275elementStart"](1,"div",44),C["\u0275\u0275elementStart"](2,"div",45),C["\u0275\u0275elementStart"](3,"div",72),C["\u0275\u0275elementStart"](4,"label"),C["\u0275\u0275text"](5,"Tipo de acreedor prendario"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](6,"sxf-select",73),C["\u0275\u0275pipe"](7,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](8,"div",45),C["\u0275\u0275elementStart"](9,"label"),C["\u0275\u0275text"](10," Cuotas "),C["\u0275\u0275elementStart"](11,"sup"),C["\u0275\u0275text"](12,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](13,"sxf-select",74),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"](3);C["\u0275\u0275property"]("hidden",e.hiddenFormPatent),C["\u0275\u0275advance"](6),C["\u0275\u0275property"]("items",C["\u0275\u0275pipeBind1"](7,7,e.bondHoldersTypes$))("multiple",!1)("searchable",!0),C["\u0275\u0275advance"](7),C["\u0275\u0275property"]("items",e.bondHoldersQuotesQuantity)("multiple",!1)("searchable",!0)}}function Z(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",75),C["\u0275\u0275elementStart"](1,"div",45),C["\u0275\u0275elementStart"](2,"sxf-textbox",76),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](3).onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](3,"div",45),C["\u0275\u0275elementStart"](4,"sxf-textbox",77),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](3).onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"](3);C["\u0275\u0275property"]("hidden",e.hiddenFormPatent)("formGroup",e.formClient),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("helpFeedback",""),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("helpFeedback","")}}function K(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",78),C["\u0275\u0275elementStart"](1,"div",45),C["\u0275\u0275elementStart"](2,"sxf-textbox",79),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](3).onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](3,"div",45),C["\u0275\u0275elementStart"](4,"sxf-datetimepicker",80),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](3).onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"](3);C["\u0275\u0275property"]("hidden",e.hiddenFormPatent)("formGroup",e.formGNC),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("disabled",!0)("helpFeedback","No es modificable"),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("minDate",e.minDateGNC)}}function ee(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",25),C["\u0275\u0275elementStart"](1,"div",35),C["\u0275\u0275elementStart"](2,"div",7),C["\u0275\u0275elementStart"](3,"div",36),C["\u0275\u0275elementStart"](4,"div",7),C["\u0275\u0275elementStart"](5,"div",37),C["\u0275\u0275elementStart"](6,"span",38),C["\u0275\u0275element"](7,"img",39),C["\u0275\u0275pipe"](8,"uppercase"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](9,"div",7),C["\u0275\u0275elementStart"](10,"div",37),C["\u0275\u0275elementStart"](11,"span",40),C["\u0275\u0275text"](12),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](13,"div",7),C["\u0275\u0275elementStart"](14,"div",37),C["\u0275\u0275elementStart"](15,"span",41),C["\u0275\u0275text"](16),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](17,"div",7),C["\u0275\u0275elementStart"](18,"div",37),C["\u0275\u0275elementStart"](19,"span",42),C["\u0275\u0275text"](20),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](21,"div",43),C["\u0275\u0275elementStart"](22,"div",44),C["\u0275\u0275elementStart"](23,"div",45),C["\u0275\u0275elementStart"](24,"sxf-textbox",46),C["\u0275\u0275listener"]("keyup.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).onEnterPatent()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](25,"div",47),C["\u0275\u0275elementStart"](26,"button",48),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).validatePatent()})),C["\u0275\u0275elementStart"](27,"ng-lottie",49),C["\u0275\u0275listener"]("animationCreated",(function(t){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).animationCreated(t)})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](28,"label",50),C["\u0275\u0275text"](29),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](30,"div",51),C["\u0275\u0275elementStart"](31,"div",45),C["\u0275\u0275elementStart"](32,"sxf-textbox",52),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](33,"div",45),C["\u0275\u0275elementStart"](34,"sxf-textbox",53),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](35,"div",54),C["\u0275\u0275elementStart"](36,"div",36),C["\u0275\u0275elementStart"](37,"div",55),C["\u0275\u0275element"](38,"input",56),C["\u0275\u0275element"](39,"label",57),C["\u0275\u0275elementStart"](40,"label",58),C["\u0275\u0275text"](41," Acreedor Prendario "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](42,W,6,0,"div",59),C["\u0275\u0275template"](43,J,6,0,"div",59),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](44,X,14,9,"div",60),C["\u0275\u0275template"](45,Z,5,4,"div",61),C["\u0275\u0275template"](46,K,5,5,"div",62),C["\u0275\u0275elementStart"](47,"div",63),C["\u0275\u0275elementStart"](48,"div",64),C["\u0275\u0275elementStart"](49,"span"),C["\u0275\u0275elementStart"](50,"button",65),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).continue()})),C["\u0275\u0275text"](51," Siguiente "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](52,"span",66),C["\u0275\u0275text"](53," o presiona ENTER "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]().$implicit,t=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("formGroup",t.form),C["\u0275\u0275advance"](6),C["\u0275\u0275propertyInterpolate1"]("src","/assets/icons/TYPE_",C["\u0275\u0275pipeBind1"](8,28,e.group),".svg",C["\u0275\u0275sanitizeUrl"]),C["\u0275\u0275advance"](5),C["\u0275\u0275textInterpolate2"](" ",t.currentMotor.brand.description," ",null==t.currentMotor?null:t.currentMotor.shortModel," "),C["\u0275\u0275advance"](4),C["\u0275\u0275textInterpolate1"](" ",t.currentMotor.model.description," "),C["\u0275\u0275advance"](4),C["\u0275\u0275textInterpolate1"](" ",t.currentMotor.year," "),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("maxLength",t.maxLength)("disabled",t.disabledByRetrieve),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("disabled",t.currentMotor.license&&(t.currentMotor.chasis||t.currentMotor.motor)||!t.form.get("patent").valid||t.disabledValidate),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("hidden",!t.loadingPatent)("options",t.lottieConfig),C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate1"](" ",t.buttonLabel," "),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("hidden",t.hiddenFormPatent),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("minLength",8)("maxLength",20)("helpFeedback","")("disabled",t.disabledByRetrieve),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("minLength",10)("maxLength",17)("helpFeedback","")("disabled",t.disabledByRetrieve),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("hidden",t.hiddenFormPatent),C["\u0275\u0275advance"](7),C["\u0275\u0275property"]("ngIf","Person"===t.currentPolicy.client.type),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",!t.gncNotRequired),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",t.applyBondHolderFlag),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",!t.currentMotor.driver.clientIsDriver&&"Company"!==t.clientType||"Company"==t.clientType),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",t.currentMotor.gnc||t.showGNC),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("disabled",t.form.invalid||t.formClient.invalid&&(!t.currentMotor.driver.clientIsDriver&&"Company"!==t.clientType||"Company"==t.clientType))}}function te(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",25),C["\u0275\u0275elementStart"](1,"div",26),C["\u0275\u0275elementStart"](2,"div",7),C["\u0275\u0275elementStart"](3,"div",27),C["\u0275\u0275elementStart"](4,"span",81),C["\u0275\u0275element"](5,"sxf-icon",29),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"div",7),C["\u0275\u0275elementStart"](7,"div",30),C["\u0275\u0275element"](8,"img",31),C["\u0275\u0275pipe"](9,"uppercase"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](10,"div",32),C["\u0275\u0275elementStart"](11,"div",33),C["\u0275\u0275text"](12),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](13,"div",34),C["\u0275\u0275text"](14),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]().$implicit;C["\u0275\u0275advance"](8),C["\u0275\u0275propertyInterpolate1"]("src","/assets/icons/TYPE_",C["\u0275\u0275pipeBind1"](9,4,e.group),".svg",C["\u0275\u0275sanitizeUrl"]),C["\u0275\u0275advance"](4),C["\u0275\u0275textInterpolate"](null==e||null==e.brand?null:e.brand.description),C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate2"](" ",null==e?null:e.shortModel," ",null==e?null:e.year," ")}}function ne(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div"),C["\u0275\u0275template"](1,Y,15,6,"div",24),C["\u0275\u0275template"](2,ee,54,30,"div",24),C["\u0275\u0275template"](3,te,15,6,"div",24),C["\u0275\u0275elementEnd"]()),2&e){const e=t.index,n=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",e+1<n.currentMotor.number),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",n.currentMotor.number===e+1),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",e+1>n.currentMotor.number)}}let ie=(()=>{class e extends l.BaseComponent{constructor(e,t,n,i,o,r,l,a,s,d,c){super(),this.fb=e,this.storePolicy=t,this.storeQuote=n,this.router=i,this.route=o,this.carService=r,this.flowRouteEmissionService=l,this.storeEmission=a,this.patentBlackListService=s,this.patentUseService=d,this.bondHolderService=c,this.lottieConfig={path:"/assets/loadings/data-validation-loader.json",loop:!1,autoplay:!1},this.showGNC=!1,this.disabledValidate=!1,this._CODE_GNC="SURA_CA7_EquipodeGNCCov",this._CODE_SUMMA_GNC="SURA_CA7_EquipodeGNCLim",this._CODE_EXPIRATION="SURA_CA7_EquipodeGNCFecVencLim",this.hiddenFormPatent=!0,this.loadingPatent$=new B.a,this.currentBlackList=!1,this.loadingPatent=!1,this.buttonLabel="Validar",this.bondHoldersQuotesQuantity=[],this.openedModalPatentInUse=!1,this.maxLength=11,this.patentPattern=L.b,this.clientType=""}ngOnInit(){this.loadingPatent$.next(!1),this.route.params.subscribe(({id:e})=>{this.storeQuote.dispatch(new a.r(Number(e)))}),this.policyQuoteSubscription=Object(p.a)([this.storePolicy.select(m.p).pipe(Object($.a)(1)),this.storeQuote.select(A.v)]).subscribe(([e,t])=>{console.log("Recargando data"),this.currentPolicy=e,this.currentMotor=e.motor.vehicles.find(e=>e.number===t.activeMotor),this.vehicles=e.motor.vehicles,this.applyBondHolderFlag=null!==this.currentMotor.bondholder.type,null!==this.currentMotor.chasis&&null!==this.currentMotor.motor&&(this.hiddenFormPatent=!1),this.currentMotor.driver.clientIsDriver&&"Person"===this.currentPolicy.client.type&&(this.currentMotor.driver.firstname=this.currentPolicy.client.firstname,this.currentMotor.driver.lastname=this.currentPolicy.client.lastname);const n=this.currentPolicy.period.start.toString(),i={year:parseInt(n.substring(0,4),0),month:parseInt(n.substring(5,7),0),day:parseInt(n.substring(8,10),0)};this.minDateGNC=i,"MOTO"===this.currentMotor.group?(this.gncNotRequired=!0,this.patentPattern=L.c):this.patentPattern="OTRO"===this.currentMotor.group?L.d:L.b}),this.storeQuote.select(A.v).pipe(Object(D.a)("activeMotor")).subscribe(()=>this.initializeForms()),this.emissionRoutesSubscription=this.storeEmission.select(d.m).subscribe(e=>{this.routes=e}),this.bondHoldersTypes$=this.bondHolderService.getBondHolders();let e=0;for(;e<100;)e++,this.bondHoldersQuotesQuantity.push({code:e,description:e});this.emissionSubscription=this.storeEmission.select(d.d).subscribe(e=>{const t=e.jobNumberFromQuotes,n=e.approvedEmission;this.clientType=e.client.type,this.disabledByRetrieve=!(!t||!n),this.disabledByRetrieve&&(this.form.get("gnc").disable(),this.form.get("creditorPrendario").disable(),this.form.get("clientIsDriver").disable(),this.formClient.disable(),this.form.get("bondHolderType").disable(),this.form.get("bondHolderQuotas").disable())})}initializeForms(){console.log("Inicializo los formularios"),this.form=this.fb.group({gnc:[this.currentMotor.gnc,R.Validators.required],creditorPrendario:[this.applyBondHolderFlag],patent:[this.currentMotor.license,[R.Validators.required,R.Validators.pattern(this.patentPattern)]],bondHolderType:[this.currentMotor.bondholder.type],bondHolderQuotas:[this.currentMotor.bondholder.quotas],engineNumber:[this.currentMotor.motor,[R.Validators.required,R.Validators.minLength(6),R.Validators.maxLength(20)]],chassisNumber:[this.currentMotor.chasis,[R.Validators.required,R.Validators.minLength(10),R.Validators.maxLength(17)]],clientIsDriver:[this.currentMotor.driver.clientIsDriver]}),this.formClient=this.fb.group({driverName:[this.currentMotor.driver.firstname,R.Validators.required],driverLastName:[this.currentMotor.driver.lastname,R.Validators.required]}),this.currentMotor.packages.filter(e=>e.selected).map(e=>{const t=e.coverages.filter(e=>e.pattern.code===this._CODE_GNC);if(1===t.length){const e=t[0].terms.filter(e=>e.code===this._CODE_SUMMA_GNC)[0].value,n=t[0].terms.filter(e=>e.code===this._CODE_EXPIRATION)[0].value.toString(),i={year:parseInt(n.substring(0,4),0),month:parseInt(n.substring(5,7),0),day:parseInt(n.substring(8,10),0)};this.formGNC=this.fb.group({summa:[e,R.Validators.required],expiration:[i,R.Validators.required]}),this.form.patchValue({gnc:!0},{onlySelf:!0,emitEvent:!1}),this.showGNC=!0}else this.formGNC=this.fb.group({summa:[0,R.Validators.required],expiration:[,R.Validators.required]})}),this.unsubscribeForm(),this.patentInputSubscription=this.form.get("patent").valueChanges.subscribe(()=>{this.currentBlackList=!1,this.hiddenFormPatent=!0,this.disabledValidate=!1,this.form.get("chassisNumber").setValue([]),this.form.get("engineNumber").setValue([]),this.form.get("creditorPrendario").setValue(!1,{emitEvent:!1}),this.applyBondHolderFlag=!1,this.form.get("bondHolderType").setValue([]),this.form.get("bondHolderQuotas").setValue([]),this.form.get("bondHolderQuotas").clearValidators(),this.currentMotor.license=null,this.buttonLabel="Validar"}),this.clientIsDriverCheckSubscription=this.form.get("clientIsDriver").valueChanges.subscribe(e=>{e?(this.formClient.get("driverName").setValue(this.currentPolicy.client.firstname),this.formClient.get("driverLastName").setValue(this.currentPolicy.client.lastname),this.vehicles.forEach(t=>{t.number===this.currentMotor.number&&(t.driver.firstname=this.currentPolicy.client.firstname,t.driver.lastname=this.currentPolicy.client.lastname,t.driver.clientIsDriver=e)}),this.storePolicy.dispatch(new c.H(this.vehicles))):(this.formClient.get("driverName").setValue(this.disabledByRetrieve?this.currentMotor.driver.firstname:null),this.formClient.get("driverLastName").setValue(this.disabledByRetrieve?this.currentMotor.driver.lastname:null),this.vehicles.forEach(t=>{t.number===this.currentMotor.number&&(t.driver.firstname=this.formClient.get("driverName").value,t.driver.lastname=this.formClient.get("driverLastName").value,t.driver.clientIsDriver=e)}),this.storePolicy.dispatch(new c.H(this.vehicles)))}),this.gncCheckSubscription=this.form.get("gnc").valueChanges.subscribe(e=>{this.showGNC=!1,e&&0===this.formGNC.get("summa").value?this.openModalNoGNC():(this.vehicles.forEach(t=>{t.number===this.currentMotor.number&&(t.gnc=e)}),this.storePolicy.dispatch(new c.H(this.vehicles)))}),this.expirationInputSubscription=this.formGNC.get("expiration").valueChanges.subscribe(e=>{let t=e.year+"-"+e.month+"-"+e.day;t=new Date(t).toISOString(),this.vehicles.forEach(e=>{e.number===this.currentMotor.number&&(e.packages.filter(e=>e.selected)[0].coverages.filter(e=>e.pattern.code===this._CODE_GNC)[0].terms.filter(e=>e.code===this._CODE_EXPIRATION)[0].value.current=t)}),this.storePolicy.dispatch(new c.H(this.vehicles))}),this.creditorPrendarioInputSubscription=this.form.get("creditorPrendario").valueChanges.subscribe(e=>{this.applyBondHolderFlag=e,this.applyBondHolderFlag?(this.form.get("bondHolderQuotas").setValidators([R.Validators.required]),this.form.get("bondHolderQuotas").updateValueAndValidity()):(this.form.get("bondHolderQuotas").clearValidators(),this.form.get("bondHolderQuotas").updateValueAndValidity(),this.form.get("bondHolderQuotas").reset(),this.form.get("bondHolderType").reset())})}unsubscribeForm(){var e,t,n,i;null===(e=this.patentInputSubscription)||void 0===e||e.unsubscribe(),null===(t=this.clientIsDriverCheckSubscription)||void 0===t||t.unsubscribe(),null===(n=this.gncCheckSubscription)||void 0===n||n.unsubscribe(),null===(i=this.expirationInputSubscription)||void 0===i||i.unsubscribe()}ngOnDestroy(){var e,t,n;null===(e=this.emissionSubscription)||void 0===e||e.unsubscribe(),null===(t=this.policyQuoteSubscription)||void 0===t||t.unsubscribe(),null===(n=this.emissionRoutesSubscription)||void 0===n||n.unsubscribe(),this.unsubscribeForm()}continuePatentValidate(){this.carService.getCar(this.form.get("patent").value).pipe(Object(S.a)(()=>(this.hiddenFormPatent=!1,this.loadingPatent$.next(!1),this.loadingPatent=!1,Object(h.a)(null)))).subscribe(e=>{this.buttonAnimated.playSegments([[120,175]],!1),setTimeout(()=>{this.buttonLabel="Validado"},2e3),this.hiddenFormPatent=!1,this.loadingPatent=!1,this.loadingPatent$.next(!1),this.checkBlackList(e)})}validatePatent(){this.openedModalPatentInUse=!1,this.disabledValidate=!0,this.loadingPatent$.next(!0),this.loadingPatent=!0,this.buttonLabel="Validando",this.buttonAnimated.playSegments([[0,119]],!0);const e=new Date(this.currentPolicy.period.start.toString()),t=e.getDate()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+e.getFullYear();e.setMonth(e.getMonth()+3);const n=e.getDate()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+e.getFullYear();this.patentUseService.validePatentInUse(this.form.get("patent").value,t,n).subscribe(e=>{null!==e&&e.length>0&&""!==e[0].fixedid?(this.openModalPatentInUse(),this.openedModalPatentInUse=!0):this.continuePatentValidate()})}checkBlackList(e){this.patentBlackListService.validePatent(this.form.get("patent").value).subscribe(e=>{this.loadingPatent$.next(!1),this.currentBlackList=!1,null!==e&&e.length>0&&(this.currentBlackList=!0),this.vehicles.forEach(e=>{e.number===this.currentMotor.number&&(e.blacklist=this.currentBlackList)}),this.storePolicy.dispatch(new c.H(this.vehicles)),this.currentBlackList?this.modalUW.openModal():setTimeout(()=>{this.buttonLabel="Validado"},2e3)}),e&&(this.form.get("chassisNumber").setValue(e.chassis),this.form.get("engineNumber").setValue(e.motor),this.form.markAllAsTouched())}onEnterPatent(){this.form.get("patent").valid&&this.validatePatent()}onEnter(){this.form.valid&&this.continue()}continue(){const{patent:e,engineNumber:t,chassisNumber:n,bondHolderType:i,bondHolderQuotas:o,gnc:r}=this.form.value,{driverLastName:l,driverName:a}=this.formClient.value;if(this.currentMotor.license=e,this.currentMotor.motor=t,this.currentMotor.chasis=n,this.currentMotor.bondholder=Object.assign(Object.assign({},this.currentMotor.bondholder),{type:this.applyBondHolderFlag?i:null,quotas:this.applyBondHolderFlag?o:null}),this.currentMotor.driver=Object.assign(Object.assign({},this.currentMotor.driver),{lastname:l,firstname:a}),r){const e=this.currentMotor.packages.find(e=>e.selected);this.flowRouteEmissionService.enableRoute(this.routes,"payment-method"),this.storeEmission.dispatch(new s.c("payment-method")),this.routes.forEach(e=>{"aditionalauto"===e.path&&(e.value=this.form.get("chassisNumber").value.toString().toUpperCase()+" - "+this.form.get("engineNumber").value.toString().toUpperCase())}),this.vehicles.forEach(e=>{e.number===this.currentMotor.number&&(e.driver.lastname=this.formClient.get("driverLastName").value,e.driver.firstname=this.formClient.get("driverName").value,e.license=this.form.get("patent").value.toString().toUpperCase(),e.motor=this.form.get("engineNumber").value,e.chasis=this.form.get("chassisNumber").value,this.applyBondHolderFlag?(e.bondholder.type=this.form.get("bondHolderType").value,e.bondholder.quotas=this.form.get("bondHolderQuotas").value):(e.bondholder.type=null,e.bondholder.quotas=null))}),e.coverages=e.coverages.filter(e=>e.pattern.code!==this._CODE_GNC)}this.storePolicy.dispatch(new c.H(this.vehicles)),this.currentMotor.number<this.vehicles.length?this.router.navigateByUrl("quoting/emission/questions/aditionalauto/"+(this.currentMotor.number+1)):(this.flowRouteEmissionService.enableRoute(this.routes,"payment-method"),this.storeEmission.dispatch(new s.c("payment-method")),this.form.valid&&this.storeEmission.dispatch(new s.i(!0)),this.changeRouteTitleValue(),this.router.navigateByUrl("quoting/emission/questions/payment-method"))}changeRouteTitleValue(){const e=this.routes.find(e=>e.path.includes("aditionalauto")),{license:t,chasis:n,motor:i}=this.currentMotor;e.value=`${this.vehicles.length>0?t.toUpperCase()+": ":""}${n.toUpperCase()} - ${i.toUpperCase()}`}closeModalNoGNC(){this.form.patchValue({gnc:!1},{onlySelf:!0,emitEvent:!0}),this.modalNoGNC.closeModal()}openModalNoGNC(){this.modalNoGNC.openModal()}redirectCoverage(){const e=this.currentMotor.packages.filter(e=>e.selected)[0].code;this.modalNoGNC.closeModal(),this.router.navigateByUrl("quoting/coverage/"+this.currentMotor.id+"/modal/"+e)}animationCreated(e){this.buttonAnimated=e}closeModalPatentInUse(){this.loadingPatent=!1,this.buttonAnimated.playSegments([[120,175]],!1),this.buttonLabel="Validar",this.modalPatentInUse.closeModal()}openModalPatentInUse(){this.modalPatentInUse.openModal()}closeUWModal(e){"continue"!==e?(this.loadingPatent=!1,this.buttonAnimated.playSegments([[120,175]],!1),this.buttonLabel="Validar",this.form.get("patent").setValue(""),this.modalUW.closeModal()):this.modalUW.closeModal()}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275directiveInject"](R.FormBuilder),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](i.h),C["\u0275\u0275directiveInject"](i.a),C["\u0275\u0275directiveInject"](P.CarService),C["\u0275\u0275directiveInject"](F),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](P.PatentBlackListService),C["\u0275\u0275directiveInject"](P.PatentUseService),C["\u0275\u0275directiveInject"](P.BondholderService))},e.\u0275cmp=C["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-others-motor"]],viewQuery:function(e,t){var n;1&e&&(C["\u0275\u0275staticViewQuery"](z,!0),C["\u0275\u0275staticViewQuery"](G,!0),C["\u0275\u0275staticViewQuery"](H,!0)),2&e&&(C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalNoGNC=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalPatentInUse=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalUW=n.first))},features:[C["\u0275\u0275InheritDefinitionFeature"]],decls:55,vars:1,consts:[[4,"ngFor","ngForOf"],["modalNoGNC",""],[1,"modal-header","modal-header-items"],["type","button","aria-label","Close","name","closeModalNoGNCBtn",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-body-items"],[1,"modal-footer"],[1,"row"],[1,"col-lg-4","offset-lg-3","pl-0"],["type","button","name","closeModalNoGNCBtn",1,"btn","btn-modal","btn-lg","btn-block",3,"click"],[1,"col-lg-5","pl-0"],["type","button","name","redirectCoverageGNCBtn",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],[3,"closed"],["modalPatentInUse",""],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close","name","closeModalPatentInUseBtn",1,"close",3,"click"],[1,"col-lg-4","offset-lg-8","pl-0"],["type","button","name","closeModalPatentInUseBtn",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],["modalUW",""],[1,"modal-header",2,"padding","1rem 2rem"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"modal-body"],["type","button",1,"btn","btn-modal","btn-lg","btn-block",3,"click"],["type","button",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],["class","row pb-4",4,"ngIf"],[1,"row","pb-4"],[1,"col-lg-5","px-0","btn-vehicle"],[1,"col-lg-12","text-right"],[1,"circle-ok"],["type","ok",1,"icon-white",2,"cursor","none !important"],[1,"col-lg-4","icon"],["alt","vehicle","width","64px",1,"icon-vehicle",3,"src"],[1,"col-lg-8","pl-0","text-left",2,"margin-top","-15px"],[1,"title-primary"],[1,"title-secondary"],[1,"col-lg-12","py-4",2,"border","0.5px solid #00aec7",3,"formGroup"],[1,"col-lg-4"],[1,"col-lg-12"],[1,"vehicle-type"],["alt","vehicle icon","width","64px;",3,"src"],[1,"brand-span"],[1,"model-span"],[1,"year-span"],[1,"col-lg-8","pt-3"],[1,"row","mb-4"],[1,"col-lg-6"],["type","text","formControlName","patent","label","Patente *","placeholder","Ingres\xe1 la patente",3,"maxLength","disabled","keyup.enter"],[1,"col-lg-5"],[1,"btn","btn-primary","btn-block",3,"disabled","click"],["height","32px","width","32px",1,"mr-2",3,"hidden","options","animationCreated"],[1,"label-btn"],[1,"row","mb-2",3,"hidden"],["type","text","formControlName","engineNumber","label","N\xfamero de motor *","placeholder","N\xfamero de motor",3,"minLength","maxLength","helpFeedback","disabled","keydown.enter"],["type","text","formControlName","chassisNumber","label","N\xfamero de chasis *","placeholder","",3,"minLength","maxLength","helpFeedback","disabled","keydown.enter"],[1,"row","mb-4",3,"hidden"],[1,"form-checkbox"],["type","checkbox","id","creditorPrendario","formControlName","creditorPrendario",1,"form-checkbox-input"],["for","creditorPrendario",1,"form-checkbox-label"],[1,"label-checkbox"],["class","col-lg-4",4,"ngIf"],[3,"hidden",4,"ngIf"],["class","row mt-4",3,"hidden","formGroup",4,"ngIf"],["class","row mb-3",3,"hidden","formGroup",4,"ngIf"],[1,"row","mt-4"],[1,"col-lg-8"],["name","continueEmissionOthers",1,"btn","btn-primary","btn-heft",2,"width","10rem",3,"disabled","click"],[1,"press-enter","ml-3","mr-4"],["type","checkbox","id","driveCustomer","formControlName","clientIsDriver",1,"form-checkbox-input"],["for","driveCustomer",1,"form-checkbox-label"],["type","checkbox","id","gnc","formControlName","gnc",1,"form-checkbox-input"],["for","gnc",1,"form-checkbox-label"],[3,"hidden"],[1,"form-group"],["formControlName","bondHolderType","bindLabel","description","bindValue","code","placeholder","Seleccione el tipo","dropdownPosition","bottom","name","bondHolderType",1,"custom",3,"items","multiple","helpFeedback","searchable"],["formControlName","bondHolderQuotas","bindLabel","description","bindValue","code","placeholder","Seleccione las cuotas","dropdownPosition","bottom","name","bondHoldersQuotesQuantity",1,"custom",3,"items","multiple","helpFeedback","searchable"],[1,"row","mt-4",3,"hidden","formGroup"],["type","text","formControlName","driverName","label","Nombre *","placeholder","Ingres\xe1 el nombre del conductor","placement","bottom","messageTooltips","Nombre","name","driverNameEmission",3,"helpFeedback","keydown.enter"],["type","text","formControlName","driverLastName","label","Apellido *","placeholder","Ingres\xe1 el apellido del conductor","placement","bottom","messageTooltips","Apellido","name","driverLastNameEmission",3,"helpFeedback","keydown.enter"],[1,"row","mb-3",3,"hidden","formGroup"],["type","text","formControlName","summa","label","Suma asegurada de equipo de GNC *","placement","bottom","messageTooltips","Suma asegurada","name","summaGNCEmission",3,"disabled","helpFeedback","keydown.enter"],["label","Vencimiento de equipo de GNC *","formControlName","expiration","name","expirationGNCEmission",3,"minDate","keydown.enter"],[1,"circle-ok",2,"visibility","hidden"]],template:function(e,t){1&e&&(C["\u0275\u0275template"](0,ne,4,3,"div",0),C["\u0275\u0275elementStart"](1,"sxf-modal",null,1),C["\u0275\u0275elementStart"](3,"div",2),C["\u0275\u0275elementStart"](4,"button",3),C["\u0275\u0275listener"]("click",(function(){return t.closeModalNoGNC()})),C["\u0275\u0275elementStart"](5,"span",4),C["\u0275\u0275text"](6,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",5),C["\u0275\u0275elementStart"](8,"h3"),C["\u0275\u0275text"](9,"El equipo de GNC es solo a modo"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](10,"h3"),C["\u0275\u0275text"](11,"declarativo \xbfDesea asegurar el equipo?"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](12,"div",6),C["\u0275\u0275elementStart"](13,"div",7),C["\u0275\u0275elementStart"](14,"div",8),C["\u0275\u0275elementStart"](15,"button",9),C["\u0275\u0275listener"]("click",(function(){return t.closeModalNoGNC()})),C["\u0275\u0275text"](16," No solictar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](17,"div",10),C["\u0275\u0275elementStart"](18,"button",11),C["\u0275\u0275listener"]("click",(function(){return t.redirectCoverage()})),C["\u0275\u0275text"](19," Asegurar el equipo de GNC "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](20,"sxf-modal",12,13),C["\u0275\u0275listener"]("closed",(function(){return t.closeModalPatentInUse()})),C["\u0275\u0275elementStart"](22,"div",2),C["\u0275\u0275elementStart"](23,"h4",14),C["\u0275\u0275text"](24," Patente asociada a otra p\xf3liza "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](25,"button",15),C["\u0275\u0275listener"]("click",(function(){return t.closeModalPatentInUse()})),C["\u0275\u0275elementStart"](26,"span",4),C["\u0275\u0275text"](27,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](28,"div",5),C["\u0275\u0275elementStart"](29,"p"),C["\u0275\u0275text"](30," La patente est\xe1 asociada a una p\xf3liza o solicitud activa y actualmente no podr\xe1 ser asegurada. Comunicate con tu Ejecutivo de Cuenta para m\xe1s informaci\xf3n. "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](31,"div",6),C["\u0275\u0275elementStart"](32,"div",7),C["\u0275\u0275elementStart"](33,"div",16),C["\u0275\u0275elementStart"](34,"button",17),C["\u0275\u0275listener"]("click",(function(){return t.closeModalPatentInUse()})),C["\u0275\u0275text"](35," Volver "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](36,"sxf-modal",12,18),C["\u0275\u0275listener"]("closed",(function(){return t.closeUWModal()})),C["\u0275\u0275elementStart"](38,"div",19),C["\u0275\u0275elementStart"](39,"button",20),C["\u0275\u0275listener"]("click",(function(){return t.closeUWModal("Cross click")})),C["\u0275\u0275elementStart"](40,"span",4),C["\u0275\u0275text"](41,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](42,"div",21),C["\u0275\u0275elementStart"](43,"h4"),C["\u0275\u0275text"](44," La presente emisi\xf3n va a requerir autorizaci\xf3n de la compa\xf1\xeda. "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](45,"h4"),C["\u0275\u0275text"](46,"\xbfDesea solicitar autorizaci\xf3n?"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](47,"div",6),C["\u0275\u0275elementStart"](48,"div",7),C["\u0275\u0275elementStart"](49,"div",8),C["\u0275\u0275elementStart"](50,"button",22),C["\u0275\u0275listener"]("click",(function(){return t.closeUWModal()})),C["\u0275\u0275text"](51," Cancelar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](52,"div",10),C["\u0275\u0275elementStart"](53,"button",23),C["\u0275\u0275listener"]("click",(function(){return t.closeUWModal("continue")})),C["\u0275\u0275text"](54," Continuar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e&&C["\u0275\u0275property"]("ngForOf",t.vehicles)},directives:[M.n,I.a,M.o,T.a,R.NgControlStatusGroup,R.FormGroupDirective,q.a,R.NgControlStatus,R.FormControlName,O.a,R.CheckboxControlValueAccessor,Q.a,U.a],pipes:[M.z,M.b],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;font-size:.75rem;color:#393b3d}.brand-span[_ngcontent-%COMP%], .model-span[_ngcontent-%COMP%], .year-span[_ngcontent-%COMP%]{font-size:.875rem;color:#393b3d}.driver-span[_ngcontent-%COMP%]{color:#06369e;font-size:.875rem;font-weight:700}.press-enter[_ngcontent-%COMP%]{color:#a3adb3;font-size:.75rem}.label-checkbox[_ngcontent-%COMP%]{vertical-align:top;margin-left:3px}.label-btn[_ngcontent-%COMP%]{color:#fff;font-size:.9375rem}.btn-vehicle[_ngcontent-%COMP%]{border:1px solid #c4c4c4;border-radius:.3125rem;padding:0 1rem 1rem}.btn-vehicle[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:relative;padding-left:1.7rem}.btn-vehicle[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .icon-vehicle[_ngcontent-%COMP%]{top:0;left:0;right:0;bottom:0}.btn-vehicle[_ngcontent-%COMP%]   .circle-ok[_ngcontent-%COMP%]{display:inline-block;background-color:#0033a0;border-radius:50%;width:24px;height:24px;zoom:.8;margin-right:.5rem}.btn-vehicle[_ngcontent-%COMP%]   .title-primary[_ngcontent-%COMP%], .btn-vehicle[_ngcontent-%COMP%]   .title-secondary[_ngcontent-%COMP%]{font-size:.875rem;color:#393b3d}"]}),e})();var oe=n("GobW"),re=n("XVTm"),le=n("LMO5"),ae=n("IdLP"),se=n("6Oco"),de=n("YtkY"),ce=n("7ntQ"),me=n("FK24"),ue=n("7ncN"),pe=n("ojpD"),he=n("Y1rU"),ve=n("NcZ/");const be=["childComp"],fe=["uwEmision"],ge=["vehicleDetails"],ye=["modalEditCoverage"];function Se(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"span",46),C["\u0275\u0275text"](1),C["\u0275\u0275pipe"](2,"async"),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();var n;C["\u0275\u0275advance"](1),C["\u0275\u0275textInterpolate1"](" ",null==(n=C["\u0275\u0275pipeBind1"](2,1,e.packageSelectedWithAssistance$))||null==n.package?null:n.package.description," ")}}function Ee(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"span",46),C["\u0275\u0275text"](1," Resumen "),C["\u0275\u0275elementEnd"]())}function xe(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",8),C["\u0275\u0275elementStart"](1,"a",49),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).goCoverage()})),C["\u0275\u0275text"](2," Cambio de cobertura "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}}function Ce(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",8),C["\u0275\u0275elementStart"](1,"a",49),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).openModal()})),C["\u0275\u0275text"](2," Editar cotizaci\xf3n "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}}function Pe(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",47),C["\u0275\u0275template"](1,xe,3,0,"div",48),C["\u0275\u0275template"](2,Ce,3,0,"div",48),C["\u0275\u0275pipe"](3,"async"),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();var n=null;const t=e.disabledByRetrieve&&(null==(n=C["\u0275\u0275pipeBind1"](3,2,e.vehicles$))?null:n.length)<2&&!e.getQuoteApproved;C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",!e.disabledByRetrieve),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",t)}}function we(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",47),C["\u0275\u0275elementStart"](1,"div",13),C["\u0275\u0275elementStart"](2,"div",50),C["\u0275\u0275elementStart"](3,"span"),C["\u0275\u0275text"](4),C["\u0275\u0275pipe"](5,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"a",51),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().openVehicleDetails()})),C["\u0275\u0275text"](7," Ver todos "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]();var n;C["\u0275\u0275advance"](4),C["\u0275\u0275textInterpolate1"](" ",null==(n=C["\u0275\u0275pipeBind1"](5,1,e.vehicles$))?null:n.length," Veh\xedculos ")}}function Ie(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",7),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3),C["\u0275\u0275pipe"](4,"titlecase"),C["\u0275\u0275pipe"](5,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"div",8),C["\u0275\u0275elementStart"](7,"span"),C["\u0275\u0275text"](8,"Asistencia mec\xe1nica"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate"](C["\u0275\u0275pipeBind1"](4,1,C["\u0275\u0275pipeBind1"](5,3,e.brandModelPrizeCar$).type))}}function Me(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",1),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3),C["\u0275\u0275pipe"](4,"async"),C["\u0275\u0275pipe"](5,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"div",8),C["\u0275\u0275elementStart"](7,"span"),C["\u0275\u0275text"](8),C["\u0275\u0275pipe"](9,"async"),C["\u0275\u0275pipe"](10,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();var n,i=null;C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate2"](" ",null==(i=C["\u0275\u0275pipeBind1"](4,3,e.brandModelPrizeCar$))?null:i.brand," ",null==(i=C["\u0275\u0275pipeBind1"](5,5,e.brandModelPrizeCar$))?null:i.model," "),C["\u0275\u0275advance"](5),C["\u0275\u0275textInterpolate1"](" ",C["\u0275\u0275pipeBind1"](9,7,e.getAssistanceDescription(null==(n=C["\u0275\u0275pipeBind1"](10,9,e.packageSelectedWithAssistance$))?null:n.assistance))," ")}}function Oe(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",7),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3,"Suma asegurada"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](4,"div",8),C["\u0275\u0275elementStart"](5,"span"),C["\u0275\u0275text"](6,"Refacturaci\xf3n"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function ke(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",1),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3),C["\u0275\u0275pipe"](4,"number"),C["\u0275\u0275pipe"](5,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"div",8),C["\u0275\u0275elementStart"](7,"span"),C["\u0275\u0275text"](8),C["\u0275\u0275pipe"](9,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();var n;C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](4,2,null==(n=C["\u0275\u0275pipeBind1"](5,5,e.brandModelPrizeCar$))?null:n.prize,"1.0-0")," "),C["\u0275\u0275advance"](5),C["\u0275\u0275textInterpolate1"](" ",C["\u0275\u0275pipeBind1"](9,7,e.rebillingPeriod$)," ")}}function _e(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",7),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3,"Condici\xf3n fiscal"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](4,"div",8),C["\u0275\u0275elementEnd"]())}function Ne(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"tr"),C["\u0275\u0275elementStart"](1,"td",59),C["\u0275\u0275text"](2),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](3,"td",59),C["\u0275\u0275elementStart"](4,"b"),C["\u0275\u0275text"](5),C["\u0275\u0275pipe"](6,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate1"](" ",e.pattern.description," "),C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](6,2,(null==e.terms[0].value?null:e.terms[0].value.current)||e.terms[0].value,"1.0-0")," ")}}function Ve(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"table",58),C["\u0275\u0275elementStart"](1,"tbody"),C["\u0275\u0275template"](2,Ne,7,5,"tr",33),C["\u0275\u0275pipe"](3,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"](2);var n;const t=null==(n=C["\u0275\u0275pipeBind1"](3,1,e.additionals$))?null:n.additionals;C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngForOf",t)}}function je(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",1),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3),C["\u0275\u0275pipe"](4,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](5,"div",8),C["\u0275\u0275template"](6,Ve,4,3,"ng-template",null,52,C["\u0275\u0275templateRefExtractor"]),C["\u0275\u0275elementStart"](8,"div",53),C["\u0275\u0275pipe"](9,"async"),C["\u0275\u0275element"](10,"input",54),C["\u0275\u0275pipe"](11,"async"),C["\u0275\u0275elementStart"](12,"div",55),C["\u0275\u0275elementStart"](13,"span",56),C["\u0275\u0275element"](14,"sxf-icon",57),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275reference"](7),t=C["\u0275\u0275nextContext"]();var n;const o=(null==(n=C["\u0275\u0275pipeBind1"](9,5,t.additionals$))?null:n.additionalsLenght)>0?e:"";var i;C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate1"](" ",C["\u0275\u0275pipeBind1"](4,3,t.fiscalCondition$)," "),C["\u0275\u0275advance"](5),C["\u0275\u0275property"]("ngbTooltip",o),C["\u0275\u0275advance"](2),C["\u0275\u0275propertyInterpolate1"]("value","",null==(i=C["\u0275\u0275pipeBind1"](11,7,t.additionals$))?null:i.additionalsLenght," adicionales")}}function Be(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",7),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3,"Condici\xf3n fiscal"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](4,"div",8),C["\u0275\u0275elementStart"](5,"span"),C["\u0275\u0275text"](6,"Refacturaci\xf3n"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function Ae(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",1),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3),C["\u0275\u0275pipe"](4,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](5,"div",8),C["\u0275\u0275elementStart"](6,"span"),C["\u0275\u0275text"](7),C["\u0275\u0275pipe"](8,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate1"](" ",C["\u0275\u0275pipeBind1"](4,2,e.fiscalCondition$)," "),C["\u0275\u0275advance"](4),C["\u0275\u0275textInterpolate1"](" ",C["\u0275\u0275pipeBind1"](8,4,e.rebillingPeriod$)," ")}}function Re(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",7),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3,"Medio de pago"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](4,"div",8),C["\u0275\u0275elementStart"](5,"span"),C["\u0275\u0275text"](6,"Cuotas"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function $e(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",1),C["\u0275\u0275elementStart"](1,"div",8),C["\u0275\u0275elementStart"](2,"span"),C["\u0275\u0275text"](3),C["\u0275\u0275pipe"](4,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](5,"div",8),C["\u0275\u0275elementStart"](6,"span"),C["\u0275\u0275text"](7),C["\u0275\u0275pipe"](8,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();var n,i;C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate1"](" ",null==(n=C["\u0275\u0275pipeBind1"](4,2,e.paymentMethod$))?null:n.description," "),C["\u0275\u0275advance"](4),C["\u0275\u0275textInterpolate1"](" ",null==(i=C["\u0275\u0275pipeBind1"](8,4,e.paymentPlan$))?null:i.description," ")}}function De(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",1),C["\u0275\u0275elementStart"](1,"div",13),C["\u0275\u0275elementStart"](2,"label",60),C["\u0275\u0275text"](3,"Campa\xf1a"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](4,"sxf-select",61,62),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,n=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](4),C["\u0275\u0275classMap"]("custom"),C["\u0275\u0275property"]("formControl",n.formCampaign)("items",e)("multiple",!1)("searchable",!1)("placeholder","Seleccione campa\xf1a")("dropdownPosition","bottom")}}function Le(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",69),C["\u0275\u0275elementStart"](1,"div",70),C["\u0275\u0275elementStart"](2,"div"),C["\u0275\u0275text"](3,"Gastos de adquisici\xf3n"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](4,"div"),C["\u0275\u0275text"](5),C["\u0275\u0275pipe"](6,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",70),C["\u0275\u0275elementStart"](8,"div"),C["\u0275\u0275text"](9,"Gastos de explotaci\xf3n"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](10,"div"),C["\u0275\u0275text"](11),C["\u0275\u0275pipe"](12,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](13,"div",70),C["\u0275\u0275elementStart"](14,"div"),C["\u0275\u0275text"](15,"Prima total (GWP)"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](16,"div"),C["\u0275\u0275text"](17),C["\u0275\u0275pipe"](18,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](19,"div",70),C["\u0275\u0275elementStart"](20,"div"),C["\u0275\u0275text"](21,"Regargo financiero"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](22,"div"),C["\u0275\u0275text"](23),C["\u0275\u0275pipe"](24,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](25,"div",70),C["\u0275\u0275elementStart"](26,"div"),C["\u0275\u0275text"](27,"Impuestos internos"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](28,"div"),C["\u0275\u0275text"](29),C["\u0275\u0275pipe"](30,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](31,"div",70),C["\u0275\u0275elementStart"](32,"div"),C["\u0275\u0275text"](33,"Tasa SSN"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](34,"div"),C["\u0275\u0275text"](35),C["\u0275\u0275pipe"](36,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](37,"div",70),C["\u0275\u0275elementStart"](38,"div"),C["\u0275\u0275text"](39,"Servicios sociales"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](40,"div"),C["\u0275\u0275text"](41),C["\u0275\u0275pipe"](42,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](43,"div",70),C["\u0275\u0275elementStart"](44,"div"),C["\u0275\u0275text"](45,"Seguridad vial"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](46,"div"),C["\u0275\u0275text"](47),C["\u0275\u0275pipe"](48,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](49,"div",70),C["\u0275\u0275elementStart"](50,"div"),C["\u0275\u0275text"](51,"Sellados"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](52,"div"),C["\u0275\u0275text"](53),C["\u0275\u0275pipe"](54,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](55,"div",70),C["\u0275\u0275elementStart"](56,"div"),C["\u0275\u0275text"](57,"IVA"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](58,"div"),C["\u0275\u0275text"](59),C["\u0275\u0275pipe"](60,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]().ngIf;C["\u0275\u0275advance"](5),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](6,10,null==e||null==e.cost?null:e.cost.administrativecharge,"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](12,13,(null==e||null==e.cost?null:e.cost.submissionfee)+(null==e||null==e.package||null==e.package.premiums?null:e.package.premiums.assistance),"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](18,16,(null==e||null==e.package||null==e.package.premiums?null:e.package.premiums.total)+(null==e||null==e.cost?null:e.cost.submissionfee)+(null==e||null==e.package||null==e.package.premiums?null:e.package.premiums.assistance)+(null==e||null==e.cost?null:e.cost.administrativecharge),"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](24,19,null==e||null==e.cost?null:e.cost.financial,"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](30,22,null==e||null==e.cost?null:e.cost.internaltax,"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](36,25,null==e||null==e.cost?null:e.cost.ssnrate,"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](42,28,null==e||null==e.cost?null:e.cost.socialservice,"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](48,31,null==e||null==e.cost?null:e.cost.vialrate,"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](54,34,null==e||null==e.cost||null==e.cost.sellado?null:e.cost.sellado.total,"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](60,37,null==e||null==e.cost||null==e.cost.iva?null:e.cost.iva.total,"1.0-0")," ")}}function Fe(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"table",63),C["\u0275\u0275elementStart"](1,"tbody"),C["\u0275\u0275elementStart"](2,"tr"),C["\u0275\u0275elementStart"](3,"td"),C["\u0275\u0275text"](4,"Dcto. promocional"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](5,"th",64),C["\u0275\u0275text"](6),C["\u0275\u0275pipe"](7,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](8,"tr"),C["\u0275\u0275elementStart"](9,"td"),C["\u0275\u0275text"](10,"Prima Comisionable"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](11,"th",64),C["\u0275\u0275text"](12),C["\u0275\u0275pipe"](13,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](14,"tr"),C["\u0275\u0275elementStart"](15,"td",65),C["\u0275\u0275elementStart"](16,"div",66),C["\u0275\u0275elementStart"](17,"div"),C["\u0275\u0275text"](18,"Premio total"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](19,"sxf-icon",67),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const t=C["\u0275\u0275nextContext"]();return t.expandedDetail=!t.expandedDetail})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](20,"div"),C["\u0275\u0275text"](21),C["\u0275\u0275pipe"](22,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](23,Le,61,40,"div",68),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](24,"tr"),C["\u0275\u0275elementStart"](25,"td"),C["\u0275\u0275text"](26,"Cuota"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](27,"th",64),C["\u0275\u0275text"](28),C["\u0275\u0275pipe"](29,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $",C["\u0275\u0275pipeBind2"](7,7,null==e||null==e.cost?null:e.cost.discount,"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](13,10,null==e||null==e.package||null==e.package.premiums?null:e.package.premiums.total,"1.0-0")," "),C["\u0275\u0275advance"](7),C["\u0275\u0275classMap"](n.expandedDetail?"icon-down":"icon-arrow-left"),C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](22,13,null==e||null==e.cost?null:e.cost.total,"1.0-0")," "),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",n.expandedDetail),C["\u0275\u0275advance"](5),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](29,16,null==e||null==e.cost?null:e.cost.invoice,"1.0-0")," ")}}function Te(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"span"),C["\u0275\u0275text"](1,"Contratar"),C["\u0275\u0275elementEnd"]())}function qe(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"span"),C["\u0275\u0275text"](1," Contratando "),C["\u0275\u0275element"](2,"ng-lottie",71),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("options",e.lottieConfig)}}function Qe(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",72),C["\u0275\u0275elementStart"](1,"div",73),C["\u0275\u0275elementStart"](2,"button",45),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const n=t.ngIf,i=C["\u0275\u0275nextContext"]();return 105===n.code?i.goThankYouPage():i.closeModal()})),C["\u0275\u0275text"](3," Aceptar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}}function Ue(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"tr"),C["\u0275\u0275elementStart"](1,"td"),C["\u0275\u0275text"](2),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](3,"td"),C["\u0275\u0275elementStart"](4,"b"),C["\u0275\u0275text"](5),C["\u0275\u0275pipe"](6,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate1"](" ",e.pattern.description," "),C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](6,2,(null==e.terms[0].value?null:e.terms[0].value.current)||e.terms[0].value,"1.0-0")," ")}}function ze(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"table",82),C["\u0275\u0275elementStart"](1,"tbody"),C["\u0275\u0275template"](2,Ue,7,5,"tr",33),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]().$implicit,t=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngForOf",t.getSelectedAdditionals(e))}}function Ge(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"td",83),C["\u0275\u0275elementStart"](1,"a",84),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const t=C["\u0275\u0275nextContext"]().$implicit;return C["\u0275\u0275nextContext"]().goCoverageVehicles(t.id)})),C["\u0275\u0275text"](2," Editar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}}function He(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"tr"),C["\u0275\u0275elementStart"](1,"td",74),C["\u0275\u0275elementStart"](2,"b"),C["\u0275\u0275text"](3),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](4,"br"),C["\u0275\u0275text"](5),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"td",74),C["\u0275\u0275text"](7," Suma asegurada "),C["\u0275\u0275element"](8,"br"),C["\u0275\u0275elementStart"](9,"b"),C["\u0275\u0275text"](10),C["\u0275\u0275pipe"](11,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](12,"td",74),C["\u0275\u0275text"](13," Cobertura "),C["\u0275\u0275element"](14,"br"),C["\u0275\u0275elementStart"](15,"b"),C["\u0275\u0275text"](16),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](17,"td",74),C["\u0275\u0275text"](18," Asistencia mec\xe1nica "),C["\u0275\u0275element"](19,"br"),C["\u0275\u0275elementStart"](20,"b"),C["\u0275\u0275text"](21),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](22,"td",75),C["\u0275\u0275template"](23,ze,3,1,"ng-template",null,76,C["\u0275\u0275templateRefExtractor"]),C["\u0275\u0275elementStart"](25,"div",77),C["\u0275\u0275element"](26,"input",54),C["\u0275\u0275elementStart"](27,"div",78),C["\u0275\u0275elementStart"](28,"span",79),C["\u0275\u0275element"](29,"sxf-icon",80),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](30,Ge,3,0,"td",81),C["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=C["\u0275\u0275reference"](24),i=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate2"]("",e.brand.description," ",e.year,""),C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate1"](" ",e.model.description," "),C["\u0275\u0275advance"](5),C["\u0275\u0275textInterpolate1"](" $ ",C["\u0275\u0275pipeBind2"](11,9,e.statedamount||e.model.statementamount,"1.0-0")," "),C["\u0275\u0275advance"](6),C["\u0275\u0275textInterpolate"](i.getSelectedPackage(e)),C["\u0275\u0275advance"](5),C["\u0275\u0275textInterpolate"](i.getSelectedMechanicalAssistance(e)),C["\u0275\u0275advance"](5),C["\u0275\u0275propertyInterpolate1"]("value","",i.getSelectedAdditionals(e).length," adicionales"),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngbTooltip",i.getSelectedAdditionals(e).length>0?n:""),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",!i.disabledByRetrieve)}}const Ye=function(){return{suppressScrollY:!1}},We=function(){return{size:"xl"}},Je=function(){return{backdrop:"static",keyboard:!1}};let Xe=(()=>{class e{constructor(e,t,n,i,o,r,l,a,s,d,c,m,p){this.producerService=e,this.router=t,this.storePolicy=n,this.storeEmission=i,this.quotingService=o,this.storeQuote=r,this.fiscalConditionService=l,this.notificationService=a,this.quoteIssueAdapter=s,this.paymentMethodService=d,this.paymentPlansService=c,this.producerStore=m,this.storeProducer=p,this.lottieConfig={path:"/assets/loadings/sura-loader.json"},this.child_component={},this.uwEmision={},this.vehicleDetails={},this.modalEditCoverage={},this.currentPolicy={},this.currentMotor={},this.packageSelected={},this.mechanicalAssistance=null,this.isFromRetrieve=null,this.fromRetrieve=!1,this.issueError$=new ae.a,this.subject=new B.a,this.loadingIssue$=new B.a,this.loadingFromRetrieve$=null,this.vehicles$=new ae.a,this.packageSelectedWithAssistance$=new ae.a,this.brandModelPrizeCar$=new ae.a,this.rebillingPeriod$=new ae.a,this.fiscalCondition$=new ae.a,this.additionals$=new ae.a,this.discountAndCommission$=new ae.a,this.campaign$=new ae.a,this.installments$=new ae.a,this.payment$=new ae.a,this.formsValid$=new ae.a,this.expandedDetail=null,this.getQuoteApproved=!1,this.paymentMethod$=new ae.a,this.paymentPlan$=new ae.a,this.emissionStoreSubscription=new u.a,this.emissionStoreSubscriptionRetrieve=new u.a,this.policyStoreProducerSubscription=new u.a,this.producerServiceSubscription=new u.a,this.policyStoreSubscription=new u.a,this.producerStoreSubscription=new u.a,this.isApprovedEmission=!1,this.disabledByRetrieve=null,this.formCampaign=new R.FormControl({value:"",disabled:!0}),this.updateCostSubscription=new u.a,this.producerSubscription=new u.a,this.currentproducer={}}ngOnInit(){this.loadingIssue$.next(!1),this.loadingFromRetrieve$=Object(p.a)([this.storeEmission.select(d.k),this.storePolicy.select(m.b)]).pipe(Object(g.a)(e=>{const t=e[0],n=e[1];return this.isFromRetrieve=!!t,t&&!n.documentNumber?Object(h.a)(!1):Object(h.a)(!0)})),this.emissionStoreSubscriptionRetrieve=this.storeEmission.select(d.d).subscribe(e=>{this.fromRetrieve=!!e.jobNumberFromQuotes}),this.fromRetrieve&&(this.policyStoreSubscription=this.storePolicy.select(m.p).subscribe(e=>{this.storeProducer.dispatch(new le.c(e.producer.code)),this.producerServiceSubscription=this.producerService.getProfile(e.producer.code).subscribe(e=>{this.storeProducer.dispatch(new le.d(e))})})),this.producerSubscription=this.producerStore.select(re.a).subscribe(e=>{this.currentproducer=e}),this.formsValid$=Object(p.a)([this.storeEmission.select(d.f),this.storeEmission.select(d.h),this.storeEmission.select(d.i),this.storeEmission.select(d.j),this.storeEmission.select(d.g)]).pipe(Object(g.a)(e=>e[0]&&e[1]&&e[2]&&e[3]&&e[4]?Object(h.a)(!1):Object(h.a)(!0))),this.payment$=this.storePolicy.select(m.p).pipe(Object(g.a)(e=>{if(null!==e.payment.id)return Object(h.a)(!1);{const t=new P.PaymentValidations(e.payment);if(t.completeModel()&&t.validatePayment())return Object(h.a)(!1)}return Object(h.a)(!0)})),this.vehicles$=this.storePolicy.select(m.p).pipe(Object(g.a)(e=>{const t=e.motor.vehicles;return Object(h.a)(t)})),this.packageSelectedWithAssistance$=Object(p.a)([this.storePolicy.select(m.p),this.storeQuote.select(A.v),this.storeEmission.select(d.k),this.storeQuote.select(A.p)]).pipe(Object(g.a)(e=>{var t,n,i,o,r;this.currentPolicy=e[0],this.currentMotor=e[0].motor.vehicles.find(t=>t.number===e[1].activeMotor);const l=e[0].motor.vehicles.find(t=>t.number===e[1].activeMotor);if(this.getQuoteApproved=e[3],null===(null==l?void 0:l.year))return Object(h.a)({});const a=null===(t=null==l?void 0:l.packages)||void 0===t?void 0:t.find(e=>e.selected),s=null===(n=null==a?void 0:a.coverages)||void 0===n?void 0:n.find(e=>"SURA_CA7_AsistenciaMecanicaCov"===e.pattern.code),d=null===(i=this.currentPolicy)||void 0===i?void 0:i.costs[0];return Object(h.a)({package:a,assistance:s?null===(r=null===(o=s.terms[0])||void 0===o?void 0:o.value)||void 0===r?void 0:r.current:"NoAssistance",cost:d})})),this.additionals$=Object(p.a)([this.storePolicy.select(m.p),this.storeQuote.select(A.v)]).pipe(Object(g.a)(e=>{var t,n,i;const o=e[0].motor.vehicles.filter(t=>t.number===e[1].activeMotor)[0];if(null===o.year)return Object(h.a)({additionalsLenght:0,additionals:[]});const r=null===(i=null===(n=null===(t=null==o?void 0:o.packages)||void 0===t?void 0:t.find(e=>e.selected))||void 0===n?void 0:n.coverages)||void 0===i?void 0:i.filter(e=>"SURA_CA7_ClausulaDeAjusteCov"!==e.pattern.code&&"SURA_CA7_AsistenciaMecanicaCov"!==e.pattern.code&&!e.pattern.code.startsWith("SURA_CA7_Mobility")).filter(e=>"SURA_CA7_CobAdicionalesGrp"===e.category.code||"SURA_CA7_AccesoriosGrp"===e.category.code);return Object(h.a)({additionalsLenght:null==r?void 0:r.length,additionals:r})})),this.brandModelPrizeCar$=Object(p.a)([this.storePolicy.select(m.p),this.storeQuote.select(A.v)]).pipe(Object(g.a)(e=>{var t,n,i;const o=e[0].motor.vehicles.filter(t=>t.number===e[1].activeMotor)[0];return null===o.year?Object(h.a)({}):Object(h.a)({type:o.group,brand:null===(t=null==o?void 0:o.brand)||void 0===t?void 0:t.description,model:null===(n=null==o?void 0:o.model)||void 0===n?void 0:n.description,prize:o.statedamount||(null===(i=null==o?void 0:o.model)||void 0===i?void 0:i.statementamount)})})),this.rebillingPeriod$=this.storePolicy.select(m.p).pipe(Object(g.a)(e=>{let t="";switch(e.period.method){case"Sura_ThreeMonths":t="Trimestral";break;case"HalfYear":t="Semestral";break;case"Sura_OneMonth":t="Mensual";break;case"Annual":t="Anual"}return Object(h.a)(t)})),this.fiscalCondition$=Object(p.a)([this.storePolicy.select(m.p),this.fiscalConditionService.getAllFiscalCondition()]).pipe(Object(g.a)(e=>{const t=e[1].filter(t=>t.code===e[0].fiscalcondition)[0].description;return Object(h.a)(t)})),this.discountAndCommission$=this.storePolicy.select(m.p).pipe(Object(g.a)(e=>{var t,n;const i=null===(n=null===(t=null==e?void 0:e.motor)||void 0===t?void 0:t.discounts.find(e=>"SuraCA7_ExternalComercialDiscount"===e.code))||void 0===n?void 0:n.value;return Object(h.a)({discount:i,commission:e.motor.commission.producer})})),this.campaign$=this.storePolicy.select(m.p).pipe(Object(D.a)("campaign"),Object(g.a)(e=>(null==e?void 0:e.campaign)?Object(h.a)([e.campaign]):Object(h.a)(null)),Object(f.a)(e=>{null!==e&&this.formCampaign.setValue(e[0].id)})),this.installments$=this.storePolicy.select(m.p).pipe(Object(de.a)(e=>e.paymentTerm.maximumnumberofinstallments)),this.issueError$=this.subject.pipe(Object(ce.a)()),this.emissionStoreSubscription=this.storeEmission.select(d.d).subscribe(e=>{this.isApprovedEmission=e.approvedEmission,this.disabledByRetrieve=!!e.jobNumberFromQuotes}),this.paymentMethod$=this.storePolicy.select(m.p).pipe(Object(D.a)("payment"),Object(g.a)(e=>e.payment?this.paymentMethodService.getAllPaymentMethods(e.job).pipe(Object(g.a)(t=>Object(h.a)(t.filter(t=>t.code===e.payment.method)[0]))):Object(h.a)(se.a))),this.paymentPlan$=this.storePolicy.select(m.p).pipe(Object(y.a)(),Object(g.a)(e=>e?this.paymentPlansService.getAllPaymentPlans("ars",e.payment.method,e.producer.code,new Date(e.period.start).toISOString(),new Date(e.period.end).toISOString()).pipe(Object(g.a)(t=>{const n=t.find(t=>t.code===e.payment.plan.code);return this.storePolicy.dispatch(new c.s(n)),Object(h.a)(n)})):Object(h.a)(se.a)))}ngOnDestroy(){var e,t,n,i,o,r,l,a;null===(e=this.producerServiceSubscription)||void 0===e||e.unsubscribe(),null===(t=this.policyStoreSubscription)||void 0===t||t.unsubscribe(),null===(n=this.emissionStoreSubscription)||void 0===n||n.unsubscribe(),null===(i=this.emissionStoreSubscriptionRetrieve)||void 0===i||i.unsubscribe(),null===(o=this.producerStoreSubscription)||void 0===o||o.unsubscribe(),null===(r=this.policyStoreProducerSubscription)||void 0===r||r.unsubscribe(),null===(l=this.updateCostSubscription)||void 0===l||l.unsubscribe(),null===(a=this.producerSubscription)||void 0===a||a.unsubscribe()}checkUW(){this.issuePolicy()}issuePolicy(){if(this.loadingIssue$.next(!0),this.isApprovedEmission)return void this.quotingService.emitPolicy(this.currentPolicy).subscribe(e=>this.issueSuccess(e),e=>this.issueError(e));const e=this.quoteIssueAdapter.adapt(this.currentPolicy);this.quotingService.issuePolicy(e).subscribe(e=>this.issueSuccess(e),e=>this.issueError(e))}closeModal(){this.child_component.closeModal()}goThankYouPage(){this.child_component.closeModal(),this.storeEmission.dispatch(new s.p(!0)),this.router.navigateByUrl("quoting/thankyou")}closeUWModal(e=null){"continue"===e&&this.issuePolicy(),this.uwEmision.closeModal()}getAssistanceDescription(e){var t;const n=e;return Object(h.a)((null===(t=[{code:"SOSBasic",description:"SOS B\xe1sica"},{code:"SOSPremium",description:"SOS Premium"},{code:"NoAssistance",description:"Sin Asistencia"}].find(e=>e.code===n))||void 0===t?void 0:t.description)||"Sin Asistencia")}goCoverage(){this.router.navigateByUrl("quoting/coverage/"+this.currentMotor.number)}goQuote(){this.storeQuote.dispatch(new a.i("motor/"+this.currentMotor.number+"/sum")),this.storeQuote.dispatch(new a.q("motor")),this.router.navigateByUrl("/quoting/quote/questions/motor/"+this.currentMotor.number+"/sum"),this.modalEditCoverage.closeModal()}openModal(){this.modalEditCoverage.openModal()}goCoverageVehicles(e){this.storeQuote.dispatch(new a.r(e)),this.closeVehicleDetails(),this.router.navigateByUrl("quoting/coverage/"+e)}issueSuccess(e){var t,n;this.loadingIssue$.next(!1),e.inspection&&this.storePolicy.dispatch(new c.w(e.inspection.status)),e.policynumber?(this.storePolicy.dispatch(new c.D(e.policynumber)),this.storeEmission.dispatch(new s.p(!1)),this.router.navigateByUrl(e.inspection?this.currentMotor.zerokm?"quoting/thankyou":"quoting/inspection":"quoting/thankyou")):(null===(t=e.inspection)||void 0===t?void 0:t.status)?(this.storeEmission.dispatch(new s.p(!1)),this.router.navigateByUrl(this.currentMotor.zerokm?"quoting/thankyou":"quoting/inspection")):(null===(n=e.error)||void 0===n?void 0:n.code)===me.a.UNDERWRITER?(this.storeEmission.dispatch(new s.p(!0)),this.router.navigateByUrl("quoting/thankyou")):(this.subject.next(e.error),this.child_component.openModal())}issueError(e){this.loadingIssue$.next(!1),e.code===me.a.UNDERWRITER?(this.storeEmission.dispatch(new s.p(!0)),this.router.navigateByUrl("quoting/thankyou")):e.message.includes("Bad Request")?this.notificationService.notify({code:-2,description:"Ha ocurrido un error, por favor intentelo mas tarde"}):this.notificationService.notify({code:-2,description:e.message.replace(/^[^:]+: */,"")})}openVehicleDetails(){this.vehicleDetails.openModal()}closeVehicleDetails(){this.vehicleDetails.closeModal()}getSelectedPackage(e){var t,n,i;return(null===(n=null===(t=e.packages)||void 0===t?void 0:t.find(e=>e.selected))||void 0===n?void 0:n.description)||(null===(i=e.package)||void 0===i?void 0:i.description)}getSelectedMechanicalAssistance(e){var t,n,i,o,r,l,a,s;const d=(null===(o=null===(i=null===(n=null===(t=null==e?void 0:e.packages)||void 0===t?void 0:t.find(e=>e.selected))||void 0===n?void 0:n.coverages)||void 0===i?void 0:i.find(e=>"SURA_CA7_AsistenciaMecanicaCov"===e.pattern.code))||void 0===o?void 0:o.terms[0])||(null===(a=null===(l=null===(r=e.package)||void 0===r?void 0:r.coverages)||void 0===l?void 0:l.find(e=>"SURA_CA7_AsistenciaMecanicaCov"===e.pattern.code))||void 0===a?void 0:a.terms[0]);return(null===(s=[{value:"SOSBasic",description:"SOS B\xe1sica"},{value:"SOSPremium",description:"SOS Premium"},{value:"NoAssistance",description:"Sin Asistencia"}].find(e=>{var t;return e.value===(null===(t=null==d?void 0:d.value)||void 0===t?void 0:t.current)}))||void 0===s?void 0:s.description)||"Sin Asistencia"}getSelectedAdditionals(e){var t,n,i;const o=(null===(n=null===(t=e.packages)||void 0===t?void 0:t.find(e=>e.selected))||void 0===n?void 0:n.coverages)||(null===(i=e.package)||void 0===i?void 0:i.coverages),r=["SURA_CA7_CobAdicionalesGrp","SURA_CA7_AccesoriosGrp"],l=["SURA_CA7_AsistenciaMecanicaCov","SURA_CA7_ClausulaDeAjusteCov","SURA_CA7_MobilityTheftDamageCov","SURA_CA7_MobilityDeathCov","SURA_CA7_MobilityIncapacityCov","SURA_CA7_MobilityBoneFractureCov","SURA_CA7_MobilityInterIncomeCov","SURA_CA7_MobilityDamageToThirdCov","SURA_CA7_MobilityTheftPersonalEffectsCov","SURA_CA7_MobilityTheftPersonalDocCov","SURA_CA7_MobilityTheftElectronicEquipCov"];return(null==o?void 0:o.filter(e=>{var t,n;return r.includes(null===(t=null==e?void 0:e.category)||void 0===t?void 0:t.code)&&!l.includes(null===(n=null==e?void 0:e.pattern)||void 0===n?void 0:n.code)}))||[]}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275directiveInject"](ue.ProducerService),C["\u0275\u0275directiveInject"](i.h),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](P.QuotingService),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](P.FiscalConditionService),C["\u0275\u0275directiveInject"](pe.a),C["\u0275\u0275directiveInject"](he.a),C["\u0275\u0275directiveInject"](P.PaymentMethodService),C["\u0275\u0275directiveInject"](P.PaymentPlansService),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](o.h))},e.\u0275cmp=C["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-details"]],viewQuery:function(e,t){var n;1&e&&(C["\u0275\u0275viewQuery"](be,!0),C["\u0275\u0275viewQuery"](fe,!0),C["\u0275\u0275viewQuery"](ge,!0),C["\u0275\u0275viewQuery"](ye,!0)),2&e&&(C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.child_component=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.uwEmision=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.vehicleDetails=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalEditCoverage=n.first))},decls:128,vars:84,consts:[[1,"details","sticky-top","p-3"],[1,"row"],[1,"row","ml-0"],[1,"col-lg-12","pt-3"],["class","title",4,"ngIf"],[1,"col-lg-12",2,"position","relative","height","calc(90vh - 80px)",3,"perfectScrollbar"],["class","row mt-2",4,"ngIf"],[1,"row","item-title","mt-4"],[1,"col-lg-6"],["class","row item-title mt-4",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","mb-1"],[1,"row","mt-3"],[1,"col-lg-12"],[1,"tsummary","mb-3"],["class","table table-sm table-borderless",4,"ngIf"],[1,"row","py-3",2,"box-shadow","0px -1px 4px rgba(0, 0, 0, 0.18)","position","fixed","bottom","0","width","25%","height","auto","background","#ffffff","z-index","2000"],[1,"continue","btn","btn-primary","btn-lg","btn-block","btn-next-screen",3,"disabled","click"],[4,"ngIf"],["childComp",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","modal-footer",4,"ngIf"],[3,"options"],["vehicleDetails",""],[1,"modal-header","modal-header-items"],["id","modal-basic-title",1,"modal-vehicle-title"],["type","button","aria-label","Close","name","closeModalBtn",1,"close",3,"click"],[1,"modal-body","modal-body-items"],["id","details-table",1,"details-table",2,"max-width","100%","min-width","100%","width","100%"],[4,"ngFor","ngForOf"],["modalEditCoverage",""],[1,"modal-header",2,"padding-bottom","25px !important"],["id","modal-basic-title",2,"padding-left","15px","font-size","18px !important","font-weight","700","color","#0033a0"],["type","button","aria-label","Close","name","closeModalBtn",1,"close","closeButtom",2,"padding-top","15px","padding-right","63px","padding-bottom","0px",3,"click"],["aria-hidden","true",2,"font-size","3rem","color","#06369e"],[1,"col-lg-10"],[1,"modal-title",2,"font-size","2rem !important"],[1,"modal-footer",2,"padding-top","54px !important"],[1,"col-lg-4","offset-lg-3","pl-0"],["type","button",1,"btn","btn-modal","btn-lg","btn-block",3,"click"],[1,"col-lg-5","pl-0"],["type","button",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],[1,"title"],[1,"row","mt-2"],["class","col-lg-6",4,"ngIf"],[1,"change-coverage",2,"cursor","pointer",3,"click"],[1,"quantityVehicles"],[1,"show-detail",2,"cursor","pointer",3,"click"],["tipContent",""],[1,"input-group",2,"margin-top","-15px",3,"ngbTooltip"],["readonly","","type","text",1,"form-control",2,"cursor","pointer",3,"value"],[1,"input-group-append"],[1,"input-group-text"],["type","view",1,"icon-blue"],[1,"table-sm"],[2,"border-bottom","solid 1px"],["for","campaign"],["disabledOnEmpty","true","bindLabel","description","bindValue","id","name","campaign",3,"formControl","items","multiple","searchable","placeholder","dropdownPosition"],["campaign",""],[1,"table","table-sm","table-borderless"],[1,"text-right"],["colspan","2",1,"costs-details"],[1,"main"],[3,"click"],["class","childrens",4,"ngIf"],[1,"childrens"],[1,"child"],["width","4.75rem","height","2.25rem",3,"options"],[1,"modal-footer"],[1,"offset-8","col-4"],["width","17%"],["width","15%"],["tooltipContent",""],[1,"input-group"],["id","detail-tooltip",1,"input-group-append"],["placement","bottom",1,"input-group-text",3,"ngbTooltip"],["type","view",1,"icon-green"],["width","17%","class","text-center",4,"ngIf"],[1,"additional-table"],["width","17%",1,"text-center"],[1,"edit-vehicle-coverage",3,"click"]],template:function(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",1),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275elementStart"](3,"div",3),C["\u0275\u0275template"](4,Se,3,3,"span",4),C["\u0275\u0275pipe"](5,"async"),C["\u0275\u0275template"](6,Ee,2,0,"span",4),C["\u0275\u0275pipe"](7,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](8,"div",5),C["\u0275\u0275template"](9,Pe,4,4,"div",6),C["\u0275\u0275pipe"](10,"async"),C["\u0275\u0275template"](11,we,8,3,"div",6),C["\u0275\u0275pipe"](12,"async"),C["\u0275\u0275elementStart"](13,"div",7),C["\u0275\u0275elementStart"](14,"div",8),C["\u0275\u0275elementStart"](15,"span"),C["\u0275\u0275text"](16,"C\xf3digo de Productor"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](17,"div",8),C["\u0275\u0275elementStart"](18,"span"),C["\u0275\u0275text"](19,"Productor"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](20,"div",1),C["\u0275\u0275elementStart"](21,"div",8),C["\u0275\u0275elementStart"](22,"span"),C["\u0275\u0275text"](23),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](24,"div",8),C["\u0275\u0275elementStart"](25,"span"),C["\u0275\u0275text"](26),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](27,Ie,9,5,"div",9),C["\u0275\u0275pipe"](28,"async"),C["\u0275\u0275template"](29,Me,11,11,"div",10),C["\u0275\u0275pipe"](30,"async"),C["\u0275\u0275template"](31,Oe,7,0,"div",9),C["\u0275\u0275pipe"](32,"async"),C["\u0275\u0275template"](33,ke,10,9,"div",10),C["\u0275\u0275pipe"](34,"async"),C["\u0275\u0275template"](35,_e,5,0,"div",9),C["\u0275\u0275pipe"](36,"async"),C["\u0275\u0275template"](37,je,15,9,"div",10),C["\u0275\u0275pipe"](38,"async"),C["\u0275\u0275template"](39,Be,7,0,"div",9),C["\u0275\u0275pipe"](40,"async"),C["\u0275\u0275template"](41,Ae,9,6,"div",10),C["\u0275\u0275pipe"](42,"async"),C["\u0275\u0275template"](43,Re,7,0,"div",9),C["\u0275\u0275pipe"](44,"async"),C["\u0275\u0275template"](45,$e,9,6,"div",10),C["\u0275\u0275pipe"](46,"async"),C["\u0275\u0275elementStart"](47,"div",7),C["\u0275\u0275elementStart"](48,"div",8),C["\u0275\u0275elementStart"](49,"span"),C["\u0275\u0275text"](50,"Dto"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](51,"div",8),C["\u0275\u0275elementStart"](52,"span"),C["\u0275\u0275text"](53,"Comisi\xf3n"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](54,"div",11),C["\u0275\u0275elementStart"](55,"div",8),C["\u0275\u0275elementStart"](56,"span"),C["\u0275\u0275text"](57),C["\u0275\u0275pipe"](58,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](59,"div",8),C["\u0275\u0275elementStart"](60,"span"),C["\u0275\u0275text"](61),C["\u0275\u0275pipe"](62,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](63,De,6,8,"div",10),C["\u0275\u0275pipe"](64,"async"),C["\u0275\u0275elementStart"](65,"div",12),C["\u0275\u0275elementStart"](66,"div",13),C["\u0275\u0275elementStart"](67,"div",14),C["\u0275\u0275template"](68,Fe,30,19,"table",15),C["\u0275\u0275pipe"](69,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](70,"div",16),C["\u0275\u0275elementStart"](71,"div",13),C["\u0275\u0275elementStart"](72,"button",17),C["\u0275\u0275listener"]("click",(function(){return t.checkUW()})),C["\u0275\u0275pipe"](73,"async"),C["\u0275\u0275pipe"](74,"async"),C["\u0275\u0275pipe"](75,"async"),C["\u0275\u0275template"](76,Te,2,0,"span",18),C["\u0275\u0275pipe"](77,"async"),C["\u0275\u0275template"](78,qe,3,1,"span",18),C["\u0275\u0275pipe"](79,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](80,"sxf-modal",null,19),C["\u0275\u0275elementStart"](82,"div",20),C["\u0275\u0275elementStart"](83,"h4",21),C["\u0275\u0275text"](84," Error "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](85,"button",22),C["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),C["\u0275\u0275elementStart"](86,"span",23),C["\u0275\u0275text"](87,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](88,"div",24),C["\u0275\u0275elementStart"](89,"p"),C["\u0275\u0275text"](90),C["\u0275\u0275pipe"](91,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](92,Qe,4,0,"div",25),C["\u0275\u0275pipe"](93,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](94,"sxf-modal",26,27),C["\u0275\u0275elementStart"](96,"div",28),C["\u0275\u0275elementStart"](97,"div",29),C["\u0275\u0275text"](98," Autos a asegurar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](99,"button",30),C["\u0275\u0275listener"]("click",(function(){return t.closeVehicleDetails()})),C["\u0275\u0275elementStart"](100,"span",23),C["\u0275\u0275text"](101,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](102,"br"),C["\u0275\u0275elementStart"](103,"div",31),C["\u0275\u0275elementStart"](104,"table",32),C["\u0275\u0275template"](105,He,31,12,"tr",33),C["\u0275\u0275pipe"](106,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](107,"sxf-modal",26,34),C["\u0275\u0275elementStart"](109,"div",35),C["\u0275\u0275elementStart"](110,"h4",36),C["\u0275\u0275text"](111," Editar cotizaci\xf3n "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](112,"button",37),C["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),C["\u0275\u0275elementStart"](113,"span",38),C["\u0275\u0275text"](114," \xd7 "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](115,"div",24),C["\u0275\u0275elementStart"](116,"div",39),C["\u0275\u0275elementStart"](117,"h4",40),C["\u0275\u0275text"](118," Al editar cualquier dato de la cotizaci\xf3n, se recotizar\xe1 con las tarifas actuales. \xbfQuer\xe9s editarla de todos modos? "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](119,"div",41),C["\u0275\u0275elementStart"](120,"div",1),C["\u0275\u0275elementStart"](121,"div",42),C["\u0275\u0275elementStart"](122,"button",43),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275reference"](108).closeModal()})),C["\u0275\u0275text"](123," Cancelar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](124,"div",44),C["\u0275\u0275elementStart"](125,"button",45),C["\u0275\u0275listener"]("click",(function(){return t.goQuote()})),C["\u0275\u0275elementStart"](126,"span"),C["\u0275\u0275text"](127,"Editar Cotizaci\xf3n"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){var n;const e=1===(null==(n=C["\u0275\u0275pipeBind1"](5,29,t.vehicles$))?null:n.length);var i;const y=(null==(i=C["\u0275\u0275pipeBind1"](7,31,t.vehicles$))?null:i.length)>1;var o;const S=1===(null==(o=C["\u0275\u0275pipeBind1"](10,33,t.vehicles$))?null:o.length);var r;const E=(null==(r=C["\u0275\u0275pipeBind1"](12,35,t.vehicles$))?null:r.length)>1;var l;const x=1===(null==(l=C["\u0275\u0275pipeBind1"](28,37,t.vehicles$))?null:l.length);var a;const P=1===(null==(a=C["\u0275\u0275pipeBind1"](30,39,t.vehicles$))?null:a.length);var s;const w=1===(null==(s=C["\u0275\u0275pipeBind1"](32,41,t.vehicles$))?null:s.length);var d;const I=1===(null==(d=C["\u0275\u0275pipeBind1"](34,43,t.vehicles$))?null:d.length);var c;const M=1===(null==(c=C["\u0275\u0275pipeBind1"](36,45,t.vehicles$))?null:c.length);var m;const O=1===(null==(m=C["\u0275\u0275pipeBind1"](38,47,t.vehicles$))?null:m.length);var u;const k=(null==(u=C["\u0275\u0275pipeBind1"](40,49,t.vehicles$))?null:u.length)>1;var p;const _=(null==(p=C["\u0275\u0275pipeBind1"](42,51,t.vehicles$))?null:p.length)>1;var h;const N=(null==(h=C["\u0275\u0275pipeBind1"](44,53,t.vehicles$))?null:h.length)>1;var v;const V=(null==(v=C["\u0275\u0275pipeBind1"](46,55,t.vehicles$))?null:v.length)>1;var b,f,g;C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("ngIf",e),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",y),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("perfectScrollbar",C["\u0275\u0275pureFunction0"](81,Ye)),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",S),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",E),C["\u0275\u0275advance"](12),C["\u0275\u0275textInterpolate1"](" ",t.currentproducer.code," "),C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate1"](" ",t.currentproducer.description," "),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",x),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",P),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",w),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",I),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",M),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",O),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",k),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",_),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",N),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",V),C["\u0275\u0275advance"](12),C["\u0275\u0275textInterpolate1"]("",(null==(b=C["\u0275\u0275pipeBind1"](58,57,t.discountAndCommission$))?null:b.discount)||0,"%"),C["\u0275\u0275advance"](4),C["\u0275\u0275textInterpolate1"]("",(null==(f=C["\u0275\u0275pipeBind1"](62,59,t.discountAndCommission$))?null:f.commission)||0,"%"),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](64,61,t.campaign$)),C["\u0275\u0275advance"](5),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](69,63,t.packageSelectedWithAssistance$)),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("disabled",C["\u0275\u0275pipeBind1"](73,65,t.formsValid$)||C["\u0275\u0275pipeBind1"](74,67,t.payment$)||C["\u0275\u0275pipeBind1"](75,69,t.loadingIssue$)),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("ngIf",!0!==C["\u0275\u0275pipeBind1"](77,71,t.loadingIssue$)),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](79,73,t.loadingIssue$)),C["\u0275\u0275advance"](12),C["\u0275\u0275textInterpolate"](null==(g=C["\u0275\u0275pipeBind1"](91,75,t.issueError$))?null:g.description),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](93,77,t.issueError$)),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("options",C["\u0275\u0275pureFunction0"](82,We)),C["\u0275\u0275advance"](11),C["\u0275\u0275property"]("ngForOf",C["\u0275\u0275pipeBind1"](106,79,t.vehicles$)),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("options",C["\u0275\u0275pureFunction0"](83,Je))}},directives:[M.o,oe.b,I.a,M.n,ve.o,T.a,Q.a,R.NgControlStatus,R.FormControlDirective,O.a],pipes:[M.b,M.x,M.f],styles:[".details[_ngcontent-%COMP%]{background:#fff;margin-top:1px;padding-top:0!important;border-left:1px solid #c4c4c4;background-color:#fff;font-size:.875rem;height:100vh}.details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.625rem;font-weight:700;color:#06369e}.details[_ngcontent-%COMP%]   .show-detail[_ngcontent-%COMP%]{float:right}.details[_ngcontent-%COMP%]   .change-coverage[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   .show-detail[_ngcontent-%COMP%]{color:#00aec7;font-weight:700}.details[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{color:#06369e;font-weight:700}.details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-size:.75rem}.details[_ngcontent-%COMP%]   .tsummary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:0;font-size:.875rem}.details[_ngcontent-%COMP%]   .tsummary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #c4c4c4}.details[_ngcontent-%COMP%]   .tsummary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   .tsummary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-left:0;padding-bottom:.05rem}input[type=text].form-control[_ngcontent-%COMP%]{border-top-left-radius:.5em;border-bottom-left-radius:.5em;border-top:.0625rem solid #c4c4c4;border-bottom:.0625rem solid #c4c4c4;border-right:none;background-color:transparent;padding:0!important;height:auto;box-shadow:none;color:#000}.icon-blue[_ngcontent-%COMP%]{color:#00aec7!important}.input-group-text[_ngcontent-%COMP%]{padding:0!important}.input-group-text[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%]:hover{border-top-right-radius:.5em;border-bottom-right-radius:.5em;border:1px solid #c4c4c4!important}.edit-vehicle-coverage[_ngcontent-%COMP%]{cursor:pointer!important;font-size:.9375rem!important;font-weight:700!important;color:#00aec7!important}input[type=text][_ngcontent-%COMP%]{text-align:center}.append[_ngcontent-%COMP%], .input-group-append[_ngcontent-%COMP%]{height:32px}.append[_ngcontent-%COMP%]{border-radius:1em;border-top:.0625rem solid #c4c4c4;border-bottom:.0625rem solid #c4c4c4;background-color:transparent;padding:0;box-shadow:none;color:#000;line-height:35px;padding-right:3px}.costs-details[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.costs-details[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{margin-left:auto;font-weight:700}.costs-details[_ngcontent-%COMP%]   .childrens[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.costs-details[_ngcontent-%COMP%]   .childrens[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]{margin-left:10px;border-bottom:1px solid #c4c4c4;font-weight:400;font-size:12px;padding:5px 0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.costs-details[_ngcontent-%COMP%]   .childrens[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]:last-child{border-bottom:none}.quantityVehicles[_ngcontent-%COMP%]{border:1px solid #c4c4c4;border-radius:5px;margin-left:1px;padding:6px}.modal-title[_ngcontent-%COMP%]{font-size:1rem}.modal-vehicle-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:400;color:#0033a0}.details-table[_ngcontent-%COMP%]{font-size:.875rem;margin-left:-20px}.details-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #c4c4c4}.details-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:1px solid #c4c4c4}.details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}.additional-table[_ngcontent-%COMP%]{tr-border-bottom:1px solid #c4c4c4}.additional-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{min-width:5rem;border-bottom:1px solid #000}"]}),e})();function Ze(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"sxf-icon",15),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const t=C["\u0275\u0275nextContext"]().$implicit;return C["\u0275\u0275nextContext"]().currentRoute(t.path)})),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]().$implicit;C["\u0275\u0275property"]("routerLink",e.path)("disabled",e.disabled)}}function Ke(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"span",16),C["\u0275\u0275text"](1),C["\u0275\u0275pipe"](2,"uppercase"),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]().$implicit;C["\u0275\u0275advance"](1),C["\u0275\u0275textInterpolate1"](" ",C["\u0275\u0275pipeBind1"](2,1,e.value)," ")}}function et(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",17),C["\u0275\u0275element"](1,"router-outlet"),C["\u0275\u0275elementEnd"]())}const tt=function(e,t){return{active:e,visited:t}};function nt(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"li",6),C["\u0275\u0275elementStart"](1,"div",7),C["\u0275\u0275elementStart"](2,"div",8),C["\u0275\u0275elementStart"](3,"div",9),C["\u0275\u0275template"](4,Ze,1,2,"sxf-icon",10),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](5,"label",11),C["\u0275\u0275text"](6),C["\u0275\u0275template"](7,Ke,3,3,"span",12),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](8,"div",13),C["\u0275\u0275template"](9,et,2,0,"div",14),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=C["\u0275\u0275nextContext"]();C["\u0275\u0275property"]("ngClass",C["\u0275\u0275pureFunction2"](6,tt,e.path==n.routeActive,!(null===e.value||e.value.length<1))),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("ngIf",e.show&&!e.disabled),C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate1"](" ",null===e.value||e.value.length<1?e.question:e.shortName+": "," "),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",!(null===e.value||e.value.length<1)),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngbCollapse",!e.show),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",e.path===n.routeActive)}}const it=function(){return{suppressScrollY:!1}};let ot=(()=>{class e{constructor(e){this.store=e,this.routes=[],this.routeActive=""}ngOnInit(){this.store.select(d.m).subscribe(e=>{this.routes=e}),this.store.select(d.a).subscribe(e=>{this.routeActive=e,""===e&&(this.store.dispatch(new s.c("client")),this.routeActive="client")})}currentRoute(e){this.store.dispatch(new s.c(e))}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275directiveInject"](o.h))},e.\u0275cmp=C["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-emission-questions"]],decls:8,vars:3,consts:[[1,"row"],[1,"col-lg-9","pr-2","ps",2,"position","relative","min-height","90vh","max-height","90vh","height","90vh",3,"perfectScrollbar"],[1,"questions","col-lg-10","offset-lg-1"],[1,"timeline","list-group"],["class","list-group-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-lg-3","px-0","ps"],[1,"list-group-item",3,"ngClass"],[1,"row","header"],[1,"col-lg-12","line"],[1,"float-right","edit"],["type","edit",3,"routerLink","disabled","click",4,"ngIf"],[1,"mb-2"],["class","item-value",4,"ngIf"],["id","collapseExample",3,"ngbCollapse"],["class"," ",4,"ngIf"],["type","edit",3,"routerLink","disabled","click"],[1,"item-value"],[1,""]],template:function(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",1),C["\u0275\u0275elementStart"](2,"div",0),C["\u0275\u0275elementStart"](3,"div",2),C["\u0275\u0275elementStart"](4,"ul",3),C["\u0275\u0275template"](5,nt,10,9,"li",4),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"div",5),C["\u0275\u0275element"](7,"sxf-details"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e&&(C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("perfectScrollbar",C["\u0275\u0275pureFunction0"](2,it)),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("ngForOf",t.routes))},directives:[oe.b,M.n,Xe,M.m,M.o,ve.d,T.a,i.i,i.k],pipes:[M.z],styles:[".list-group-item[_ngcontent-%COMP%]{padding-left:0;padding-right:0;padding-bottom:0;border:0}.list-group-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:none;color:#768692;font-size:.875rem}.list-group-item.active[_ngcontent-%COMP%]{background-color:#fff;border-color:#fff;margin-bottom:2rem}.list-group-item.active[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1.3rem}.list-group-item.active[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{display:none}.list-group-item.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.625rem;color:#06369e;font-weight:700;margin-bottom:0}.list-group-item.active[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:block}.list-group-item.active[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{border-bottom:0}.list-group-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#c4c4c4}.list-group-item.visited[_ngcontent-%COMP%]:not(.active)   label[_ngcontent-%COMP%]{font-size:.9375rem;color:#c4c4c4;margin-bottom:0}.list-group-item.visited[_ngcontent-%COMP%]:not(.active)   label[_ngcontent-%COMP%]   .item-value[_ngcontent-%COMP%]{color:#393b3d}.list-group-item[_ngcontent-%COMP%]:last-child   .line[_ngcontent-%COMP%]{border-bottom:0;padding-left:0}.line[_ngcontent-%COMP%]{border-bottom:2px solid rgba(0,0,0,.125);padding-left:0}.questions[_ngcontent-%COMP%]{margin-top:1rem}"]}),e})();var rt=n("wgY5");function lt(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",1),C["\u0275\u0275elementStart"](1,"div",10),C["\u0275\u0275elementStart"](2,"span",11),C["\u0275\u0275elementStart"](3,"b"),C["\u0275\u0275text"](4,"La fecha ingresada requiere autorizaci\xf3n."),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}let at=(()=>{class e{constructor(e,t,n,i,o){this.fb=e,this.storePolicy=t,this.flowRouteEmissionService=n,this.storeEmission=i,this.storeQuote=o,this.isLessThatToday$=new B.a,this.retroactiveVigence=!1}ngOnInit(){this.formValidaty=this.fb.group({beginningValidity:[,R.Validators.required]}),this.storeQuote.select(A.x).subscribe(e=>{this.today=rt(e,"YYYY-MM-DD"),this.date={year:this.today.year(),month:this.today.month()+1,day:this.today.date()};const t=rt(this.today).subtract(2,"months"),n=rt(this.today).add(30,"days");this.minDate={year:t.year(),month:t.month()+1,day:t.date()},this.maxDate={year:n.year(),month:n.month()+1,day:n.date()}}),this.storePolicy.select(m.o).subscribe(e=>{const t=rt(e.start,"YYYY-MM-DD"),n={year:t.year(),month:t.month()+1,day:t.date()};switch(e.method){case"Sura_ThreeMonths":default:this.rebillingMonths=3,this.rebillingCode="Sura_ThreeMonths"}this.formValidaty.get("beginningValidity").setValue(n,{emitEvent:!0});const i=new Date(n.year,n.month,n.day).toDateString(),o=rt(i);this.retroactiveVigence=o.subtract(1,"month").diff(this.today,"days")<0}).unsubscribe(),this.storeEmission.select(d.m).subscribe(e=>{this.routes=e}),this.formValidaty.get("beginningValidity").valueChanges.subscribe(e=>{if(null!==e){const t=new Date(e.year,e.month,e.day).toDateString(),n=rt(t);this.retroactiveVigence=n.subtract(1,"month").diff(this.today,"days")<0,this.periodData={start:n.format(),end:n.add(this.rebillingMonths,"months").format(),method:this.rebillingCode},this.storePolicy.dispatch(new c.A(this.periodData))}}),this.disabledByRetrieve$=Object(p.a)([this.storeEmission.select(d.d),this.storePolicy.select(m.p)]).subscribe(e=>{const t=e[1];this.disabledByRetrieve=!!(e[0].jobNumberFromQuotes&&e[0].approvedEmission&&t.period&&t.period.start)})}ngOnDestroy(){this.disabledByRetrieve$&&this.disabledByRetrieve$.unsubscribe()}onEnter(){this.formValidaty.valid&&this.continue()}continue(){this.flowRouteEmissionService.enableRoute(this.routes,"aditionalauto/1"),this.storeEmission.dispatch(new s.c("aditionalauto/1")),this.routes.forEach(e=>{"validity"===e.path&&(e.value=this.formValidaty.get("beginningValidity").value.day+"/"+this.formValidaty.get("beginningValidity").value.month+"/"+this.formValidaty.get("beginningValidity").value.year)}),this.formValidaty.valid&&this.storeEmission.dispatch(new s.k(!0)),this.flowRouteEmissionService.enableRoute(this.routes,"aditionalauto/1")}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275directiveInject"](R.FormBuilder),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](F),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](o.h))},e.\u0275cmp=C["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-validity"]],decls:18,vars:5,consts:[[3,"formGroup"],[1,"row"],[1,"col-lg-4","pl-0"],[1,"col-4","pl-0"],["formControlName","beginningValidity","name","beginningValidityPolicy",3,"minDate","maxDate","disabled","keydown.enter"],["class","row",4,"ngIf"],[1,"row","pt-4"],[1,"col-lg-8","pl-0"],["name","continueValidatePolicyBtn",1,"btn","btn-primary","btn-heft",3,"click"],[1,"press-enter","ml-3","mr-4"],[1,"col-5","pl-0"],[1,"text-danger",2,"font-size","15px"]],template:function(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",1),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275elementStart"](3,"label"),C["\u0275\u0275text"](4," Inicio de vigencia "),C["\u0275\u0275elementStart"](5,"sup"),C["\u0275\u0275text"](6,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",1),C["\u0275\u0275elementStart"](8,"div",3),C["\u0275\u0275elementStart"](9,"sxf-datetimepicker",4),C["\u0275\u0275listener"]("keydown.enter",(function(){return t.onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](10,lt,5,0,"div",5),C["\u0275\u0275elementStart"](11,"div",6),C["\u0275\u0275elementStart"](12,"div",7),C["\u0275\u0275elementStart"](13,"span"),C["\u0275\u0275elementStart"](14,"button",8),C["\u0275\u0275listener"]("click",(function(){return t.continue()})),C["\u0275\u0275text"](15," Continuar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](16,"span",9),C["\u0275\u0275text"](17," o presiona ENTER "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e&&(C["\u0275\u0275property"]("formGroup",t.formValidaty),C["\u0275\u0275advance"](9),C["\u0275\u0275property"]("minDate",t.minDate)("maxDate",t.maxDate)("disabled",t.disabledByRetrieve),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",t.retroactiveVigence))},directives:[R.NgControlStatusGroup,R.FormGroupDirective,U.a,R.NgControlStatus,R.FormControlName,M.o],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;font-size:.75rem;color:#393b3d}.press-enter[_ngcontent-%COMP%]{color:#a3adb3;font-size:.75rem}"]}),e})();var st=n("xVbo");const dt=function(e){return{active:e}};function ct(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"li",12),C["\u0275\u0275elementStart"](1,"label",13),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const n=t.$implicit;return C["\u0275\u0275nextContext"](2).changeTab(n)})),C["\u0275\u0275elementStart"](2,"div",14),C["\u0275\u0275elementStart"](3,"div",15),C["\u0275\u0275element"](4,"input",16),C["\u0275\u0275elementStart"](5,"label",17),C["\u0275\u0275text"](6),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](7,"div"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](8,"div",18),C["\u0275\u0275text"](9),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=C["\u0275\u0275nextContext"](2);C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngClass",C["\u0275\u0275pureFunction1"](5,dt,n.activeTab===e.code)),C["\u0275\u0275advance"](3),C["\u0275\u0275propertyInterpolate1"]("name","paymentMethod",e.code,""),C["\u0275\u0275property"]("checked",e.code===n.activeTab),C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate1"](" ",e.description," "),C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate"](e.legend)}}function mt(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"ul",10),C["\u0275\u0275template"](1,ct,10,7,"li",11),C["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf;C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngForOf",e)}}function ut(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"label",36),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const t=C["\u0275\u0275nextContext"]().$implicit;return C["\u0275\u0275nextContext"](3).setPaymentMethod(t)})),C["\u0275\u0275elementStart"](1,"div",37),C["\u0275\u0275elementStart"](2,"div",38),C["\u0275\u0275elementStart"](3,"div",15),C["\u0275\u0275element"](4,"input",39),C["\u0275\u0275elementStart"](5,"label",17),C["\u0275\u0275text"](6," \xa0\xa0\xa0\xa0 "),C["\u0275\u0275elementStart"](7,"img",40),C["\u0275\u0275listener"]("error",(function(t){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](4).cardNotExists(t)})),C["\u0275\u0275pipe"](8,"uppercase"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275text"](9),C["\u0275\u0275pipe"](10,"cardnumber"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]().$implicit,t=C["\u0275\u0275nextContext"](3);C["\u0275\u0275advance"](4),C["\u0275\u0275propertyInterpolate1"]("name","optionPayment",e.id,""),C["\u0275\u0275property"]("checked",t.currentPolicy.payment.id===e.id)("disabled",t.disabledByRetrieve),C["\u0275\u0275advance"](3),C["\u0275\u0275propertyInterpolate1"]("src","../../../../../../../assets/cards/",C["\u0275\u0275pipeBind1"](8,5,t.getCardImg(e.displayname)),".svg",C["\u0275\u0275sanitizeUrl"]),C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate1"](" \xa0\xa0 ",C["\u0275\u0275pipeBind1"](10,7,e.displayname)," ")}}function pt(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",34),C["\u0275\u0275template"](1,ut,11,9,"label",35),C["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf","CreditCard"===e.method)}}function ht(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div"),C["\u0275\u0275elementStart"](1,"div"),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275elementStart"](3,"div",20),C["\u0275\u0275elementStart"](4,"label"),C["\u0275\u0275text"](5,"Tarjetas guardadas para este cliente"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](6,"br"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",21),C["\u0275\u0275elementStart"](8,"div",22),C["\u0275\u0275elementStart"](9,"button",23),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).previousPaginate()})),C["\u0275\u0275element"](10,"sxf-icon",24),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](11,"div",25),C["\u0275\u0275elementStart"](12,"div",26),C["\u0275\u0275template"](13,pt,2,1,"div",27),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](14,"div",28),C["\u0275\u0275elementStart"](15,"button",29),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const t=C["\u0275\u0275nextContext"]().ngIf;return C["\u0275\u0275nextContext"]().nextPaginate(t.length)})),C["\u0275\u0275element"](16,"sxf-icon",30),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](17,"div",31),C["\u0275\u0275elementStart"](18,"button",32),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).addNewPaymentWay()})),C["\u0275\u0275element"](19,"sxf-icon",33),C["\u0275\u0275text"](20," Agregar tarjeta "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]().ngIf,t=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](13),C["\u0275\u0275property"]("ngForOf",t.paginateCreditCards(e,2,0)),C["\u0275\u0275advance"](5),C["\u0275\u0275property"]("disabled",t.disabledByRetrieve)}}function vt(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"label",36),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const t=C["\u0275\u0275nextContext"]().$implicit;return C["\u0275\u0275nextContext"](3).setPaymentMethod(t)})),C["\u0275\u0275elementStart"](1,"div",37),C["\u0275\u0275elementStart"](2,"div",43),C["\u0275\u0275elementStart"](3,"div",15),C["\u0275\u0275element"](4,"input",44),C["\u0275\u0275elementStart"](5,"label",17),C["\u0275\u0275text"](6),C["\u0275\u0275pipe"](7,"slice"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]().$implicit,t=C["\u0275\u0275nextContext"](3);C["\u0275\u0275advance"](4),C["\u0275\u0275propertyInterpolate1"]("name","radioPaymentOption",e.id,""),C["\u0275\u0275property"]("checked",t.activePaymentMethodId===e.id),C["\u0275\u0275advance"](2),C["\u0275\u0275textInterpolate1"](" \xa0\xa0 ",C["\u0275\u0275pipeBind3"](7,3,e.displayname,5,27)," ")}}function bt(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",34),C["\u0275\u0275template"](1,vt,8,7,"label",35),C["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf","BankingDebt"===e.method)}}function ft(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div"),C["\u0275\u0275elementStart"](1,"div"),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275elementStart"](3,"div",20),C["\u0275\u0275elementStart"](4,"label"),C["\u0275\u0275text"](5,"Cuentas guardadas para este cliente"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](6,"br"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",21),C["\u0275\u0275elementStart"](8,"div",22),C["\u0275\u0275elementStart"](9,"button",23),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).previousPaginate()})),C["\u0275\u0275element"](10,"sxf-icon",24),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](11,"div",25),C["\u0275\u0275elementStart"](12,"div",26),C["\u0275\u0275template"](13,bt,2,1,"div",27),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](14,"div",28),C["\u0275\u0275elementStart"](15,"button",41),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const t=C["\u0275\u0275nextContext"]().ngIf;return C["\u0275\u0275nextContext"]().nextPaginate(t.length)})),C["\u0275\u0275element"](16,"sxf-icon",30),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](17,"div",31),C["\u0275\u0275elementStart"](18,"button",42),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).addNewPaymentWay()})),C["\u0275\u0275element"](19,"sxf-icon",33),C["\u0275\u0275text"](20," Agregar CBU "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]().ngIf,t=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](13),C["\u0275\u0275property"]("ngForOf",t.paginateCbus(e,2,0))}}function gt(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",6),C["\u0275\u0275template"](1,ht,21,2,"div",19),C["\u0275\u0275template"](2,ft,21,1,"div",19),C["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,n=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf","CreditCard"===n.activeTab&&e.length>0),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf","BankingDebt"===n.activeTab&&e.length>0)}}function yt(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",45),C["\u0275\u0275elementStart"](1,"div",46),C["\u0275\u0275elementStart"](2,"div",47),C["\u0275\u0275elementStart"](3,"label"),C["\u0275\u0275text"](4," N\xfamero de tarjeta "),C["\u0275\u0275elementStart"](5,"sup"),C["\u0275\u0275text"](6,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",48),C["\u0275\u0275elementStart"](8,"label"),C["\u0275\u0275text"](9," Vencimiento "),C["\u0275\u0275elementStart"](10,"sup"),C["\u0275\u0275text"](11,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](12,"div",21),C["\u0275\u0275elementStart"](13,"div",49),C["\u0275\u0275element"](14,"sxf-textbox",50),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](15,"div",51),C["\u0275\u0275element"](16,"sxf-textbox",52),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275property"]("formGroup",e.formCredit),C["\u0275\u0275advance"](14),C["\u0275\u0275property"]("mask",e.numberMask)("helpFeedback",""),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("mask",e.expirationDateMask)("helpFeedback","")}}function St(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",45),C["\u0275\u0275elementStart"](1,"div",21),C["\u0275\u0275elementStart"](2,"div",47),C["\u0275\u0275elementStart"](3,"label"),C["\u0275\u0275text"](4," CBU "),C["\u0275\u0275elementStart"](5,"sup"),C["\u0275\u0275text"](6,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",21),C["\u0275\u0275elementStart"](8,"div",47),C["\u0275\u0275element"](9,"sxf-textbox",53),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275property"]("formGroup",e.formDebit),C["\u0275\u0275advance"](9),C["\u0275\u0275property"]("maxLength",22)("minLength",22)("helpFeedback","")}}let Et=(()=>{class e extends l.BaseComponent{constructor(e,t,n,i,o,r){super(),this.fb=e,this.storePolicy=t,this.storeEmission=n,this.paymentMethodService=i,this.paymentInstrument=o,this.storeQuote=r,this.activeTab="",this.arrPaymentMethods=[],this.formDebit={},this.formCredit={},this.arrCardsStored=[],this.paymentInstruments$=new ae.a,this.paymentMethods$=new ae.a,this.payment={},this.paymentTerm={},this.activePaymentMethodId="",this.newPaymentWay=!1,this.digitalPolicy=!0,this.fromRetrieve=!1,this.approvedEmission=!1,this.currentPolicy={},this.initSlice=0,this.endSlice=2,this.arrayCardsLength=0,this.arrayCbusLength=0,this.expirationDateMask=[/[0-1]/,/[0-9]/,"/",/\d/,/\d/,/\d/,/\d/],this.numberMask=[/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/],this.disabledByRetrieve=!1,this.paymentSelectedByRetrieve=!1,this.currentServerDate=new Date,this.disabledByRetrieveSubscription=new u.a,this.serverDataSubscription=new u.a,this.paymentDataSubscription=new u.a,this.paymentTermSubscription=new u.a,this.policyDataSubscription=new u.a,this.creditCardSubscription=new u.a,this.cardExpirationSubcription=new u.a,this.debitCardSubscription=new u.a,this.emissionStoreSubscription=new u.a}ngOnInit(){var e,t,n;this.paymentDataSubscription=this.storePolicy.select(m.m).subscribe(e=>{this.payment=e,this.activeTab=e.method}),this.paymentTermSubscription=this.storePolicy.select(m.n).subscribe(e=>{this.paymentTerm=e,this.payment.plan.code=e.code}),this.policyDataSubscription=this.storePolicy.select(m.p).subscribe(e=>{this.currentPolicy=e,this.digitalPolicy=!!e.email}),this.serverDataSubscription=this.storeQuote.select(A.x).subscribe(e=>{this.currentServerDate=new Date(e)}),this.paymentMethods$=this.storePolicy.select(m.l).pipe(Object(g.a)(e=>e?this.paymentMethodService.getAllPaymentMethods(e).pipe(Object(g.a)(e=>(e.map(e=>{"Coupon"!==e.code&&(e.legend="10% de descuento")}),Object(h.a)(e.filter(e=>e.code===this.payment.method))))):Object(h.a)(se.a))),this.paymentInstruments$=this.storePolicy.select(m.b).pipe(Object(g.a)(e=>null!==e.accountnumber?this.paymentInstrument.getPaymentInstruments(e.accountnumber).pipe(Object(st.a)(e=>e.length>0),Object(g.a)(e=>(e.filter(e=>e.method===this.payment.method).length<1&&(this.newPaymentWay=!0),Object(h.a)(e.filter(e=>e.method===this.payment.method))))):(this.newPaymentWay=!0,Object(h.a)(se.a))),Object(S.a)(()=>(this.newPaymentWay=!0,Object(h.a)(se.a)))),this.formDebit=this.fb.group({number:[,[R.Validators.required,R.Validators.minLength(22)]]}),this.formCredit=this.fb.group({number:[,[R.Validators.required,R.Validators.minLength(14),R.Validators.maxLength(16)]],expirationdate:[,[R.Validators.required,R.Validators.minLength(7)]],owner:[,R.Validators.required]}),this.creditCardSubscription=null===(e=this.formCredit.get("number"))||void 0===e?void 0:e.valueChanges.subscribe(e=>{e.length>6&&this.paymentMethodService.getCreditCards(e.substring(0,6)).subscribe(e=>{e&&(this.payment.creditcard.type=e[0].code,this.storePolicy.dispatch(new c.r(this.payment)))}),this.payment.creditcard.number=e,this.storePolicy.dispatch(new c.r(this.payment))}),this.cardExpirationSubcription=null===(t=this.formCredit.get("expirationdate"))||void 0===t?void 0:t.valueChanges.subscribe(e=>{if(this.payment.creditcard.expirationdate=null,7===e.length){const t="01/"+e,n=rt(this.currentServerDate).format("YYYY-MM-DD");rt(t,"DD/MM/YYYY").format("YYYY-MM-DD")>n?(this.payment.creditcard.expirationdate=rt(t,"DD/MM/YYYY").toISOString(),this.storePolicy.dispatch(new c.r(this.payment))):(this.payment.creditcard.expirationdate=null,this.storePolicy.dispatch(new c.r(this.payment)))}}),this.debitCardSubscription=null===(n=this.formDebit.get("number"))||void 0===n?void 0:n.valueChanges.subscribe(e=>{this.payment.cbu.number=e,this.payment.cbu.conduit="17",this.storePolicy.dispatch(new c.r(this.payment))}),this.disabledByRetrieveSubscription=Object(p.a)([this.storeEmission.select(d.k),this.storePolicy.select(m.p)]).subscribe(e=>{const t=e[0],n=e[1];n.payment.id&&!this.paymentSelectedByRetrieve&&null!==n.client.accountnumber&&this.paymentInstrument.getPaymentInstruments(n.client.accountnumber).subscribe(e=>{const t=e.find(e=>e.id===n.payment.id);t&&(this.setPaymentMethod(t,!0),this.paymentSelectedByRetrieve=!0)}),this.emissionStoreSubscription=this.storeEmission.select(d.d).subscribe(e=>{this.fromRetrieve=!!e.jobNumberFromQuotes,this.approvedEmission=e.approvedEmission}),this.disabledByRetrieve=this.fromRetrieve?!(!this.approvedEmission||!n.payment.id):!(!t||!n.payment.id)})}ngOnDestroy(){var e,t,n,i,o,r,l,a,s;null===(e=this.debitCardSubscription)||void 0===e||e.unsubscribe(),null===(t=this.creditCardSubscription)||void 0===t||t.unsubscribe(),null===(n=this.cardExpirationSubcription)||void 0===n||n.unsubscribe(),null===(i=this.emissionStoreSubscription)||void 0===i||i.unsubscribe(),null===(o=this.serverDataSubscription)||void 0===o||o.unsubscribe(),null===(r=this.policyDataSubscription)||void 0===r||r.unsubscribe(),null===(l=this.paymentDataSubscription)||void 0===l||l.unsubscribe(),null===(a=this.paymentTermSubscription)||void 0===a||a.unsubscribe(),null===(s=this.disabledByRetrieveSubscription)||void 0===s||s.unsubscribe()}changeTab(e){return!1}addNewPaymentWay(){var e,t,n,i,o,r;this.newPaymentWay=!0,this.activePaymentMethodId=null,this.payment.id=null,this.payment.creditcard.number=null,this.payment.creditcard.type=null,this.payment.creditcard.expirationdate=null,this.payment.cbu.number=null,null===(t=null===(e=this.formCredit)||void 0===e?void 0:e.get("expirationdate"))||void 0===t||t.setValue(""),null===(i=null===(n=this.formCredit)||void 0===n?void 0:n.get("number"))||void 0===i||i.setValue(""),null===(r=null===(o=this.formDebit)||void 0===o?void 0:o.get("number"))||void 0===r||r.setValue(""),this.storePolicy.dispatch(new c.r(this.payment))}setPaymentMethod(e,t){if(!this.disabledByRetrieve||t){switch(this.payment.plan.code=this.payment.plan.code||this.paymentTerm.code,this.newPaymentWay=!1,this.activePaymentMethodId=e.id,this.payment.id=e.id,this.payment.cbu.number=null,this.payment.creditcard.expirationdate=null,this.payment.creditcard.number=null,this.payment.creditcard.type=null,e.method){case"CreditCard":const t=e.displayname.substring(0,e.displayname.indexOf("(")).replace(" ",""),n=e.displayname.substring(e.displayname.lastIndexOf("(")+1,e.displayname.lastIndexOf(")")),i=e.displayname.substring(e.displayname.length-10);this.payment.creditcard.number=n,this.payment.creditcard.expirationdate=rt(i,"DD/MM/YYYY").toISOString(),this.payment.creditcard.type=t.toString().toLowerCase().trim();break;case"BankingDebt":const o=e.displayname.substring(e.displayname.lastIndexOf("(")+1,e.displayname.lastIndexOf(")"));this.payment.cbu.number=o}this.storePolicy.dispatch(new c.r(this.payment))}}sendDigitalPolicy(){this.digitalPolicy=!this.digitalPolicy,this.digitalPolicy?null!==this.currentPolicy.client.email&&this.storePolicy.dispatch(new c.z(this.currentPolicy.client.email)):this.storePolicy.dispatch(new c.z(null))}getCardImg(e){const t=/([^\(]+)/.exec(e);return null!==t?t[1].trim().replace(" ","").toUpperCase():null}paginateCbus(e){return this.arrayCbusLength=e.length,e.slice(this.initSlice,this.endSlice)}paginateCreditCards(e){return this.arrayCardsLength=e.length,e.slice(this.initSlice,this.endSlice)}nextPaginate(e){this.endSlice<e&&(this.initSlice+=2,this.endSlice+=2)}previousPaginate(){this.initSlice>=2&&(this.initSlice-=2,this.endSlice-=2)}cardNotExists(e){const t=e.target;t.src="/assets/icons/GENERAL_TARJETA.svg",t.height=25}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275directiveInject"](R.FormBuilder),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](P.PaymentMethodService),C["\u0275\u0275directiveInject"](P.AccountService),C["\u0275\u0275directiveInject"](o.h))},e.\u0275cmp=C["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-paymentmethod"]],features:[C["\u0275\u0275InheritDefinitionFeature"]],decls:15,vars:8,consts:[["id","tabs"],["tabs",""],[1,"row"],[1,"col-lg-12","px-0"],["class","nav nav-pills nav-fill",4,"ngIf"],["class","tab-content mt-3",4,"ngIf"],[1,"tab-content","mt-3"],[3,"formGroup",4,"ngIf"],[1,"col-6","pl-0","mt-2"],[1,"info","pl-2"],[1,"nav","nav-pills","nav-fill"],["class","nav-item tab-unselected",4,"ngFor","ngForOf"],[1,"nav-item","tab-unselected"],["data-toggle","tab",1,"nav-link","active",3,"ngClass","click"],[1,"cardpayment","input-group"],[1,"form-radio-label"],["type","radio","name","options","autocomplete","off",3,"checked","name"],["for","radio",1,"radio-label"],[1,"text-dark","text-left","ml-2"],[4,"ngIf"],[1,"col-lg-12","pl-2"],[1,"row","pl-2"],[1,"mr-3"],["name","previousPaginateBtn",1,"btn","btn-primary","btn-icon",3,"click"],["type","arrow-left",1,"icon-blue"],[1,"col-7"],[1,"row","p-0"],["class","col mr-3 px-0 nav-item tab-unselected",4,"ngFor","ngForOf"],[1,"px-0"],["name","nextPaginateBtn",1,"btn","btn-primary","btn-icon",3,"click"],["type","arrow-right",1,"icon-blue"],[1,"col-lg-3","px-0"],["name","addNewPaymentWayBtn",1,"btn","btn-primary","btn-icon",2,"color","#00aec7","border","none","box-shadow","none",3,"disabled","click"],["type","plus",1,"icon-green"],[1,"col","mr-3","px-0","nav-item","tab-unselected"],["class","nav-link active","data-toggle","tab",3,"click",4,"ngIf"],["data-toggle","tab",1,"nav-link","active",3,"click"],[1,"payment-card"],[1,"input-group",2,"cursor","pointer"],["type","radio","autocomplete","off",3,"checked","name","disabled"],["width","40",3,"src","error"],["name","nextPaginatePaymentBtn",1,"btn","btn-primary","btn-icon",3,"click"],["name","addNewPaymentWayPaymentBtn",1,"btn","btn-primary","btn-icon",2,"color","#00aec7","border","none","box-shadow","none",3,"click"],[1,"input-group","pt-1"],["type","radio","autocomplete","off",3,"checked","name"],[3,"formGroup"],[1,"row","mt-2","pl-2"],[1,"col-lg-4","px-0"],[1,"col-lg-4"],[1,"col-4","pl-0"],["type","text","formControlName","number","label","","placeholder","","name","numberCard",3,"mask","helpFeedback"],[1,"col-4"],["type","text","formControlName","expirationdate","placeholder","MM/YYYY","name","expirationdateCard",3,"mask","helpFeedback"],["type","text","formControlName","number","label","","placeholder","","placement","bottom","messageTooltips","","name","numberCBU",3,"maxLength","minLength","helpFeedback"]],template:function(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",0,1),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275elementStart"](3,"div",3),C["\u0275\u0275template"](4,mt,2,1,"ul",4),C["\u0275\u0275pipe"](5,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](6,gt,3,2,"div",5),C["\u0275\u0275pipe"](7,"async"),C["\u0275\u0275elementStart"](8,"div",6),C["\u0275\u0275template"](9,yt,17,5,"div",7),C["\u0275\u0275template"](10,St,10,4,"div",7),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](11,"div",2),C["\u0275\u0275elementStart"](12,"div",8),C["\u0275\u0275elementStart"](13,"span",9),C["\u0275\u0275text"](14," Vamos a enviar la p\xf3liza digital por mail "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e&&(C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](5,4,t.paymentMethods$)),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](7,6,t.paymentInstruments$)),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("ngIf",t.newPaymentWay&&"CreditCard"===t.activeTab),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",t.newPaymentWay&&"BankingDebt"===t.activeTab))},directives:[M.o,M.n,M.m,T.a,R.NgControlStatusGroup,R.FormGroupDirective,q.a,R.NgControlStatus,R.FormControlName],pipes:[M.b,M.z,l.CardNumberPipe,M.w],styles:[".justify-fill[_ngcontent-%COMP%]{-ms-flex-pack:justify;justify-content:space-between}.tab-unselected[_ngcontent-%COMP%]{padding-right:0!important}.tab-unselected[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{background-color:#fff;padding:0}.tab-unselected[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{font-size:.875rem;color:#768692;margin-right:200px}.tab-unselected[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > div.cardpayment[_ngcontent-%COMP%]{font-size:.875rem!important;color:#53565a;font-weight:700}.tab-unselected[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > div.cardpayment[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:8px}.card-draw[_ngcontent-%COMP%]{width:100%;height:10em;background:#fff;border-radius:8px}.card-stored-item[_ngcontent-%COMP%]{background:#fff;box-shadow:4px 4px 10px rgba(0,0,0,.05);border-radius:10px}.info[_ngcontent-%COMP%]{color:#768692;font-size:.875rem}label[_ngcontent-%COMP%]{margin-bottom:0;font-size:.75rem;color:#393b3d}.form-checkbox[_ngcontent-%COMP%]{margin:.5rem .5rem .5rem 0}.label-checkbox[_ngcontent-%COMP%]{vertical-align:top;margin-left:3px}.payment-card[_ngcontent-%COMP%]{border:.0625rem solid #c4c4c4;border-radius:5px;padding:.5rem .8rem}.payment-card[_ngcontent-%COMP%]   .form-radio-label[_ngcontent-%COMP%]{margin:0}.payment-card[_ngcontent-%COMP%]   .form-radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + .radio-label[_ngcontent-%COMP%]:before{top:.15rem}.payment-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem}.btn[_ngcontent-%COMP%]{padding:.375rem .475rem .275rem}.btn-primary[_ngcontent-%COMP%]{border-radius:.3rem}.btn-primary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:not(:disabled):hover{background-color:#fff;border-color:#c4c4c4}.btn-icon[_ngcontent-%COMP%]{padding:.5rem}"]}),e})();var xt=n("NANo");const Ct=["documentType"],Pt=["modalClient"],wt=["modalNoClient"],It=["modalUW"],Mt=["modalMobility"],Ot=["newCosts"];function kt(e,t){1&e&&C["\u0275\u0275element"](0,"input",45)}function _t(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"span",70),C["\u0275\u0275elementStart"](1,"b"),C["\u0275\u0275text"](2,"Este email ser\xe1 usado para enviar la inspecci\xf3n por photo up"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function Nt(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",46),C["\u0275\u0275elementStart"](1,"div",1),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275elementStart"](3,"label"),C["\u0275\u0275text"](4," Nombre "),C["\u0275\u0275elementStart"](5,"sup"),C["\u0275\u0275text"](6,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",47),C["\u0275\u0275elementStart"](8,"label"),C["\u0275\u0275text"](9," Apellido "),C["\u0275\u0275elementStart"](10,"sup"),C["\u0275\u0275text"](11,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](12,"div",47),C["\u0275\u0275elementStart"](13,"label"),C["\u0275\u0275text"](14," Fecha de Nacimiento "),C["\u0275\u0275elementStart"](15,"sup"),C["\u0275\u0275text"](16,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](17,"div",1),C["\u0275\u0275elementStart"](18,"div",48),C["\u0275\u0275element"](19,"sxf-textbox",49),C["\u0275\u0275pipe"](20,"async"),C["\u0275\u0275pipe"](21,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](22,"div",50),C["\u0275\u0275element"](23,"sxf-textbox",51),C["\u0275\u0275pipe"](24,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](25,"div",50),C["\u0275\u0275element"](26,"sxf-datetimepicker",52),C["\u0275\u0275pipe"](27,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](28,"div",1),C["\u0275\u0275elementStart"](29,"div",2),C["\u0275\u0275elementStart"](30,"label"),C["\u0275\u0275text"](31," Nacionalidad "),C["\u0275\u0275elementStart"](32,"sup"),C["\u0275\u0275text"](33,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](34,"div",47),C["\u0275\u0275elementStart"](35,"label"),C["\u0275\u0275text"](36," Estado Civil "),C["\u0275\u0275elementStart"](37,"sup"),C["\u0275\u0275text"](38,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](39,"div",47),C["\u0275\u0275elementStart"](40,"label"),C["\u0275\u0275text"](41," Sexo "),C["\u0275\u0275elementStart"](42,"sup"),C["\u0275\u0275text"](43,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](44,"div",1),C["\u0275\u0275elementStart"](45,"div",48),C["\u0275\u0275element"](46,"sxf-select",53),C["\u0275\u0275pipe"](47,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](48,"div",50),C["\u0275\u0275element"](49,"sxf-select",54),C["\u0275\u0275pipe"](50,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](51,"div",50),C["\u0275\u0275element"](52,"sxf-select",55),C["\u0275\u0275pipe"](53,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](54,"div",1),C["\u0275\u0275elementStart"](55,"div",56),C["\u0275\u0275elementStart"](56,"label"),C["\u0275\u0275text"](57," C\xf3d. \xc1rea "),C["\u0275\u0275elementStart"](58,"sup"),C["\u0275\u0275text"](59,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](60,"div",7),C["\u0275\u0275elementStart"](61,"label"),C["\u0275\u0275text"](62," Tel\xe9fono "),C["\u0275\u0275elementStart"](63,"sup"),C["\u0275\u0275text"](64,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](65,"div",47),C["\u0275\u0275elementStart"](66,"label"),C["\u0275\u0275text"](67," Mail "),C["\u0275\u0275elementStart"](68,"sup"),C["\u0275\u0275text"](69,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](70,"div",1),C["\u0275\u0275elementStart"](71,"div",57),C["\u0275\u0275element"](72,"sxf-textbox",58),C["\u0275\u0275pipe"](73,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](74,"div",59),C["\u0275\u0275element"](75,"sxf-textbox",60),C["\u0275\u0275pipe"](76,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](77,"div",50),C["\u0275\u0275element"](78,"sxf-textbox",61),C["\u0275\u0275pipe"](79,"async"),C["\u0275\u0275template"](80,_t,3,0,"span",62),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](81,"div",50),C["\u0275\u0275elementStart"](82,"div",63),C["\u0275\u0275elementStart"](83,"span",64),C["\u0275\u0275element"](84,"input",65),C["\u0275\u0275element"](85,"label",66),C["\u0275\u0275elementStart"](86,"label",67),C["\u0275\u0275text"](87," Persona politicamente expuesta "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](88,"div",1),C["\u0275\u0275elementStart"](89,"div",68),C["\u0275\u0275elementStart"](90,"span"),C["\u0275\u0275elementStart"](91,"button",69),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).continue()})),C["\u0275\u0275text"](92," Continuar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"](2);var n;const t=null==(n=C["\u0275\u0275pipeBind1"](20,35,e.clientFromEmission$))?null:n.firstname;var i;const u=null==(i=C["\u0275\u0275pipeBind1"](21,37,e.client$))?null:i.firstname;var o;const p=null==(o=C["\u0275\u0275pipeBind1"](24,39,e.clientFromEmission$))?null:o.lastname;var r;const h=null==(r=C["\u0275\u0275pipeBind1"](27,41,e.clientFromEmission$))?null:r.birth;var l;const v=null==(l=C["\u0275\u0275pipeBind1"](47,43,e.clientFromEmission$))?null:l.nationality;var a;const b=null==(a=C["\u0275\u0275pipeBind1"](50,45,e.clientFromEmission$))?null:a.maritalstatus;var s;const f=null==(s=C["\u0275\u0275pipeBind1"](53,47,e.clientFromEmission$))?null:s.gender;var d;const g=(null==(d=C["\u0275\u0275pipeBind1"](73,49,e.clientFromEmission$))||null==d.cellphone?null:d.cellphone.area)&&e.disabledByRetrieve;var c;const y=(null==(c=C["\u0275\u0275pipeBind1"](76,51,e.clientFromEmission$))||null==c.cellphone?null:c.cellphone.number)&&e.disabledByRetrieve;var m;const S=(null==(m=C["\u0275\u0275pipeBind1"](79,53,e.clientFromEmission$))?null:m.email)&&e.disabledByRetrieve;C["\u0275\u0275property"]("formGroup",e.formPhysicalPerson),C["\u0275\u0275advance"](19),C["\u0275\u0275property"]("disabled",t)("value",u),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("disabled",p),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("disabled",h)("minDate",e.minDateClient)("maxDate",e.maxDateClient),C["\u0275\u0275advance"](20),C["\u0275\u0275property"]("disabled",v)("items",e.nationalities$)("multiple",!1)("searchable",!0)("dropdownPosition","bottom"),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("disabled",b)("items",e.maritalStatus$)("multiple",!1)("searchable",!0)("dropdownPosition","bottom"),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("disabled",f)("items",e.genders$)("multiple",!1)("searchable",!0)("dropdownPosition","bottom"),C["\u0275\u0275advance"](20),C["\u0275\u0275property"]("maxLength",5)("minLength",2)("helpFeedback",e.formPhysicalPerson.controls.prefix.disabled?"No es modificable":"")("disabled",g),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("minLength",6)("maxLength",8)("helpFeedback",e.formPhysicalPerson.controls.phone.disabled?"No es modificable":"")("disabled",y),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("maxLength",60)("helpFeedback",e.formPhysicalPerson.controls.email.disabled?"No es modificable":"")("disabled",S),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",(e.formPhysicalPerson.controls.email.dirty||e.formPhysicalPerson.controls.email.touched)&&!e.formPhysicalPerson.controls.email.errors),C["\u0275\u0275advance"](11),C["\u0275\u0275property"]("disabled",!e.formPhysicalPerson.valid)}}function Vt(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"span",70),C["\u0275\u0275elementStart"](1,"b"),C["\u0275\u0275text"](2,"Este email ser\xe1 usado para enviar la inspecci\xf3n por photo up"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function jt(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",46),C["\u0275\u0275elementStart"](1,"div",1),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275elementStart"](3,"label"),C["\u0275\u0275text"](4," Razon Social "),C["\u0275\u0275elementStart"](5,"sup"),C["\u0275\u0275text"](6,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",1),C["\u0275\u0275elementStart"](8,"div",48),C["\u0275\u0275element"](9,"sxf-textbox",71),C["\u0275\u0275pipe"](10,"async"),C["\u0275\u0275pipe"](11,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](12,"div",1),C["\u0275\u0275elementStart"](13,"div",56),C["\u0275\u0275elementStart"](14,"label"),C["\u0275\u0275text"](15," C\xf3d. \xc1rea "),C["\u0275\u0275elementStart"](16,"sup"),C["\u0275\u0275text"](17,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](18,"div",7),C["\u0275\u0275elementStart"](19,"label"),C["\u0275\u0275text"](20," Tel\xe9fono "),C["\u0275\u0275elementStart"](21,"sup"),C["\u0275\u0275text"](22,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](23,"div",47),C["\u0275\u0275elementStart"](24,"label"),C["\u0275\u0275text"](25," Mail "),C["\u0275\u0275elementStart"](26,"sup"),C["\u0275\u0275text"](27,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](28,"div",1),C["\u0275\u0275elementStart"](29,"div",57),C["\u0275\u0275element"](30,"sxf-textbox",72),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](31,"div",59),C["\u0275\u0275element"](32,"sxf-textbox",73),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](33,"div",50),C["\u0275\u0275element"](34,"sxf-textbox",74),C["\u0275\u0275template"](35,Vt,3,0,"span",62),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](36,"div",75),C["\u0275\u0275element"](37,"div",47),C["\u0275\u0275element"](38,"div",47),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](39,"div",1),C["\u0275\u0275elementStart"](40,"div",50),C["\u0275\u0275elementStart"](41,"div",76),C["\u0275\u0275element"](42,"input",77),C["\u0275\u0275element"](43,"label",78),C["\u0275\u0275elementStart"](44,"label"),C["\u0275\u0275text"](45," Organismo social "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](46,"div",50),C["\u0275\u0275elementStart"](47,"div",76),C["\u0275\u0275element"](48,"input",79),C["\u0275\u0275element"](49,"label",80),C["\u0275\u0275elementStart"](50,"label"),C["\u0275\u0275text"](51," Consorcio "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](52,"div",81),C["\u0275\u0275elementStart"](53,"div",68),C["\u0275\u0275elementStart"](54,"span"),C["\u0275\u0275elementStart"](55,"button",82),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).continue()})),C["\u0275\u0275text"](56," Continuar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"](2);var n;const t=null==(n=C["\u0275\u0275pipeBind1"](10,14,e.client$))?null:n.companyname;var i;const o=null==(i=C["\u0275\u0275pipeBind1"](11,16,e.clientFromEmission$))?null:i.companyname;C["\u0275\u0275property"]("formGroup",e.formLegalPerson),C["\u0275\u0275advance"](9),C["\u0275\u0275property"]("value",t)("disabled",o)("maxLength",255),C["\u0275\u0275advance"](21),C["\u0275\u0275property"]("maxLength",5)("minLength",2)("helpFeedback",""),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("minLength",6)("maxLength",8)("helpFeedback",""),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("maxLength",60)("helpFeedback",""),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",(e.formLegalPerson.controls.email.dirty||e.formLegalPerson.controls.email.touched)&&!e.formLegalPerson.controls.email.errors),C["\u0275\u0275advance"](20),C["\u0275\u0275property"]("disabled",!e.formLegalPerson.valid)}}function Bt(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div"),C["\u0275\u0275template"](1,kt,1,0,"input",43),C["\u0275\u0275pipe"](2,"async"),C["\u0275\u0275template"](3,Nt,93,55,"div",44),C["\u0275\u0275template"](4,jt,57,18,"div",44),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](2,3,e.clientBaseN$)),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",!e.loadingData&&"undefined"!==e.isLegalPerson&&"not"===e.isLegalPerson),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",!e.loadingData&&"undefined"!==e.isLegalPerson&&"yes"===e.isLegalPerson)}}function At(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"span"),C["\u0275\u0275text"](1,"Recotizar como Persona Jur\xeddica"),C["\u0275\u0275elementEnd"]())}function Rt(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"p"),C["\u0275\u0275text"](1," Recotizamos sin el seguro de Movilidad, el nuevo valor de la cuota es de "),C["\u0275\u0275elementStart"](2,"b"),C["\u0275\u0275text"](3),C["\u0275\u0275pipe"](4,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](5,"br"),C["\u0275\u0275text"](6," Para mas detalle revisar el detalle del men\xfa lateral. "),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate1"]("$ ",C["\u0275\u0275pipeBind2"](4,1,e.newQuote,"1.0-0"),"")}}function $t(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",1),C["\u0275\u0275elementStart"](1,"div",83),C["\u0275\u0275element"](2,"ng-lottie",84),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("options",e.suraLoaderConfig)}}const Dt=function(){return{size:"lg"}},Lt=function(){return{backdrop:"static",keyboard:!1}};let Ft=(()=>{class e{constructor(e,t,n,i,o,r,l,a,s,d,c,m,p,h,v,b,f){this.fb=e,this.genderService=t,this.identificationService=n,this.flowRouteEmissionService=i,this.storeEmission=o,this.accountService=r,this.storePolicy=l,this.storeQuote=a,this.nationalityService=s,this.maritalStatusService=d,this._clientNService=c,this.utilService=m,this.contactService=p,this.provinceService=h,this.route=v,this.policyAdapter=b,this.quotingService=f,this.lottieConfig={path:"/assets/loadings/data-validation-loader.json",loop:!1,autoplay:!1},this.suraLoaderConfig={path:"/assets/loadings/sura-loader.json"},this.buttonLabel="Validar",this.documentSelect={},this.modalClient={},this.modalNoClient={},this.modalUW={},this.modalMobility={},this.modalNewCosts={},this.routes=[],this.accounts={},this.disabledFields=!1,this.fiscalConditions$=new u.a,this.iibb$=new ae.a,this.isValidateDocument=!1,this.client$=new ae.a,this.clientFromEmission$=new ae.a,this.searchClient$=new ae.a,this.isLegalPerson="undefined",this.form={},this.loadingData=!1,this.formPhysicalPerson={},this.formLegalPerson={},this.genders$=new ae.a,this.maritalStatus$=new ae.a,this.documents$=new ae.a,this.nationalities$=new ae.a,this.disabledByRetrieve$=new u.a,this.maxLength=8,this.documentDescription="DNI",this.currentAccount={},this.currentPolicy={},this.currentMotor={},this.vehicles=[],this.showForms=!1,this.clientBaseN$=new ae.a,this.accountReset={},this.accountResetSubscription=new u.a,this.provincesFromApi=[],this.resetResidenceValues={state:null,id:null,city:null,postalcode:null,street:null,streetnumber:null,apartment:null,floor:null,type:null,clarification:null},this.currentBlackList=!1,this.hasMobility=!1,this.MOBILITY_CODE="SURA_CA7_MobilityTheftDamageCov",this.loadingCosts=!1,this.newQuote="",this.callCostsSubscription=new u.a,this.motorConfig=this.route.snapshot.data.config}ngOnInit(){var e,t,n;this.provinceService.getAllProvinces().subscribe(e=>this.provincesFromApi=e),this.utilService.getCurrentServerDate().subscribe(e=>{const t=new Date(e.datetime),n=new Date(e.datetime),i={year:t.getFullYear()-16,month:t.getMonth()+1,day:t.getDate()};this.maxDateClient=i;const o={year:n.getFullYear()-116,month:n.getMonth()+1,day:n.getDate()};this.minDateClient=o}),this.accountResetSubscription=this.storeQuote.select(m.i).subscribe(e=>{this.accountReset=e}),this.genders$=this.genderService.getGenders(),this.maritalStatus$=this.maritalStatusService.getMaritalStatus(),Object(p.a)([this.storePolicy.select(m.p),this.storeQuote.select(A.v)]).subscribe(e=>{this.currentPolicy=e[0],this.currentMotor=e[0].motor.vehicles.filter(t=>t.number===e[1].activeMotor)[0],this.vehicles=e[0].motor.vehicles,this.vehicles.some(e=>{var t,n;const i=null===(t=null==e?void 0:e.packages)||void 0===t?void 0:t.find(e=>e.selected);if(this.hasMobility=null===(n=null==i?void 0:i.coverages)||void 0===n?void 0:n.some(e=>e.pattern.code===this.MOBILITY_CODE),this.hasMobility)return!0})}),this.form=this.fb.group({document:[this.currentPolicy.client.documentType?this.currentPolicy.client.documentType:"SSN",R.Validators.required],documentNumber:[this.currentPolicy.client.documentNumber,[R.Validators.required,R.Validators.pattern("^[0-9]+$"),R.Validators.minLength(8)]]}),this.documents$=this.identificationService.getDocumentTypes(),this.nationalities$=this.nationalityService.getNationalities().pipe(Object(g.a)(e=>{const t=[],n=e.filter(e=>"Argentino(a)"===e.description)[0];return t.push(n),e.filter(e=>"N010"!==e.code).forEach(e=>{t.push(e)}),Object(h.a)(t)})),this.storeEmission.select(d.m).subscribe(e=>{this.routes=e}),this.formPhysicalPerson=this.fb.group({firstname:[,[R.Validators.required,R.Validators.pattern("[A-z\xc0-\xff ]*"),R.Validators.maxLength(100)]],lastname:[,[R.Validators.required,R.Validators.pattern("[A-z\xc0-\xff ]*"),R.Validators.maxLength(100)]],birth:[,R.Validators.required],nationality:[,R.Validators.required],maritalstatus:[,R.Validators.required],gender:[,R.Validators.required],prefix:[,[R.Validators.required,R.Validators.minLength(2),R.Validators.maxLength(5),R.Validators.pattern(/^\d+$/)]],phone:[,[R.Validators.required,R.Validators.minLength(6),R.Validators.maxLength(8),R.Validators.pattern(/^-?(0|[1-9]\d*)?$/)]],email:["",[R.Validators.required,R.Validators.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$"),R.Validators.maxLength(60)]],exposedPerson:[!1]}),null===(e=this.formPhysicalPerson.get("birth"))||void 0===e||e.valueChanges.pipe(Object(g.a)(e=>{const t=rt(e).subtract(1,"months");return Object(h.a)(t)})).subscribe(),this.formLegalPerson=this.fb.group({companyname:[,[R.Validators.required,R.Validators.maxLength(255)]],consortium:[],officialorganism:[],prefix:[,[R.Validators.required,R.Validators.minLength(2),R.Validators.maxLength(5),R.Validators.pattern(/^\d+$/)]],phone:[,[R.Validators.required,R.Validators.minLength(6),R.Validators.maxLength(8),R.Validators.pattern(/^-?(0|[1-9]\d*)?$/)]],email:[,[R.Validators.required,R.Validators.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]]}),this.client$=this.storePolicy.select(m.b).pipe(Object(g.a)(e=>{var t,n,i,o,r,l,a;return this.currentAccount=e,"Person"===e.type?(this.isLegalPerson="not",this.form.patchValue({document:null===e.documentType?null===(t=this.form.get("document"))||void 0===t?void 0:t.value:e.documentType,documentNumber:null===e.documentNumber?null===(n=this.form.get("documentNumber"))||void 0===n?void 0:n.value:e.documentNumber},{emitEvent:!1}),this.formPhysicalPerson.patchValue({firstname:null===(i=e.firstname)||void 0===i?void 0:i.toUpperCase(),lastname:null===(o=e.lastname)||void 0===o?void 0:o.toUpperCase(),birth:Object(xt.j)(e.birth)?null:{year:parseInt(e.birth.substring(0,4),0),month:parseInt(e.birth.substring(5,7),0),day:parseInt(e.birth.substring(8,10),0)},nationality:e.nationality,maritalstatus:e.maritalstatus,gender:e.gender,prefix:Object(xt.j)(e.cellphone)?[]:e.cellphone.area,phone:Object(xt.j)(e.cellphone)?[]:e.cellphone.number,email:e.email,exposedPerson:e.politicallyexposed})):"Company"===e.type&&(this.isLegalPerson="yes",this.openModalMobility(),this.form.patchValue({document:e.documentType,documentNumber:e.documentNumber},{emitEvent:!1}),this.form.updateValueAndValidity(),this.formLegalPerson.patchValue({companyname:null===(r=e.companyname)||void 0===r?void 0:r.toUpperCase(),consortium:e.consortium,prefix:null===(l=e.workphone)||void 0===l?void 0:l.area,phone:null===(a=e.workphone)||void 0===a?void 0:a.number,officialorganism:e.officialorganism,email:e.email})),Object(h.a)(e)}),Object(ce.a)()),this.clientFromEmission$=this.storeEmission.select(d.c),null===(t=this.form.get("documentNumber"))||void 0===t||t.valueChanges.subscribe(()=>{this.formPhysicalPerson.reset(),this.formLegalPerson.reset(),this.isLegalPerson="undefined",this.currentBlackList=!1}),null===(n=this.form.get("document"))||void 0===n||n.valueChanges.subscribe(e=>{var t;switch(this.maxLength=11,e){case"SSN":this.maxLength=8,this.documentDescription="DNI";break;case"FEIN":this.maxLength=11,this.documentDescription="CUIT";break;case"CUILSura":this.maxLength=11,this.documentDescription="CUIL";break;case"PassportSura":this.documentDescription="Pasaporte"}this.formPhysicalPerson.reset(),this.formLegalPerson.reset(),this.currentBlackList=!1,null===(t=this.form.get("documentNumber"))||void 0===t||t.reset(),this.isLegalPerson="undefined"}),this.disabledByRetrieve$=Object(p.a)([this.storeEmission.select(d.d),this.storePolicy.select(m.b)]).subscribe(e=>{var t;this.disabledByRetrieve=!!(e[0].jobNumberFromQuotes&&e[0].approvedEmission&&e[1].accountnumber),this.disabledByRetrieve&&(null===(t=this.formPhysicalPerson.get("exposedPerson"))||void 0===t||t.disable())})}validateDocumentNumber(){var e,t,n,i,o,r,l,a,d,m,u,v,b,f,y,E;"FEIN"===(null===(e=this.form.get("document"))||void 0===e?void 0:e.value)&&parseInt(null===(t=this.form.get("documentNumber"))||void 0===t?void 0:t.value.substring(0,2),0)>=30?(this.isLegalPerson="yes",this.openModalMobility()):this.isLegalPerson="not",this.checkClienteN(null===(n=this.form.get("documentNumber"))||void 0===n?void 0:n.value);const C=Object.assign(Object.assign({},this.accountReset),{type:"yes"===this.isLegalPerson?"Company":"Person",documentType:null===(i=this.form.get("document"))||void 0===i?void 0:i.value,documentNumber:null===(o=this.form.get("documentNumber"))||void 0===o?void 0:o.value,address:Object.assign(Object.assign({},this.accountReset.address),{state:null===(l=null===(r=this.currentPolicy.insured)||void 0===r?void 0:r.address)||void 0===l?void 0:l.state,city:null===(d=null===(a=this.currentPolicy.insured)||void 0===a?void 0:a.address)||void 0===d?void 0:d.city})});this.storePolicy.dispatch(new c.i(C)),this.storeEmission.dispatch(new s.f(C)),this.routes.forEach(e=>{"residence"===e.path&&(e.value="")}),this.storePolicy.dispatch(new c.e(Object.assign(Object.assign({},this.resetResidenceValues),{city:null===(u=null===(m=this.currentPolicy.insured)||void 0===m?void 0:m.address)||void 0===u?void 0:u.city,state:null===(b=null===(v=this.currentPolicy.insured)||void 0===v?void 0:v.address)||void 0===b?void 0:b.state})));const P={officialid:{type:null===(f=this.form.get("document"))||void 0===f?void 0:f.value,value:null===(y=this.form.get("documentNumber"))||void 0===y?void 0:y.value}},w={type:"yes"===this.isLegalPerson?"Company":"Person",officialid:null===(E=this.form.get("documentNumber"))||void 0===E?void 0:E.value};this.formPhysicalPerson.reset(),this.formLegalPerson.reset(),this.loadingData=!0,this.buttonLabel="Validando",this.buttonAnimated.playSegments([[0,119]],!0),this.searchClient$=Object(p.a)([this.accountService.getAccounts(P),this.contactService.getContacts(w)]).pipe(Object(g.a)(e=>{var t,n,i,o,r,l;const a=e[0],d=e[1],m="yes"===this.isLegalPerson?"Company":"Person";if(this.buttonAnimated.playSegments([[120,175]],!1),setTimeout(()=>{this.buttonLabel="Validado"},2e3),this.loadingData=!1,a||d){if(a)a.documentNumber=null===(t=this.form.get("documentNumber"))||void 0===t?void 0:t.value,a.documentType=null===(n=this.form.get("document"))||void 0===n?void 0:n.value,a.address=a.primaryaddress,this.storePolicy.dispatch(new c.i(a)),this.storeEmission.dispatch(new s.f(x()(a)));else{const e=d[0].address.split("|"),t={id:e[0],street:e[1],streetnumber:e[2],floor:e[3],apartment:e[4],postalcode:e[5],city:e[6],state:this.provincesFromApi.filter(t=>t.description===e[7])[0].code,clarification:null,type:"home"};this.storePolicy.dispatch(new c.f(m,d[0].companyname.toUpperCase(),d[0].firstname.toUpperCase(),d[0].lastname.toUpperCase(),d[0].id,null===(i=this.form.get("documentNumber"))||void 0===i?void 0:i.value,null===(o=this.form.get("document"))||void 0===o?void 0:o.value,t)),this.storeEmission.dispatch(new s.e(m,d[0].companyname.toUpperCase(),d[0].firstname.toUpperCase(),d[0].lastname.toUpperCase(),d[0].id,null===(r=this.form.get("documentNumber"))||void 0===r?void 0:r.value,null===(l=this.form.get("document"))||void 0===l?void 0:l.value,t))}return this.routes.forEach(e=>{var t,n,i;"client"===e.path&&(e.value="yes"===this.isLegalPerson?null===(t=this.formLegalPerson.get("companyname"))||void 0===t?void 0:t.value:(null===(n=this.formPhysicalPerson.get("firstname"))||void 0===n?void 0:n.value)+" "+(null===(i=this.formPhysicalPerson.get("lastname"))||void 0===i?void 0:i.value))}),this.storeEmission.dispatch(new s.o(this.routes)),Object(h.a)(se.a)}return Object(h.a)(se.a)}),Object(S.a)(e=>(this.loadingData=!1,-1===parseInt(e.code,0)&&this.openModalNoClient(),Object(h.a)([]))),Object(ce.a)())}checkClienteN(e){this.clientBaseN$=this._clientNService.validateClientN(e).pipe(Object(f.a)(e=>{let t=!1;null!==e&&e.length>0&&(t=!0),this.currentBlackList=t,this.currentBlackList&&this.modalUW.openModal()}))}continue(){var e,t,n,i,o,r,l,a,d,m;const u=[];if(u.push({primary:!0,type:null===(e=this.form.get("document"))||void 0===e?void 0:e.value,value:null===(t=this.form.get("documentNumber"))||void 0===t?void 0:t.value}),this.currentAccount.officialids=u,"not"===this.isLegalPerson&&this.formPhysicalPerson.valid){const e=this.formPhysicalPerson.getRawValue();this.currentAccount.contactid=this.currentAccount.contactid?this.currentAccount.contactid:null,this.currentAccount.documentNumber=null===(n=this.form.get("documentNumber"))||void 0===n?void 0:n.value,this.currentAccount.documentType=null===(i=this.form.get("document"))||void 0===i?void 0:i.value,this.currentAccount.firstname=e.firstname,this.currentAccount.lastname=e.lastname,this.currentAccount.fiscalcondition=this.currentAccount.fiscalcondition?this.currentAccount.fiscalcondition:this.currentPolicy.fiscalcondition,this.currentAccount.type="Person",this.currentAccount.maritalstatus=e.maritalstatus,this.currentAccount.nationality=e.nationality,this.currentAccount.gender=e.gender,this.currentAccount.email=e.email,this.currentAccount.birth=rt(e.birth.year+"-"+e.birth.month+"-"+e.birth.day).format(),this.currentAccount.politicallyexposed=e.exposedPerson,this.currentAccount.blacklist=this.currentBlackList,this.currentAccount.cellphone={area:e.prefix,number:e.phone};let t="";(null===(o=this.currentAccount)||void 0===o?void 0:o.workphone)&&(t=(this.currentAccount.workphone.area||"")+(this.currentAccount.workphone.number||"")),this.storePolicy.dispatch(new c.v(t))}else if(this.formLegalPerson.valid&&"yes"===this.isLegalPerson){const e=this.formLegalPerson.getRawValue();this.currentAccount.contactid=this.currentAccount.contactid?this.currentAccount.contactid:null,this.currentAccount.documentNumber=null===(r=this.form.get("documentNumber"))||void 0===r?void 0:r.value,this.currentAccount.documentType=null===(l=this.form.get("document"))||void 0===l?void 0:l.value,this.currentAccount.companyname=e.companyname,this.currentAccount.fiscalcondition=this.currentAccount.fiscalcondition?this.currentAccount.fiscalcondition:this.currentPolicy.fiscalcondition,this.currentAccount.email=e.email,this.currentAccount.consortium=e.consortium,this.currentAccount.officialorganism=e.officialorganism,this.currentAccount.blacklist=this.currentBlackList,this.currentAccount.type="Company",this.currentAccount.workphone={area:e.prefix,number:e.phone};let t="";(null===(a=this.currentAccount)||void 0===a?void 0:a.workphone)&&(t=(this.currentAccount.workphone.area||"")+(this.currentAccount.workphone.number||"")),this.storePolicy.dispatch(new c.v(t))}this.storePolicy.dispatch(new c.i(this.currentAccount)),this.storePolicy.dispatch(new c.z(this.currentAccount.email));const p=this.vehicles.filter(e=>e.number===this.currentMotor.number);this.disabledByRetrieve||("not"===this.isLegalPerson&&p.length>0&&p[0].driver?p[0].driver.clientIsDriver=null===(m=null===(d=this.motorConfig)||void 0===d?void 0:d.filter(e=>e.vehicleType===this.currentMotor.group)[0])||void 0===m?void 0:m.clientIsDriver:this.vehicles&&p.length>0&&p[0].driver&&(p[0].driver.clientIsDriver=!1)),this.storePolicy.dispatch(new c.H(this.vehicles)),this.flowRouteEmissionService.enableRoute(this.routes,"residence"),this.storeEmission.dispatch(new s.c("residence")),this.routes.forEach(e=>{"residence"===e.path&&(e.value="")}),this.routes.forEach(e=>{var t,n,i;"client"===e.path&&(e.value="yes"===this.isLegalPerson?null===(t=this.formLegalPerson.get("companyname"))||void 0===t?void 0:t.value:(null===(n=this.formPhysicalPerson.get("firstname"))||void 0===n?void 0:n.value)+" "+(null===(i=this.formPhysicalPerson.get("lastname"))||void 0===i?void 0:i.value))}),this.flowRouteEmissionService.enableRoute(this.routes,"residence"),(this.formLegalPerson.valid||this.formPhysicalPerson.valid)&&this.storeEmission.dispatch(new s.h(!0))}closeModal(){this.modalClient.closeModal()}openModal(){this.modalClient.openModal()}closeModalNoClient(){this.modalNoClient.closeModal()}openModalNoClient(){this.modalNoClient.openModal()}ngOnDestroy(){this.fiscalConditions$&&this.fiscalConditions$.unsubscribe(),this.accountResetSubscription&&this.accountResetSubscription.unsubscribe(),this.disabledByRetrieve$&&this.disabledByRetrieve$.unsubscribe(),this.callCostsSubscription&&this.callCostsSubscription.unsubscribe()}animationCreated(e){this.buttonAnimated=e}closeUWModal(e){var t;"continue"!==e?(null===(t=this.form.get("documentNumber"))||void 0===t||t.setValue(""),this.modalUW.closeModal()):this.modalUW.closeModal()}openModalMobility(){this.hasMobility&&this.modalMobility.openModal()}closeModalMobility(){var e,t;null===(e=this.form.get("documentNumber"))||void 0===e||e.setValue("",{emitEvent:!0}),null===(t=this.form.get("document"))||void 0===t||t.setValue("SSN",{emitEvent:!0}),this.modalMobility.closeModal()}continueIsLegalPerson(){this.loadingCosts=!0,this.modalMobility.closeModal(),this.modalNewCosts.openModal(),this.vehicles.forEach(e=>{var t,n;const i=null===(t=null==e?void 0:e.packages)||void 0===t?void 0:t.find(e=>e.selected);i&&(i.coverages=null===(n=null==i?void 0:i.coverages)||void 0===n?void 0:n.filter(e=>e.pattern.code!==this.MOBILITY_CODE))});const e=this.policyAdapter.adapt(this.currentPolicy);e.motor.vehicles.forEach(e=>{var t;e.packages=null===(t=e.packages)||void 0===t?void 0:t.filter(e=>e.selected)}),this.callCostsSubscription=this.quotingService.getCosts(e).subscribe(e=>{var t,n,i;const o=null===(n=null===(t=this.currentMotor)||void 0===t?void 0:t.packages)||void 0===n?void 0:n.find(e=>e.selected);this.storePolicy.dispatch(new c.F(null===(i=e.costs)||void 0===i?void 0:i.filter(e=>e.externalId.split("&").includes(`${this.currentPolicy.productcode},${this.currentMotor.number},${null==o?void 0:o.code}`)))),this.vehicles.forEach(t=>{var n,i,o,r,l;const a=null===(n=null==t?void 0:t.packages)||void 0===n?void 0:n.find(e=>e.selected),s=null===(i=e.errors)||void 0===i?void 0:i.find(e=>e.externalId.split("&").includes(`${this.currentPolicy.productcode},${t.number},${null==a?void 0:a.code}`)),d=null===(r=null===(o=e.motor.vehicles)||void 0===o?void 0:o.find(e=>e.number===t.number))||void 0===r?void 0:r.packages.find(e=>e.code===(null==a?void 0:a.code));(null==s?void 0:s.code)?(a&&(a.premiums={}),this.newQuote=""):(a&&(a.premiums=null==d?void 0:d.premiums),this.newQuote=null===(l=e.costs)||void 0===l?void 0:l.find(e=>e.externalId.split("&").includes(`${this.currentPolicy.productcode},${t.number},${null==a?void 0:a.code}`)).invoice.toString(),this.newQuote=this.newQuote?parseFloat(this.newQuote).toFixed(2):"")}),this.storePolicy.dispatch(new c.H(this.vehicles)),this.storeQuote.dispatch(new a.m(e)),this.loadingCosts=!1})}closeModalNewCosts(){this.modalNewCosts.closeModal()}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275directiveInject"](R.FormBuilder),C["\u0275\u0275directiveInject"](P.GenderService),C["\u0275\u0275directiveInject"](P.IdentificationService),C["\u0275\u0275directiveInject"](F),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](P.AccountService),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](P.NationalityService),C["\u0275\u0275directiveInject"](P.MaritalStatusService),C["\u0275\u0275directiveInject"](P.ClienteNService),C["\u0275\u0275directiveInject"](P.UtilService),C["\u0275\u0275directiveInject"](P.ContactsService),C["\u0275\u0275directiveInject"](P.ProvinceService),C["\u0275\u0275directiveInject"](i.a),C["\u0275\u0275directiveInject"](w.a),C["\u0275\u0275directiveInject"](P.QuotingService))},e.\u0275cmp=C["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-client-data"]],viewQuery:function(e,t){var n;1&e&&(C["\u0275\u0275viewQuery"](Ct,!0),C["\u0275\u0275staticViewQuery"](Pt,!0),C["\u0275\u0275staticViewQuery"](wt,!0),C["\u0275\u0275staticViewQuery"](It,!0),C["\u0275\u0275viewQuery"](Mt,!0),C["\u0275\u0275viewQuery"](Ot,!0)),2&e&&(C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.documentSelect=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalClient=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalNoClient=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalUW=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalMobility=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalNewCosts=n.first))},decls:114,vars:30,consts:[[1,"col-lg-12",3,"formGroup"],[1,"row"],[1,"col-lg-4","pl-0"],[1,"col-lg-6","input-group","pl-0"],["formControlName","document","bindLabel","description","bindValue","code","placeholder","Documento...","name","documentClientEmission",1,"custom",2,"width","100px",3,"items","multiple","searchable","dropdownPosition","disabled"],["documentType",""],["type","text","formControlName","documentNumber","label","","placeholder","","placement","bottom","name","documentNumberClientEmission",3,"helpFeedback","maxLength","messageTooltips","disabled","keyup.enter"],[1,"col-lg-3"],["name","validateDocumentNumberBtn",1,"btn","btn-primary","btn-block",3,"disabled","click"],["height","24px","width","24px",3,"hidden","options","animationCreated"],[1,"press-enter","ml-3","mr-4"],[1,"question-class",2,"cursor","pointer",3,"click"],[4,"ngIf"],["modalClient",""],[1,"modal-header","modal-header-items"],["type","button","aria-label","Close","name","closeModalBtn",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-body-items"],[1,"modal-footer"],[1,"col-lg-4","offset-lg-8","pl-0"],["type","button","name","closeModalBtn",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],["modalNoClient",""],["id","modal-basic-title",1,"modal-title"],[3,"closed"],["modalUW",""],[1,"modal-header",2,"padding","1rem 2rem"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[1,"col-lg-4","offset-lg-3","pl-0"],["type","button",1,"btn","btn-modal","btn-lg","btn-block",3,"click"],[1,"col-lg-5","pl-0"],["type","button",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],[3,"options"],["modalMobility",""],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"disabled","click"],[1,"col-lg-2","offset-lg-4","pl-0"],[1,"col-lg-6","pl-0"],["type","button",1,"btn","btn-primary",3,"click"],["newCosts",""],[4,"ngIf","ngIfElse"],["stillLoadingCost",""],["type","button","name","closeModalNewCostsBtn",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled","click"],["type","hidden",4,"ngIf"],["class","col-12",3,"formGroup",4,"ngIf"],["type","hidden"],[1,"col-12",3,"formGroup"],[1,"col-lg-4"],[1,"col-4","pl-0"],["type","text","formControlName","firstname","label","","placeholder","Ingres\xe1 el nombre","maxlength","100","placement","bottom","name","firstnameClientEmission",3,"disabled","helpFeedback","value"],[1,"col-4"],["type","text","formControlName","lastname","maxlength","100","label","","placeholder","Ingres\xe1 el apellido","placement","bottom","name","lastnameClientEmission",3,"disabled","helpFeedback"],["formControlName","birth","navigation","select","name","birthClientEmission",3,"disabled","minDate","maxDate","helpFeedback"],["formControlName","nationality","bindLabel","description","bindValue","code","placeholder","Nacionalidad","name","nationalityClientEmission",1,"custom",3,"disabled","items","multiple","helpFeedback","searchable","dropdownPosition"],["formControlName","maritalstatus","bindLabel","description","bindValue","code","placeholder","Estado Civil","name","maritalstatusClientEmission",1,"custom",3,"disabled","items","multiple","helpFeedback","searchable","dropdownPosition"],["formControlName","gender","bindLabel","description","bindValue","code","placeholder","Sexo","name","genderClientEmission",1,"custom",3,"disabled","items","multiple","helpFeedback","searchable","dropdownPosition"],[1,"col-lg-1","pl-0"],[1,"col-1","pl-0","pr-0"],["type","text","formControlName","prefix","placeholder","C\xf3d. \xc1rea","name","prefixClientEmission",3,"maxLength","minLength","helpFeedback","disabled"],[1,"col-3"],["type","text","formControlName","phone","label","","placeholder","Tel\xe9fono","name","phoneClientEmission",3,"minLength","maxLength","helpFeedback","disabled"],["type","text","formControlName","email","label","","placeholder","Ingres\xe1 el email","name","emailClientEmission",3,"maxLength","helpFeedback","disabled"],["class","text-danger",4,"ngIf"],["id","containerExposedPerson",1,"form-checkbox"],["placement","bottom","ngbTooltip","Funcionarios p\xfablicos nacionales, provinciales o municipales que ocupan u ocuparon altos cargos, puestos jer\xe1rquicos, como as\xed tambi\xe9n sus familiares"],["type","checkbox","formControlName","exposedPerson","id","exposedPerson","name","exposedPersonClientEmission","messageTooltips","Funcionarios p\xfablicos nacionales, provinciales o municipales que ocupan u ocuparon altos cargos, puestos jer\xe1rquicos, como as\xed tambi\xe9n sus familiares",1,"form-checkbox-input"],["for","exposedPerson",1,"form-checkbox-label"],[1,"label-checkbox"],[1,"col-lg-8","pl-0"],["name","continueDataClientEmisionBtn",1,"btn","btn-primary","btn-heft",3,"disabled","click"],[1,"text-danger"],["type","text","formControlName","companyname","label","","placeholder","Ingres\xe1 el nombre","placement","bottom","messageTooltips","Ingres\xe1 solo car\xe1cteres alfanumericos","name","companynameClientEmission",3,"value","disabled","maxLength","helpFeedback"],["type","text","formControlName","prefix","label","","placeholder","C\xf3d. \xc1rea","name","prefixClientEmission",3,"maxLength","minLength","helpFeedback"],["type","text","formControlName","phone","label","","placeholder","Tel\xe9fono","name","phoneClientEmission",3,"minLength","maxLength","helpFeedback"],["type","text","formControlName","email","label","","placeholder","Ingres\xe1 el email","name","emailClientEmission",3,"maxLength","helpFeedback"],[1,"row",2,"display","none"],[1,"form-checkbox"],["type","checkbox","id","officialorganism","formControlName","officialorganism","name","officialorganismClientEmission",1,"form-checkbox-input"],["for","officialorganism",1,"form-checkbox-label"],["type","checkbox","id","consortium","formControlName","consortium","name","consortiumClientEmission",1,"form-checkbox-input"],["for","consortium",1,"form-checkbox-label"],[1,"row","mt-3"],["name","continueClientEmissionBtn",1,"btn","btn-primary","btn-heft",3,"disabled","click"],[1,"col-12","text-center"],["width","8.75rem","height","6.25rem",3,"options"]],template:function(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",1),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275elementStart"](3,"label"),C["\u0275\u0275text"](4," Documento "),C["\u0275\u0275elementStart"](5,"sup"),C["\u0275\u0275text"](6,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](7,"div",1),C["\u0275\u0275elementStart"](8,"div",3),C["\u0275\u0275element"](9,"sxf-select",4,5),C["\u0275\u0275elementStart"](11,"sxf-textbox",6),C["\u0275\u0275listener"]("keyup.enter",(function(){return t.validateDocumentNumber()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](12,"br"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](13,"div",7),C["\u0275\u0275elementStart"](14,"button",8),C["\u0275\u0275listener"]("click",(function(){return t.validateDocumentNumber()})),C["\u0275\u0275elementStart"](15,"ng-lottie",9),C["\u0275\u0275listener"]("animationCreated",(function(e){return t.animationCreated(e)})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275text"](16),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](17,"div",10),C["\u0275\u0275text"](18," o presiona ENTER "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](19,"div",7),C["\u0275\u0275elementStart"](20,"span",11),C["\u0275\u0275listener"]("click",(function(){return t.openModal()})),C["\u0275\u0275elementStart"](21,"b"),C["\u0275\u0275text"](22,"\xbfLos datos no coinciden?"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](23,Bt,5,5,"div",12),C["\u0275\u0275pipe"](24,"async"),C["\u0275\u0275pipe"](25,"async"),C["\u0275\u0275elementStart"](26,"sxf-modal",null,13),C["\u0275\u0275elementStart"](28,"div",14),C["\u0275\u0275elementStart"](29,"button",15),C["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),C["\u0275\u0275elementStart"](30,"span",16),C["\u0275\u0275text"](31,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](32,"div",17),C["\u0275\u0275elementStart"](33,"h3"),C["\u0275\u0275text"](34,"\xbfLos datos no coinciden?"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](35,"p"),C["\u0275\u0275text"](36),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](37,"div",18),C["\u0275\u0275elementStart"](38,"div",1),C["\u0275\u0275elementStart"](39,"div",19),C["\u0275\u0275elementStart"](40,"button",20),C["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),C["\u0275\u0275text"](41," Volver "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](42,"sxf-modal",null,21),C["\u0275\u0275elementStart"](44,"div",14),C["\u0275\u0275elementStart"](45,"h4",22),C["\u0275\u0275text"](46,"Cliente existente"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](47,"button",15),C["\u0275\u0275listener"]("click",(function(){return t.closeModalNoClient()})),C["\u0275\u0275elementStart"](48,"span",16),C["\u0275\u0275text"](49,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](50,"div",17),C["\u0275\u0275elementStart"](51,"h3"),C["\u0275\u0275text"](52,"Este cliente pertenece a otro productor"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](53,"p"),C["\u0275\u0275text"](54," Pertenece a otra organizaci\xf3n comercial deber\xe1 comunicarse con su ejecutivo de cuenta para poder avanzar con esta solicitud. "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](55,"div",18),C["\u0275\u0275elementStart"](56,"div",1),C["\u0275\u0275elementStart"](57,"div",19),C["\u0275\u0275elementStart"](58,"button",20),C["\u0275\u0275listener"]("click",(function(){return t.closeModalNoClient()})),C["\u0275\u0275text"](59," Volver "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](60,"sxf-modal",23,24),C["\u0275\u0275listener"]("closed",(function(){return t.closeUWModal()})),C["\u0275\u0275elementStart"](62,"div",25),C["\u0275\u0275elementStart"](63,"button",26),C["\u0275\u0275listener"]("click",(function(){return t.closeUWModal("Cross click")})),C["\u0275\u0275elementStart"](64,"span",16),C["\u0275\u0275text"](65,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](66,"div",27),C["\u0275\u0275elementStart"](67,"h4"),C["\u0275\u0275text"](68," La presente emisi\xf3n va a requerir autorizaci\xf3n de la compa\xf1\xeda. "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](69,"h4"),C["\u0275\u0275text"](70,"\xbfDesea solicitar autorizaci\xf3n?"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](71,"div",18),C["\u0275\u0275elementStart"](72,"div",1),C["\u0275\u0275elementStart"](73,"div",28),C["\u0275\u0275elementStart"](74,"button",29),C["\u0275\u0275listener"]("click",(function(){return t.closeUWModal()})),C["\u0275\u0275text"](75," Cancelar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](76,"div",30),C["\u0275\u0275elementStart"](77,"button",31),C["\u0275\u0275listener"]("click",(function(){return t.closeUWModal("continue")})),C["\u0275\u0275text"](78," Continuar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](79,"sxf-modal",32,33),C["\u0275\u0275elementStart"](81,"div",34),C["\u0275\u0275elementStart"](82,"h6",22),C["\u0275\u0275text"](83," Movilidad Sura "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](84,"button",35),C["\u0275\u0275listener"]("click",(function(){return t.closeModalMobility()})),C["\u0275\u0275elementStart"](85,"span",16),C["\u0275\u0275text"](86,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](87,"div",27),C["\u0275\u0275elementStart"](88,"h3"),C["\u0275\u0275text"](89,"Movilidad Sura s\xf3lo est\xe1 disponible para personas f\xedsicas."),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](90,"h6"),C["\u0275\u0275text"](91," Si tu cliente es Jur\xeddico debemos cancelar este producto y realizar una recotizaci\xf3n "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](92,"div",18),C["\u0275\u0275elementStart"](93,"div",1),C["\u0275\u0275elementStart"](94,"div",36),C["\u0275\u0275elementStart"](95,"button",29),C["\u0275\u0275listener"]("click",(function(){return t.closeModalMobility()})),C["\u0275\u0275text"](96," Cancelar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](97,"div",37),C["\u0275\u0275elementStart"](98,"button",38),C["\u0275\u0275listener"]("click",(function(){return t.continueIsLegalPerson()})),C["\u0275\u0275template"](99,At,2,0,"span",12),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](100,"sxf-modal",32,39),C["\u0275\u0275elementStart"](102,"div",34),C["\u0275\u0275elementStart"](103,"h4",22),C["\u0275\u0275text"](104," Recotizando "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](105,"div",17),C["\u0275\u0275template"](106,Rt,7,4,"p",40),C["\u0275\u0275template"](107,$t,3,1,"ng-template",null,41,C["\u0275\u0275templateRefExtractor"]),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](109,"div",18),C["\u0275\u0275elementStart"](110,"div",1),C["\u0275\u0275elementStart"](111,"div",19),C["\u0275\u0275elementStart"](112,"button",42),C["\u0275\u0275listener"]("click",(function(){return t.closeModalNewCosts()})),C["\u0275\u0275text"](113," Aceptar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275reference"](108);C["\u0275\u0275property"]("formGroup",t.form),C["\u0275\u0275advance"](9),C["\u0275\u0275property"]("items",t.documents$)("multiple",!1)("searchable",!1)("dropdownPosition","bottom")("disabled",t.disabledByRetrieve),C["\u0275\u0275advance"](2),C["\u0275\u0275propertyInterpolate2"]("messageTooltips","Ingres\xe1 los ",0!==t.maxLength?t.maxLength:""," d\xedgitos del ",t.documentDescription,""),C["\u0275\u0275property"]("helpFeedback","")("maxLength",t.maxLength)("disabled",t.disabledByRetrieve),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("disabled",!t.form.valid||"undefined"!==t.isLegalPerson||t.disabledByRetrieve),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("hidden",!t.loadingData)("options",t.lottieConfig),C["\u0275\u0275advance"](1),C["\u0275\u0275textInterpolate1"](" ",t.buttonLabel," "),C["\u0275\u0275advance"](7),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](24,24,t.searchClient$)||C["\u0275\u0275pipeBind1"](25,26,t.client$)),C["\u0275\u0275advance"](13),C["\u0275\u0275textInterpolate1"](" Si el n\xfamero de ",t.documentDescription," no coincide con los datos de nombre y apellido verific\xe1 que no haya errores de tipeo. Si el error persiste, por favor comunicate con tu ejecutivo de cuenta. "),C["\u0275\u0275advance"](43),C["\u0275\u0275property"]("options",C["\u0275\u0275pureFunction0"](28,Dt)),C["\u0275\u0275advance"](5),C["\u0275\u0275property"]("disabled",t.loadingCosts),C["\u0275\u0275advance"](15),C["\u0275\u0275property"]("ngIf",!t.loadingCosts),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("options",C["\u0275\u0275pureFunction0"](29,Lt)),C["\u0275\u0275advance"](6),C["\u0275\u0275property"]("ngIf",!t.loadingCosts)("ngIfElse",e),C["\u0275\u0275advance"](6),C["\u0275\u0275property"]("disabled",t.loadingCosts)}},directives:[R.NgControlStatusGroup,R.FormGroupDirective,Q.a,R.NgControlStatus,R.FormControlName,q.a,O.a,M.o,I.a,R.MaxLengthValidator,U.a,ve.o,R.CheckboxControlValueAccessor],pipes:[M.b,M.f],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;font-size:.75rem;color:#393b3d}.press-enter[_ngcontent-%COMP%]{color:#a3adb3;font-size:.75rem}.label-checkbox[_ngcontent-%COMP%]{font-size:.875rem;vertical-align:top;margin-left:3px}.question-class[_ngcontent-%COMP%]{font-size:1rem;line-height:18px;color:#00aec7}"]}),e})();var Tt=n("xtkq"),qt=n("cJ9h"),Qt=n("SrNW"),Ut=n("A8kH"),zt=n("iqFP"),Gt=n("Ti3e");function Ht(e,t,n){return 0===n?[t]:(e.push(t),e)}const Yt=["newCosts"];function Wt(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",16),C["\u0275\u0275elementStart"](1,"div",17),C["\u0275\u0275elementStart"](2,"button",18),C["\u0275\u0275text"](3," Cargando... "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function Jt(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"span",22),C["\u0275\u0275text"](1," No se encontraron resultados "),C["\u0275\u0275elementEnd"]())}const Xt=function(e){return{active:e}};function Zt(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",17),C["\u0275\u0275elementStart"](1,"button",23),C["\u0275\u0275listener"]("click",(function(){C["\u0275\u0275restoreView"](e);const n=t.$implicit;return C["\u0275\u0275nextContext"](2).selectAddress(n)}))("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"](2).onEnter()})),C["\u0275\u0275text"](2),C["\u0275\u0275pipe"](3,"uppercase"),C["\u0275\u0275pipe"](4,"uppercase"),C["\u0275\u0275pipe"](5,"uppercase"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=C["\u0275\u0275nextContext"](2);C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngClass",C["\u0275\u0275pureFunction1"](11,Xt,e.id===n.addressIdSelected))("disabled",n.disabledByRetrieve),C["\u0275\u0275advance"](1),C["\u0275\u0275textInterpolate3"](" ",C["\u0275\u0275pipeBind1"](3,5,e.street)," ",C["\u0275\u0275pipeBind1"](4,7,e.streetnumber),", ",C["\u0275\u0275pipeBind1"](5,9,e.city)," ")}}function Kt(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",16),C["\u0275\u0275template"](1,Jt,2,0,"span",19),C["\u0275\u0275template"](2,Zt,6,13,"div",20),C["\u0275\u0275elementStart"](3,"div",17),C["\u0275\u0275elementStart"](4,"button",21),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().addAddress([])})),C["\u0275\u0275text"](5," + Agregar nuevo domicilio "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",0==e.length),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngForOf",e),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngClass",C["\u0275\u0275pureFunction1"](4,Xt,null===n.addressIdSelected))("disabled",n.disabledByRetrieve)}}function en(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div"),C["\u0275\u0275elementStart"](1,"div",24),C["\u0275\u0275elementStart"](2,"div",1),C["\u0275\u0275elementStart"](3,"div",25),C["\u0275\u0275elementStart"](4,"label"),C["\u0275\u0275text"](5," C\xf3d. postal "),C["\u0275\u0275elementStart"](6,"sup"),C["\u0275\u0275text"](7,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](8,"div",26),C["\u0275\u0275elementStart"](9,"label"),C["\u0275\u0275text"](10," Provincia "),C["\u0275\u0275elementStart"](11,"sup"),C["\u0275\u0275text"](12,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](13,"div",26),C["\u0275\u0275elementStart"](14,"label"),C["\u0275\u0275text"](15," Localidad "),C["\u0275\u0275elementStart"](16,"sup"),C["\u0275\u0275text"](17,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](18,"div",1),C["\u0275\u0275elementStart"](19,"div",25),C["\u0275\u0275elementStart"](20,"sxf-textbox",27),C["\u0275\u0275listener"]("keyup.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().validatePostalCode()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](21,"div",26),C["\u0275\u0275elementStart"](22,"sxf-select",28,29),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275pipe"](24,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](25,"div",26),C["\u0275\u0275elementStart"](26,"sxf-select",30,31),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](28,"div",1),C["\u0275\u0275elementStart"](29,"div",32),C["\u0275\u0275elementStart"](30,"label"),C["\u0275\u0275text"](31," Calle "),C["\u0275\u0275elementStart"](32,"sup"),C["\u0275\u0275text"](33,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](34,"div",33),C["\u0275\u0275elementStart"](35,"label"),C["\u0275\u0275text"](36," Altura "),C["\u0275\u0275elementStart"](37,"sup"),C["\u0275\u0275text"](38,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](39,"div",34),C["\u0275\u0275elementStart"](40,"label"),C["\u0275\u0275text"](41," Piso "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](42,"div",34),C["\u0275\u0275elementStart"](43,"label"),C["\u0275\u0275text"](44," Depto "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](45,"div",1),C["\u0275\u0275elementStart"](46,"div",32),C["\u0275\u0275elementStart"](47,"sxf-textbox",35),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](48,"div",33),C["\u0275\u0275elementStart"](49,"sxf-textbox",36),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](50,"div",34),C["\u0275\u0275elementStart"](51,"sxf-textbox",37),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](52,"div",34),C["\u0275\u0275elementStart"](53,"sxf-textbox",38),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](54,"div",1),C["\u0275\u0275elementStart"](55,"div",25),C["\u0275\u0275elementStart"](56,"label"),C["\u0275\u0275text"](57," Tipo "),C["\u0275\u0275elementStart"](58,"sup"),C["\u0275\u0275text"](59,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](60,"div",39),C["\u0275\u0275elementStart"](61,"label"),C["\u0275\u0275text"](62," Aclaraciones "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](63,"div",1),C["\u0275\u0275elementStart"](64,"div",25),C["\u0275\u0275elementStart"](65,"sxf-select",40,41),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](67,"div",39),C["\u0275\u0275elementStart"](68,"sxf-textbox",42),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](69,"div",43),C["\u0275\u0275elementStart"](70,"div",39),C["\u0275\u0275elementStart"](71,"span"),C["\u0275\u0275elementStart"](72,"button",44),C["\u0275\u0275listener"]("click",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().continue()})),C["\u0275\u0275text"](73," Continuar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](74,"span",45),C["\u0275\u0275text"](75," o presiona ENTER "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("formGroup",n.formClientResidence),C["\u0275\u0275advance"](19),C["\u0275\u0275property"]("disabled",!n.clientIsEditable)("maxLength",4),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("disabled",!n.clientIsEditable)("items",C["\u0275\u0275pipeBind1"](24,29,n.provinces$))("multiple",!1)("searchable",!0)("dropdownPosition","bottom")("loading",n.loadingPostalCode),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("disabled",!n.clientIsEditable||n.loadingPostalCode)("items",n.locations$)("multiple",!1)("searchable",!0)("dropdownPosition","bottom"),C["\u0275\u0275advance"](21),C["\u0275\u0275property"]("disabled",!n.clientIsEditable)("maxLength",200),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("disabled",!n.clientIsEditable)("maxLength",10),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("disabled",!n.clientIsEditable)("maxLength",10),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("disabled",!n.clientIsEditable)("maxLength",10),C["\u0275\u0275advance"](12),C["\u0275\u0275property"]("disabled",!n.clientIsEditable)("items",e)("multiple",!1)("searchable",!0)("dropdownPosition","bottom"),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("disabled",!n.clientIsEditable),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("disabled",!n.formClientResidence.valid)}}function tn(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"p"),C["\u0275\u0275text"](1," Recotizamos en base a la direcci\xf3n del cliente, el nuevo valor de la cuota es de "),C["\u0275\u0275elementStart"](2,"b"),C["\u0275\u0275text"](3),C["\u0275\u0275pipe"](4,"number"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275element"](5,"br"),C["\u0275\u0275text"](6," Para mas detalle revisar el detalle del men\xfa lateral. "),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](3),C["\u0275\u0275textInterpolate1"]("$ ",C["\u0275\u0275pipeBind2"](4,1,e.newQuote,"1.0-0"),"")}}function nn(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",1),C["\u0275\u0275elementStart"](1,"div",46),C["\u0275\u0275element"](2,"ng-lottie",47),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("options",e.lottieConfig)}}const on=function(){return{backdrop:"static",keyboard:!1}};let rn=(()=>{class e{constructor(e,t,n,i,o,r,l,a,s,d){this.fb=e,this.provinceService=t,this.locationService=n,this.storePolicy=i,this.storeQuote=o,this.flowRouteEmissionService=r,this.storeEmission=l,this._addressTypeService=a,this.quotingService=s,this.policyAdapter=d,this.lottieConfig={path:"/assets/loadings/sura-loader.json"},this.zipCode=new R.FormControl(""),this.formClientResidence={},this.provinces$=new ae.a,this.policyclientaddress$=new ae.a,this.primaryClientAddress$=new ae.a,this.provinceDescription="",this.locations$=new ae.a,this.routes=[],this.residences$=new ae.a,this.addressType$=new ae.a,this.defaultAddressType="",this.dataByPostalCodeSubscriber=new u.a,this.dataByPostalCode$=new ae.a,this.arrProvinces=[],this.addressIdSelected="",this.filledQuestion=!1,this.loadingPostalCode=!1,this.client={},this.clientIsEditable=!1,this.vehicles=[],this.currentMotor={},this.currentPolicy={},this.loadingCosts=!1,this.newQuote="",this.getClientFromStore$=new u.a,this.modalNewCosts={},this.disabledByRetrieve$=new u.a,this.disabledByRetrieve=!1,this.policySubscription=new u.a}ngOnInit(){this.formClientResidence=this.fb.group({id:[null],state:[,R.Validators.required],city:[,R.Validators.required],postalcode:[,R.Validators.required],street:[,R.Validators.required],streetnumber:[,R.Validators.required],apartment:[],floor:[],type:[,R.Validators.required],clarification:[]}),this.storeEmission.select(d.c).subscribe(e=>this.clientIsEditable=e.editable),this.storePolicy.select(m.b).subscribe(e=>{this.client=e}),this.policySubscription=Object(p.a)([this.storePolicy.select(m.p),this.storeQuote.select(A.v)]).subscribe(e=>{this.vehicles=e[0].motor.vehicles,this.currentMotor=e[0].motor.vehicles.filter(t=>t.number===e[1].activeMotor)[0],this.currentPolicy=e[0]}),this.provinces$=this.provinceService.getAllProvinces().pipe(Object(g.a)(e=>(this.arrProvinces=e,Object(h.a)(e)))),this.addressType$=this._addressTypeService.getAddressType().pipe(Object(f.a)(e=>{this.defaultAddressType=e[0].code,this.loadAddressSave()})),this.addressIdSelected="",this.disabledByRetrieve$=this.storeEmission.select(d.d).subscribe(e=>{this.disabledByRetrieve=!(!e.jobNumberFromQuotes||!e.approvedEmission)})}loadAddressSave(){var e,t;this.storeEmission.select(d.m).subscribe(e=>{this.routes=e}),this.routes.forEach(e=>{"residence"===e.path&&(this.filledQuestion=null!==e.value)}),this.residences$=Object(p.a)([this.storeEmission.select(d.b),this.storePolicy.select(m.b)]).pipe(Object(g.a)(e=>{var t,n,i,o,r,l;null===e[0]&&(e[0]=[]);const a=e[0].filter(e=>e.postalcode);return a.length>0||(e&&e.length>1&&null!==(null===(n=null===(t=e[1])||void 0===t?void 0:t.address)||void 0===n?void 0:n.postalcode)&&""!==(null===(o=null===(i=e[1])||void 0===i?void 0:i.address)||void 0===o?void 0:o.postalcode)?this.addAddress(e[1].address):this.addAddress([])),1===a.length&&e&&e.length>0&&null===(null===(l=null===(r=e[1])||void 0===r?void 0:r.address)||void 0===l?void 0:l.postalcode)&&this.selectAddress(a[0]),Object(h.a)(a)})),null===(e=this.formClientResidence.get("state"))||void 0===e||e.valueChanges.subscribe(e=>{null!==e&&(this.locations$=this.locationService.getLocations(e).pipe(Object(f.a)(e=>{var t,n,i,o;1===e.length?null===(n=null===(t=this.formClientResidence)||void 0===t?void 0:t.get("city"))||void 0===n||n.setValue(e[0].city,{onlySelf:!0,emitEvent:!0}):null===(o=null===(i=this.formClientResidence)||void 0===i?void 0:i.get("city"))||void 0===o||o.setValue([],{onlySelf:!0,emitEvent:!1})})))}),this.primaryClientAddress$=this.storePolicy.select(m.q),this.getClientFromStore$=Object(p.a)([this.storePolicy.select(m.b),this.provinceService.getAllProvinces(),this.storePolicy.select(m.a)]).pipe(Object(st.a)(e=>null!=e[0].address&&null!==e[0].address.state),Object(g.a)(e=>{const t=e[1].filter(t=>t.code===e[0].address.state)[0];return this.provinceDescription=t.description,this.formClientResidence.patchValue({id:e[0].address.id,state:e[0].address.state,city:e[0].address.city,postalcode:e[0].address.postalcode,street:e[0].address.street,streetnumber:e[0].address.streetnumber,apartment:e[0].address.apartment,floor:e[0].address.floor,type:e[0].address.type,clarification:e[0].address.clarification},{emitEvent:!1}),void 0!==e[0].address.id&&(this.addressIdSelected=e[0].address.id),Object(h.a)(e[0].address)})).subscribe(),null===(t=this.formClientResidence.get("postalcode"))||void 0===t||t.valueChanges.subscribe(e=>{null===e||4!==e.length||this.filledQuestion||(this.loadingPostalCode=!0,this.validatePostalCode())})}selectAddress(e){this.addressIdSelected=e.id,this.clientIsEditable=!1,this.formClientResidence.patchValue({id:e.id?e.id:null,state:e.state?e.state:null,city:e.city?e.city:null,postalcode:e.postalcode?e.postalcode:null,street:e.street?e.street:null,streetnumber:e.streetnumber?e.streetnumber:null,apartment:e.apartment?e.apartment:null,floor:e.floor?e.floor:null,type:e.type?e.type:null,clarification:e.clarification?e.clarification:null},{emitEvent:!1}),this.storePolicy.dispatch(new c.e(this.formClientResidence.value))}addAddress(e){this.clientIsEditable=!0,0===e.length?(this.filledQuestion=!1,this.addressIdSelected="",this.formClientResidence.reset(),this.formClientResidence.patchValue({type:this.defaultAddressType},{emitEvent:!0})):(this.addressIdSelected=null==e?void 0:e.id,this.formClientResidence.patchValue({id:null==e?void 0:e.id,state:null==e?void 0:e.state,city:null==e?void 0:e.city,postalcode:null==e?void 0:e.postalcode,street:null==e?void 0:e.street,streetnumber:null==e?void 0:e.streetnumber,apartment:null==e?void 0:e.apartment,floor:null==e?void 0:e.floor,type:null==e?void 0:e.type,clarification:null==e?void 0:e.clarification},{emitEvent:!1}))}onEnter(){this.formClientResidence.valid&&this.continue()}continue(){var e;this.storePolicy.dispatch(new c.e(this.formClientResidence.value)),this.client.accountnumber&&null===(null===(e=this.formClientResidence.get("id"))||void 0===e?void 0:e.value)&&this.storePolicy.dispatch(new c.C(this.formClientResidence.value)),this.callCost()}callCost(){this.disabledByRetrieve?this.closeModalNewCosts():Object(p.a)([this.storePolicy.select(m.p),this.storeEmission.select(d.l)]).pipe(Object(y.a)()).subscribe(([e,t])=>{var n,i,o,r;if((null===(i=null===(n=null==e?void 0:e.client)||void 0===n?void 0:n.address)||void 0===i?void 0:i.state)===(null==t?void 0:t.state)&&(null===(r=null===(o=null==e?void 0:e.client)||void 0===o?void 0:o.address)||void 0===r?void 0:r.city)===(null==t?void 0:t.city))return void this.closeModalNewCosts();this.loadingCosts=!0,this.modalNewCosts.openModal();const l=this.policyAdapter.adapt(e);l.motor.vehicles.forEach(e=>{var t;e.packages=null===(t=null==e?void 0:e.packages)||void 0===t?void 0:t.filter(e=>e.selected)}),this.quotingService.getCosts(l).subscribe(e=>{var t,n,i;const o=null===(n=null===(t=this.currentMotor)||void 0===t?void 0:t.packages)||void 0===n?void 0:n.find(e=>e.selected);this.storePolicy.dispatch(new c.F(null===(i=e.costs)||void 0===i?void 0:i.filter(e=>e.externalId.split("&").includes(`${this.currentPolicy.productcode},${this.currentMotor.number},${null==o?void 0:o.code}`)))),this.vehicles.forEach(t=>{var n,i,o,r,l,a,s,d;const c=null===(n=null==t?void 0:t.packages)||void 0===n?void 0:n.find(e=>e.selected),m=null===(i=e.errors)||void 0===i?void 0:i.find(e=>e.externalId.split("&").includes(`${this.currentPolicy.productcode},${t.number},${null==c?void 0:c.code}`)),u=null===(a=null===(l=null===(r=null===(o=null==e?void 0:e.motor)||void 0===o?void 0:o.vehicles)||void 0===r?void 0:r.find(e=>e.number===t.number))||void 0===l?void 0:l.packages)||void 0===a?void 0:a.find(e=>e.code===(null==c?void 0:c.code));(null==m?void 0:m.code)?(c&&(c.premiums={}),this.newQuote=""):(c&&(c.premiums=null==u?void 0:u.premiums),this.newQuote=null===(d=null===(s=null==e?void 0:e.costs)||void 0===s?void 0:s.find(e=>{var n,i;return null===(i=null===(n=null==e?void 0:e.externalId)||void 0===n?void 0:n.split("&"))||void 0===i?void 0:i.includes(`${this.currentPolicy.productcode},${t.number},${null==c?void 0:c.code}`)}))||void 0===d?void 0:d.invoice.toString(),this.newQuote=this.newQuote?parseFloat(this.newQuote).toFixed(2):"")}),this.storePolicy.dispatch(new c.H(this.vehicles)),this.storeQuote.dispatch(new a.m(e)),this.loadingCosts=!1})}).unsubscribe()}closeModalNewCosts(){this.modalNewCosts.closeModal(),this.routes.forEach(e=>{var t,n,i,o;"residence"===e.path&&(e.value=(null===(n=null===(t=this.client)||void 0===t?void 0:t.address)||void 0===n?void 0:n.street)+" "+(null===(o=null===(i=this.client)||void 0===i?void 0:i.address)||void 0===o?void 0:o.streetnumber)+", "+this.arrProvinces.filter(e=>{var t,n;return e.code===(null===(n=null===(t=this.client)||void 0===t?void 0:t.address)||void 0===n?void 0:n.state)})[0].description)}),this.storeEmission.dispatch(new s.c("tax-condition")),this.formClientResidence.valid&&this.storeEmission.dispatch(new s.j(!0)),this.flowRouteEmissionService.enableRoute(this.routes,"tax-condition")}validatePostalCode(){var e,t,n;null===(t=null===(e=this.formClientResidence)||void 0===e?void 0:e.get("city"))||void 0===t||t.setValue([],{onlySelf:!0,emitEvent:!1}),this.provinces$=this.provinceService.getAllProvinces(),this.locations$=this.locationService.getLocationAndProvince(null===(n=this.formClientResidence.get("postalcode"))||void 0===n?void 0:n.value).pipe(Object(de.a)(e=>e),Object(f.a)(e=>{var t,n,i,o;e&&(1===(e=e.filter(e=>e.postalcode)).length?null===(n=null===(t=this.formClientResidence)||void 0===t?void 0:t.get("city"))||void 0===n||n.setValue(e[0].city,{onlySelf:!0,emitEvent:!0}):null===(o=null===(i=this.formClientResidence)||void 0===i?void 0:i.get("city"))||void 0===o||o.setValue([],{onlySelf:!0,emitEvent:!1}))})),this.dataByPostalCode$=this.locations$.pipe(Object(Tt.a)(e=>e.map(e=>e.state.description)),Object(qt.b)(e=>Object(p.a)([Object(h.a)(e.key),e.pipe(function(e,t){return arguments.length>=2?function(n){return Object(Gt.a)(Object(Qt.a)(e,t),Object(Ut.a)(1),Object(zt.a)(t))(n)}:function(t){return Object(Gt.a)(Object(Qt.a)((t,n,i)=>e(t,n,i+1)),Object(Ut.a)(1))(t)}}(Ht,[]))])),Object(de.a)(e=>e[0])),this.dataByPostalCodeSubscriber=this.dataByPostalCode$.pipe(Object(de.a)(e=>{var t,n,i,o;if(e){this.loadingPostalCode=!1;const r=Array.from(new Set(e));if(1===r.length){const e=this.arrProvinces.filter(e=>e.description===r[0].toString())[0];return null===(n=null===(t=this.formClientResidence)||void 0===t?void 0:t.get("state"))||void 0===n||n.setValue(e.code,{onlySelf:!0,emitEvent:!1}),r[0]}return null===(o=null===(i=this.formClientResidence)||void 0===i?void 0:i.get("state"))||void 0===o||o.setValue([],{onlySelf:!0,emitEvent:!1}),se.a}}),Object(S.a)(()=>{var e,t;return null===(e=this.formClientResidence.get("state"))||void 0===e||e.setValue([],{onlySelf:!0,emitEvent:!1}),null===(t=this.formClientResidence.get("city"))||void 0===t||t.setValue([],{onlySelf:!0,emitEvent:!1}),this.loadingPostalCode=!1,Object(h.a)([])})).subscribe()}ngOnDestroy(){this.disabledByRetrieve$&&this.disabledByRetrieve$.unsubscribe(),this.getClientFromStore$&&this.getClientFromStore$.unsubscribe(),this.policySubscription&&this.policySubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275directiveInject"](R.FormBuilder),C["\u0275\u0275directiveInject"](P.ProvinceService),C["\u0275\u0275directiveInject"](P.LocationService),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](F),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](P.AddressTypeService),C["\u0275\u0275directiveInject"](P.QuotingService),C["\u0275\u0275directiveInject"](w.a))},e.\u0275cmp=C["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-client-residence"]],viewQuery:function(e,t){var n;1&e&&C["\u0275\u0275viewQuery"](Yt,!0),2&e&&C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalNewCosts=n.first)},decls:23,vars:11,consts:[[1,"col-12"],[1,"row"],[1,"col-lg-12","pl-0"],["stillLoading",""],["class","grid-container",4,"ngIf"],[4,"ngIf"],[3,"options"],["newCosts",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body","modal-body-items"],[4,"ngIf","ngIfElse"],["stillLoadingCost",""],[1,"modal-footer"],[1,"col-lg-4","offset-lg-8","pl-0"],["type","button","name","closeModalFiscalConditionNewCostsBtn",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled","click"],[1,"grid-container"],[1,"grid-item"],[1,"btn","btn-primary","btn-block"],["class","data-not-found",4,"ngIf"],["class","grid-item",4,"ngFor","ngForOf"],["name","addAddressClientEmissionBtn",1,"btn","btn-primary","btn-block",3,"ngClass","disabled","click"],[1,"data-not-found"],["name","selectAddressClientEmissionBtn",1,"btn","btn-primary","btn-block",3,"ngClass","disabled","click","keydown.enter"],[1,"col-12",3,"formGroup"],[1,"col-lg-4","pl-0"],[1,"col-lg-4"],["type","text","formControlName","postalcode","label","","placeholder","Codigo Postal","name","postalcodeAddressEmission",3,"disabled","maxLength","keyup.enter"],["formControlName","state","bindLabel","description","bindValue","code","placeholder","Provincia","name","stateAddressEmission",1,"custom",3,"disabled","items","multiple","searchable","dropdownPosition","loading","keydown.enter"],["province",""],["formControlName","city","bindLabel","city","bindValue","city","placeholder","Localidad","name","cityAddressEmission",1,"custom",3,"disabled","items","multiple","searchable","dropdownPosition","keydown.enter"],["location",""],[1,"col-lg-5","pl-0"],[1,"col-lg-3"],[1,"col-lg-2"],["type","text","formControlName","street","label","","placeholder","Calle","name","streetAddressEmission",3,"disabled","maxLength","keydown.enter"],["type","text","formControlName","streetnumber","label","","placeholder","Altura","name","streetNumberAddressEmission",3,"disabled","maxLength","keydown.enter"],["type","text","formControlName","floor","label","","placeholder","Piso","name","floorAddressEmission",3,"disabled","maxLength","keydown.enter"],["type","text","formControlName","apartment","label","","placeholder","Depto","name","apartmentAddressEmission",3,"disabled","maxLength","keydown.enter"],[1,"col-lg-8","pl-0"],["formControlName","type","bindLabel","description","bindValue","code","placeholder","Tipo de vivienda","name","typeAddressEmission",1,"custom",3,"disabled","items","multiple","searchable","dropdownPosition","keydown.enter"],["typeHome",""],["type","text","formControlName","clarification","label","","placeholder","Notas","name","clarificationAddressEmission",3,"disabled","keydown.enter"],[1,"row","pt-4"],["name","continueAddressEmissionBtn",1,"btn","btn-primary","btn-heft",3,"disabled","click"],[1,"press-enter","ml-3","mr-4"],[1,"col-12","text-center"],["width","8.75rem","height","6.25rem",3,"options"]],template:function(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",1),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275template"](3,Wt,4,0,"ng-template",null,3,C["\u0275\u0275templateRefExtractor"]),C["\u0275\u0275template"](5,Kt,6,6,"div",4),C["\u0275\u0275pipe"](6,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](7,en,76,31,"div",5),C["\u0275\u0275pipe"](8,"async"),C["\u0275\u0275elementStart"](9,"sxf-modal",6,7),C["\u0275\u0275elementStart"](11,"div",8),C["\u0275\u0275elementStart"](12,"h4",9),C["\u0275\u0275text"](13," Recotizando "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](14,"div",10),C["\u0275\u0275template"](15,tn,7,4,"p",11),C["\u0275\u0275template"](16,nn,3,1,"ng-template",null,12,C["\u0275\u0275templateRefExtractor"]),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](18,"div",13),C["\u0275\u0275elementStart"](19,"div",1),C["\u0275\u0275elementStart"](20,"div",14),C["\u0275\u0275elementStart"](21,"button",15),C["\u0275\u0275listener"]("click",(function(){return t.closeModalNewCosts()})),C["\u0275\u0275text"](22," Aceptar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275reference"](17);C["\u0275\u0275advance"](5),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](6,6,t.residences$)),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("ngIf",C["\u0275\u0275pipeBind1"](8,8,t.addressType$)),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("options",C["\u0275\u0275pureFunction0"](10,on)),C["\u0275\u0275advance"](6),C["\u0275\u0275property"]("ngIf",!t.loadingCosts)("ngIfElse",e),C["\u0275\u0275advance"](6),C["\u0275\u0275property"]("disabled",t.loadingCosts)}},directives:[M.o,I.a,M.n,M.m,R.NgControlStatusGroup,R.FormGroupDirective,q.a,R.NgControlStatus,R.FormControlName,Q.a,O.a],pipes:[M.b,M.z,M.f],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;font-size:.75rem;color:#393b3d}.press-enter[_ngcontent-%COMP%]{color:#a3adb3;font-size:.75rem}.grid-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,auto);grid-template-rows:none;padding:0}.grid-container[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]{margin:.3rem}.grid-container[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{text-align:left;padding:.5rem 1rem;background-color:#fff;border:.5px solid #c4c4c4;color:#06369e;border-radius:5px}.grid-container[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]   .btn-primary.select[_ngcontent-%COMP%]{background-color:transparent;border-color:transparent;box-shadow:none}.grid-container[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]   .btn-primary.active[_ngcontent-%COMP%], .grid-container[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active{background-color:#fff!important;border:.5px solid #00aec7!important;box-shadow:0 0 10px rgba(0,174,199,.4)!important}"]}),e})();const ln=["fiscalcondition"],an=["iibb"],sn=["modalFiscal"],dn=["newCosts"];function cn(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",25),C["\u0275\u0275elementStart"](1,"label"),C["\u0275\u0275text"](2," Ingresos Brutos "),C["\u0275\u0275elementStart"](3,"sup"),C["\u0275\u0275text"](4,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function mn(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",25),C["\u0275\u0275elementStart"](1,"label"),C["\u0275\u0275text"](2," N\xb0 IIBB "),C["\u0275\u0275elementStart"](3,"sup"),C["\u0275\u0275text"](4,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function un(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",25),C["\u0275\u0275elementStart"](1,"sxf-select",26,27),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275pipe"](3,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("items",C["\u0275\u0275pipeBind1"](3,4,e.iibb$))("multiple",!1)("searchable",!0)("disabled",e.disabledByRetrieve)}}function pn(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",25),C["\u0275\u0275elementStart"](1,"sxf-textbox",28,29),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("helpFeedback","")("disabled",e.disabledByRetrieve)}}function hn(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",2),C["\u0275\u0275elementStart"](2,"label"),C["\u0275\u0275text"](3," Inicio de certificado "),C["\u0275\u0275elementStart"](4,"sup"),C["\u0275\u0275text"](5,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](6,"div",25),C["\u0275\u0275elementStart"](7,"label"),C["\u0275\u0275text"](8," Vencimiento de certificado "),C["\u0275\u0275elementStart"](9,"sup"),C["\u0275\u0275text"](10,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]())}function vn(e,t){if(1&e){const e=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",2),C["\u0275\u0275elementStart"](2,"sxf-datetimepicker",30),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](3,"div",25),C["\u0275\u0275elementStart"](4,"sxf-datetimepicker",31),C["\u0275\u0275listener"]("keydown.enter",(function(){return C["\u0275\u0275restoreView"](e),C["\u0275\u0275nextContext"]().onEnter()})),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("minDate",e.date)("maxDate",e.maxDate)}}function bn(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",32),C["\u0275\u0275element"](2,"ng-lottie",33),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("options",e.lottieConfig)}}function fn(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"p"),C["\u0275\u0275text"](1),C["\u0275\u0275pipe"](2,"number"),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275nextContext"]();C["\u0275\u0275advance"](1),C["\u0275\u0275textInterpolate1"](" Recotizamos tu cobertura con la condici\xf3n fiscal registrada. el nuevo valor de la cuota es de ",C["\u0275\u0275pipeBind2"](2,1,e.newQuote,"1.0-0")," Para mas detalle revisar el detalle del men\xfa lateral. ")}}let gn=(()=>{class e{constructor(e,t,n,i,o,r,l,a,s){this.fb=e,this.fiscalService=t,this.iibbService=n,this.storePolicy=i,this.flowRouteEmissionService=o,this.storeEmission=r,this.quotingService=l,this.storeQuote=a,this.policyAdapter=s,this.lottieConfig={path:"/assets/loadings/sura-loader.json"},this.fiscalConditionSelect={},this.iibbSelect={},this.modalFiscal={},this.modalNewCosts={},this.currentMotor={},this.formClienTax={},this.fiscalConditions$=new ae.a,this.iibb$=new ae.a,this.routes=[],this.client={},this.currentPolicy={},this.packageSelected={},this.arrayFiscalCondition=[],this.clientData={},this.firstTimeFiscalCondition=!1,this.maxDate={},this.minDate={},this.showCertified=!1,this.showIIBB=!1,this.showiibbNumber=!1,this.loadingCosts=!1,this.vehicles={},this.firstTimeFiscalConditionChangeValue=!1,this.newQuote="",this.CONSUMIDOR_FINAL="consumidorFinal",this.NORESPONSABLE="noResponsable",this.arrCondFiscalOriginal=[],this.disabledByRetrieve$=new u.a,this.disabledByRetrieve=!1}ngOnInit(){var e,t,n;this.newQuote="0";const i=new Date(Date.now()),o=i.getMonth()+1,r=i.getDate(),l=i.getFullYear();this.date={day:r,month:o,year:l},this.firstTimeFiscalCondition=!1,this.firstTimeFiscalConditionChangeValue=!1,this.loadingCosts=!1,this.showIIBB=!1,this.showCertified=!1,this.showiibbNumber=!0,this.minDate=this.date,this.maxDate={day:this.date.day,month:o,year:l+10},Object(p.a)([this.storePolicy.select(m.p),this.storeQuote.select(A.v)]).subscribe(e=>{this.vehicles=e[0].motor.vehicles,this.currentMotor=e[0].motor.vehicles.filter(t=>t.number===e[1].activeMotor)[0],this.currentPolicy=e[0]}).unsubscribe(),this.formClienTax=this.fb.group({fiscalcondition:[this.currentPolicy.fiscalcondition,R.Validators.required],iibb:[this.currentPolicy.iibb.type],iibbNumber:[this.currentPolicy.iibb.number],beginningValidity:[this.date],endingValidity:[]}),this.iibb$=this.iibbService.getAllCrudIncome(),this.storeEmission.select(d.m).subscribe(e=>{this.routes=e}),this.storePolicy.select(m.p).subscribe(e=>{const t="Company"===e.client.type;this.fiscalConditions$=this.fiscalService.getAllFiscalCondition().pipe(Object(g.a)(n=>{var i;this.arrayFiscalCondition=n;let o=this.CONSUMIDOR_FINAL;t&&(o=this.NORESPONSABLE);let r=[o];e.client.fiscalcondition!==o&&r.push(e.client.fiscalcondition);let l=[];if(this.arrCondFiscalOriginal.length&&(r=this.arrCondFiscalOriginal),null===e.client.contactid){let e=this.CONSUMIDOR_FINAL;t||(e=this.NORESPONSABLE),l=n.filter(t=>t.code!==e)}else l=n.filter(e=>r.includes(e.code));e.client.fiscalcondition===e.fiscalcondition||this.firstTimeFiscalCondition||null===e.client.contactid||this.modalFiscal.openModal();let a={emitEvent:!1,onlySelf:!0};this.firstTimeFiscalCondition||(this.firstTimeFiscalCondition=!0,a={emitEvent:!0,onlySelf:!0},this.activateCertifiedDates(e.client.fiscalcondition),this.activateIIBB(e.client.fiscalcondition),e.client.iibb&&e.client.iibb.type&&null!==e.client.iibb.type&&this.activateIIBBnumber(e.client.iibb.type),this.arrCondFiscalOriginal=r);let s=e.client.fiscalcondition,d=null===(i=e.client.iibb)||void 0===i?void 0:i.type;return 0===l.filter(t=>t.code===e.client.fiscalcondition).length&&null===e.client.contactid&&(t?(s=this.NORESPONSABLE,d=d||"noInscripto"):s=this.CONSUMIDOR_FINAL,this.modalFiscal.openModal()),this.formClienTax.patchValue({fiscalcondition:s,iibb:d,iibbNumber:e.client.iibb?e.client.iibb.number:""},a),Object(h.a)(l)}))}).unsubscribe(),null===(e=this.formClienTax.get("beginningValidity"))||void 0===e||e.valueChanges.subscribe(e=>{this.date=e,this.maxDate={day:this.date.day,month:this.date.month,year:this.date.year+5}}),null===(t=this.formClienTax.get("iibb"))||void 0===t||t.valueChanges.subscribe(e=>{this.activateIIBBnumber(e),this.updateCrudIncomeType(e)}),null===(n=this.formClienTax.get("fiscalcondition"))||void 0===n||n.valueChanges.subscribe(e=>{let t=this.fiscalConditionSelect.getValue();void 0===t&&(t=this.arrayFiscalCondition.filter(t=>t.code===e)[0]),this.activateCertifiedDates(e),this.activateIIBB(e),this.updateConditionFiscal(t),this.firstTimeFiscalConditionChangeValue?this.callCost():this.firstTimeFiscalConditionChangeValue=!0}),Object(p.a)([this.storeEmission.select(d.d),this.storePolicy.select(m.g)]).subscribe(e=>{this.disabledByRetrieve=!!(e[0].jobNumberFromQuotes&&e[0].approvedEmission&&e[1])})}ngOnDestroy(){this.disabledByRetrieve$&&this.disabledByRetrieve$.unsubscribe()}activateCertifiedDates(e){var t,n,i,o,r,l,a,s,d,c;if("inscriptoExentoPercepcion"===e){if(this.showCertified=!0,null===(t=this.formClienTax.get("beginningValidity"))||void 0===t||t.setValidators(R.Validators.required),null===(n=this.formClienTax.get("endingValidity"))||void 0===n||n.setValidators(R.Validators.required),this.currentPolicy.client.certificate&&null!==this.currentPolicy.client.certificate.start){const e=this.currentPolicy.client.certificate.start.toString(),t={year:parseInt(e.substring(0,4),0),month:parseInt(e.substring(5,7),0),day:parseInt(e.substring(8,10),0)},n=null===(l=null===(r=null===(o=null===(i=this.currentPolicy)||void 0===i?void 0:i.client)||void 0===o?void 0:o.certificate)||void 0===r?void 0:r.end)||void 0===l?void 0:l.toString(),a={year:parseInt(null==n?void 0:n.substring(0,4),0),month:parseInt(null==n?void 0:n.substring(5,7),0),day:parseInt(null==n?void 0:n.substring(8,10),0)};this.formClienTax.patchValue({beginningValidity:t,endingValidity:a},{emitEvent:!1,onlySelf:!0})}}else this.showCertified=!1,null===(a=this.formClienTax.get("beginningValidity"))||void 0===a||a.clearValidators(),null===(s=this.formClienTax.get("beginningValidity"))||void 0===s||s.updateValueAndValidity(),null===(d=this.formClienTax.get("endingValidity"))||void 0===d||d.clearValidators(),null===(c=this.formClienTax.get("endingValidity"))||void 0===c||c.updateValueAndValidity()}activateIIBB(e){var t,n,i;e!==this.CONSUMIDOR_FINAL?(this.showIIBB=!0,null===(t=this.formClienTax.get("iibb"))||void 0===t||t.setValidators(R.Validators.required),this.activateIIBBnumber(this.currentPolicy.client.iibb&&this.currentPolicy.client.iibb.type?this.currentPolicy.client.iibb.type:"")):(this.showIIBB=!1,null===(n=this.formClienTax.get("iibb"))||void 0===n||n.clearValidators(),null===(i=this.formClienTax.get("iibb"))||void 0===i||i.updateValueAndValidity(),this.activateIIBBnumber(""))}activateIIBBnumber(e){var t,n,i;"inscriptoConvenioMultilateral"===e||"inscriptoConvenioLocal"===e?(this.showiibbNumber=!0,null===(t=this.formClienTax.get("iibbNumber"))||void 0===t||t.setValidators(R.Validators.required)):(this.showiibbNumber=!1,null===(n=this.formClienTax.get("iibbNumber"))||void 0===n||n.clearValidators(),null===(i=this.formClienTax.get("iibbNumber"))||void 0===i||i.updateValueAndValidity())}updateConditionFiscal(e){this.storePolicy.dispatch(new c.p(e.code))}updateCrudIncomeType(e){this.storePolicy.dispatch(new c.n(e))}continue(){var e,t,n,i;const o=null===(e=this.formClienTax.get("iibb"))||void 0===e?void 0:e.value,r=null===(t=this.formClienTax.get("iibbNumber"))||void 0===t?void 0:t.value;if("inscriptoExentoPercepcion"===this.currentPolicy.fiscalcondition){const e=null===(n=this.formClienTax.get("beginningValidity"))||void 0===n?void 0:n.value,t=null===(i=this.formClienTax.get("endingValidity"))||void 0===i?void 0:i.value;let o=e.year+"-"+e.month+"-"+e.day;o=new Date(o).toISOString();let r=t.year+"-"+t.month+"-"+t.day;r=new Date(r).toISOString(),this.storePolicy.dispatch(new c.h({start:o,end:r}))}this.storePolicy.dispatch(new c.n(o)),this.storePolicy.dispatch(new c.m(r)),this.storePolicy.dispatch(new c.l({code:o,description:"",type:o,number:r})),null===this.currentPolicy.client.contactid&&this.storePolicy.dispatch(new c.q(this.currentPolicy.fiscalcondition)),this.flowRouteEmissionService.enableRoute(this.routes,"validity"),this.storeEmission.dispatch(new s.c("validity"));let l="";this.showIIBB&&(l=this.iibbSelect.getValue().description),this.routes.forEach(e=>{"tax-condition"===e.path&&(e.value=this.arrayFiscalCondition.filter(e=>{var t;return e.code===(null===(t=this.formClienTax.get("fiscalcondition"))||void 0===t?void 0:t.value)})[0].description+" "+l)}),this.formClienTax.valid&&this.storeEmission.dispatch(new s.l(!0)),this.flowRouteEmissionService.enableRoute(this.routes,"validity")}closeModal(){this.modalFiscal.closeModal(),this.callCost()}closeModalNewCosts(){this.modalNewCosts.closeModal()}onEnter(){this.formClienTax.valid&&this.continue()}callCost(){this.loadingCosts=!0,this.modalNewCosts.openModal(),this.storePolicy.select(m.p).pipe(Object(y.a)(),Object(g.a)(e=>{var t;const n=this.policyAdapter.adapt(e);return null===(t=n.motor.vehicles)||void 0===t||t.forEach(e=>{var t;e.packages=null===(t=null==e?void 0:e.packages)||void 0===t?void 0:t.filter(e=>e.selected)}),this.quotingService.getCosts(n)})).subscribe(e=>{var t,n,i;const o=null===(n=null===(t=this.currentMotor)||void 0===t?void 0:t.packages)||void 0===n?void 0:n.find(e=>e.selected);this.storePolicy.dispatch(new c.F(null===(i=e.costs)||void 0===i?void 0:i.filter(e=>e.externalId.split("&").includes(`${this.currentPolicy.productcode},${this.currentMotor.number},${null==o?void 0:o.code}`)))),this.vehicles.forEach(t=>{var n,i,o,r,l;const a=null===(n=null==t?void 0:t.packages)||void 0===n?void 0:n.find(e=>e.selected),s=null===(i=e.motor.errors)||void 0===i?void 0:i.find(e=>e.externalId.split("&").includes(`${this.currentPolicy.productcode},${t.number},${null==a?void 0:a.code}`)),d=null===(r=null===(o=e.motor.vehicles)||void 0===o?void 0:o.find(e=>e.number===t.number))||void 0===r?void 0:r.packages.find(e=>e.code===(null==a?void 0:a.code));(null==s?void 0:s.code)?(a&&(a.premiums={}),this.newQuote=""):(a&&(a.premiums=null==d?void 0:d.premiums),this.newQuote=null===(l=e.costs)||void 0===l?void 0:l.find(e=>e.externalId.split("&").includes(`${this.currentPolicy.productcode},${t.number},${null==a?void 0:a.code}`)).invoice.toString(),this.newQuote=this.newQuote?parseFloat(this.newQuote).toFixed(2):"")}),this.storePolicy.dispatch(new c.H(this.vehicles)),this.storeQuote.dispatch(new a.m(e)),this.loadingCosts=!1})}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275directiveInject"](R.FormBuilder),C["\u0275\u0275directiveInject"](P.FiscalConditionService),C["\u0275\u0275directiveInject"](P.CrudIncomeService),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](F),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](P.QuotingService),C["\u0275\u0275directiveInject"](o.h),C["\u0275\u0275directiveInject"](w.a))},e.\u0275cmp=C["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-client-tax-condition"]],viewQuery:function(e,t){var n;1&e&&(C["\u0275\u0275viewQuery"](ln,!0),C["\u0275\u0275viewQuery"](an,!0),C["\u0275\u0275viewQuery"](sn,!0),C["\u0275\u0275viewQuery"](dn,!0)),2&e&&(C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.fiscalConditionSelect=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.iibbSelect=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalFiscal=n.first),C["\u0275\u0275queryRefresh"](n=C["\u0275\u0275loadQuery"]())&&(t.modalNewCosts=n.first))},decls:59,vars:17,consts:[[1,"row"],[1,"col-lg-12",3,"formGroup"],[1,"col-lg-4","pl-0"],["class","col-lg-4",4,"ngIf"],["formControlName","fiscalcondition","bindLabel","description","bindValue","code","placeholder","Cond. Fiscal","dropdownPosition","bottom","name","fiscalconditionSelectEmission",1,"custom",3,"items","multiple","searchable","disabled","keydown.enter"],["fiscalcondition",""],["class","row",4,"ngIf"],[1,"row","pt-4"],[1,"col-lg-8","pl-0"],["name","continueFiscalConditionBtn",1,"btn","btn-primary","btn-heft",3,"disabled","click"],[1,"press-enter","ml-3","mr-4"],["modalFiscal",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close","name","closeModalFiscalConditionBtn",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-body-items"],[1,"modal-footer"],[1,"col-lg-4","offset-lg-8","pl-0"],["type","button","name","closeModalFiscalConditionBtn",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],["newCosts",""],["type","button","aria-label","Close","name","closeModalFiscalConditionNewCostsBtn",1,"close",3,"click"],["stillLoading",""],[4,"ngIf","ngIfElse"],["type","button","name","closeModalFiscalConditionNewCostsBtn",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled","click"],[1,"col-lg-4"],["formControlName","iibb","bindLabel","description","bindValue","code","placeholder","Ing. Brutos","dropdownPosition","bottom","name","iibbEmission",1,"custom",3,"items","multiple","searchable","disabled","keydown.enter"],["iibb",""],["type","text","formControlName","iibbNumber","label","","placeholder","","placement","bottom","name","numIibbEmission",3,"helpFeedback","disabled","keydown.enter"],["numiibb",""],["formControlName","beginningValidity","name","beginningValidityFiscalConditionEmission",3,"keydown.enter"],["formControlName","endingValidity","name","endingValidityFiscalConditionEmission",3,"minDate","maxDate","keydown.enter"],[1,"col-12","text-center"],["width","8.75rem","height","6.25rem",3,"options"]],template:function(e,t){if(1&e&&(C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",1),C["\u0275\u0275elementStart"](2,"div",0),C["\u0275\u0275elementStart"](3,"div",2),C["\u0275\u0275elementStart"](4,"label"),C["\u0275\u0275text"](5," Condici\xf3n fiscal "),C["\u0275\u0275elementStart"](6,"sup"),C["\u0275\u0275text"](7,"*"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](8,cn,5,0,"div",3),C["\u0275\u0275template"](9,mn,5,0,"div",3),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](10,"div",0),C["\u0275\u0275elementStart"](11,"div",2),C["\u0275\u0275elementStart"](12,"sxf-select",4,5),C["\u0275\u0275listener"]("keydown.enter",(function(){return t.onEnter()})),C["\u0275\u0275pipe"](14,"async"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](15,un,4,6,"div",3),C["\u0275\u0275template"](16,pn,3,2,"div",3),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](17,hn,11,0,"div",6),C["\u0275\u0275template"](18,vn,5,2,"div",6),C["\u0275\u0275elementStart"](19,"div",7),C["\u0275\u0275elementStart"](20,"div",8),C["\u0275\u0275elementStart"](21,"span"),C["\u0275\u0275elementStart"](22,"button",9),C["\u0275\u0275listener"]("click",(function(){return t.continue()})),C["\u0275\u0275text"](23," Continuar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](24,"span",10),C["\u0275\u0275text"](25," o presiona ENTER "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](26,"sxf-modal",null,11),C["\u0275\u0275elementStart"](28,"div",12),C["\u0275\u0275elementStart"](29,"h4",13),C["\u0275\u0275text"](30," La condici\xf3n fiscal no coincide "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](31,"button",14),C["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),C["\u0275\u0275elementStart"](32,"span",15),C["\u0275\u0275text"](33,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](34,"div",16),C["\u0275\u0275elementStart"](35,"p"),C["\u0275\u0275text"](36," La condici\xf3n fiscal usada para cotizar no coincide con la registrada para el cliente. Vamos a recotizar la cobertura elegida con la condici\xf3n fiscal existente. De haber un cambio en la misma, por favor comunicate con tu Ejecutivo Comercial. "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](37,"div",17),C["\u0275\u0275elementStart"](38,"div",0),C["\u0275\u0275elementStart"](39,"div",18),C["\u0275\u0275elementStart"](40,"button",19),C["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),C["\u0275\u0275text"](41," Aceptar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](42,"sxf-modal",null,20),C["\u0275\u0275elementStart"](44,"div",12),C["\u0275\u0275elementStart"](45,"h4",13),C["\u0275\u0275text"](46," Nueva cotizaci\xf3n "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](47,"button",21),C["\u0275\u0275listener"]("click",(function(){return t.closeModalNewCosts()})),C["\u0275\u0275elementStart"](48,"span",15),C["\u0275\u0275text"](49,"\xd7"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](50,"div",16),C["\u0275\u0275template"](51,bn,3,1,"ng-template",null,22,C["\u0275\u0275templateRefExtractor"]),C["\u0275\u0275template"](53,fn,3,4,"p",23),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](54,"div",17),C["\u0275\u0275elementStart"](55,"div",0),C["\u0275\u0275elementStart"](56,"div",18),C["\u0275\u0275elementStart"](57,"button",24),C["\u0275\u0275listener"]("click",(function(){return t.closeModalNewCosts()})),C["\u0275\u0275text"](58," Aceptar "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e){const e=C["\u0275\u0275reference"](52);C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("formGroup",t.formClienTax),C["\u0275\u0275advance"](7),C["\u0275\u0275property"]("ngIf",t.showIIBB),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",t.showiibbNumber),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("items",C["\u0275\u0275pipeBind1"](14,15,t.fiscalConditions$))("multiple",!1)("searchable",!0)("disabled",t.disabledByRetrieve),C["\u0275\u0275advance"](3),C["\u0275\u0275property"]("ngIf",t.showIIBB),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",t.showiibbNumber),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",t.showCertified),C["\u0275\u0275advance"](1),C["\u0275\u0275property"]("ngIf",t.showCertified),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("disabled",!t.formClienTax.valid),C["\u0275\u0275advance"](31),C["\u0275\u0275property"]("ngIf",!t.loadingCosts)("ngIfElse",e),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("disabled",t.loadingCosts)}},directives:[R.NgControlStatusGroup,R.FormGroupDirective,M.o,Q.a,R.NgControlStatus,R.FormControlName,I.a,q.a,U.a,O.a],pipes:[M.b,M.f],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;font-size:.75rem;color:#393b3d}.press-enter[_ngcontent-%COMP%]{color:#a3adb3;font-size:.75rem}"]}),e})();n("zD4e");var yn=n("D57K"),Sn=n("dgOi");let En=(()=>{class e{constructor(e,t,n,i,o){this.quotesService=e,this.accountService=t,this.storeEmission=n,this.storePolicy=i,this.utilService=o,this.serverDate=null,this.approved=null}resolve(){return Object(p.a)([this.storePolicy.select(m.l),this.storeEmission.select(d.d),this.utilService.getCurrentServerDate()]).pipe(Object(g.a)(e=>{const t=e[0].number,n=e[1].jobNumberFromQuotes;return this.serverDate=e[2].datetime,this.approved=e[1].approvedEmission,null!==t?Object(h.a)(!0):n&&""!==n?this.quotesService.getQuote(n).pipe(Object(g.a)(e=>Object(yn.a)(this,void 0,void 0,(function*(){var t,n;this.fillPolicyAttributes(e);const i=null===(n=null===(t=e.client)||void 0===t?void 0:t.officialids)||void 0===n?void 0:n.find(e=>e.primary);return yield this.getAccountInfo(i,e),this.storeEmission.dispatch(new s.n(e.address)),Object(h.a)(!0)})))):Object(h.a)(!0)}),Object(y.a)())}fillPolicyAttributes(e){var t,n,i,o,r,l,a,s,d,m;const u={code:null===(n=null===(t=null==(e=Object.assign(Object.assign({},e),{job:Object.assign(Object.assign({},null==e?void 0:e.job),{type:"Submission"})}))?void 0:e.payment)||void 0===t?void 0:t.plan)||void 0===n?void 0:n.code,description:null,maximumnumberofinstallments:null};e.payment=Object.assign(Object.assign({},{method:null,plan:{code:null},cbu:{alias:null,conduit:null,number:null},creditcard:{expirationdate:null,number:null,type:null},id:null}),e.payment),e.paymentTerm=Object.assign(Object.assign({},u),e.paymentTerm),this.populatePeriod(e);const p=null===(o=null===(i=null==e?void 0:e.client)||void 0===i?void 0:i.officialids)||void 0===o?void 0:o.find(e=>e.primary);null===(s=null===(a=null==(e=Object.assign(Object.assign({},e),{client:Object.assign(Object.assign({},e.client),{documentNumber:null==p?void 0:p.value,documentType:null==p?void 0:p.type}),motor:Object.assign(Object.assign({},e.motor),{fleet:"NonFleet",vehicles:null===(l=null===(r=null==e?void 0:e.motor)||void 0===r?void 0:r.vehicles)||void 0===l?void 0:l.sort((e,t)=>e.number&&t.number?(null==e?void 0:e.number)-(null==t?void 0:t.number):e.number)})}))?void 0:e.motor)||void 0===a?void 0:a.discounts)||void 0===s||s.forEach(e=>{e.value=Math.abs(e.value)}),null===(m=null===(d=null==e?void 0:e.motor)||void 0===d?void 0:d.vehicles)||void 0===m||m.forEach(t=>{var n,i,o,r,l,a,s,d;t.id=t.number,t.group=this.findVehicleGroup(null===(n=null==t?void 0:t.model)||void 0===n?void 0:n.type),t.license=t.license||null,t.statedamount=null===(i=t.model)||void 0===i?void 0:i.statementamount,!t.zerokm&&t.model&&(t.model.statementamount=t.model.originalcostnew,t.model.originalcostnew=0);let c=!1;const m=t.driver,u=e.client;if(m&&(null===(o=null==u?void 0:u.firstname)||void 0===o?void 0:o.toLowerCase())===(null===(r=null==m?void 0:m.firstname)||void 0===r?void 0:r.toLowerCase())&&(null===(l=null==u?void 0:u.lastname)||void 0===l?void 0:l.toLowerCase())===(null===(a=null==m?void 0:m.lastname)||void 0===a?void 0:a.toLowerCase())&&(c=!0),t.driver=Object.assign({firstname:null,lastname:null,birth:null,gender:null,clientIsDriver:c},t.driver),t.bondholder?t.bondholder.type=Number(t.bondholder.type):t.bondholder={finish:null,firstinstallmentdue:null,number:null,quotas:null,start:null,type:null},t.package){let e="";null===(d=null===(s=null==Sn.a?void 0:Sn.a.find(e=>e.vehicleType===t.group))||void 0===s?void 0:s.package)||void 0===d||d.forEach(n=>{var i;null===(i=null==n?void 0:n.packages)||void 0===i||i.forEach(i=>{var o;if((null==i?void 0:i.code)===(null===(o=null==t?void 0:t.package)||void 0===o?void 0:o.code))return t.package.group=n.code,void(e=i.description)})}),t.package.description=e,t.package.selected=!0,t.package.externalid=`${t.number}_${t.package.code}`,t.packages=[],t.packages.push(t.package)}}),this.storePolicy.dispatch(new c.B(e))}getAccountInfo(e,t){const n={officialid:e};return new Promise((i,o)=>{this.accountService.getAccounts(n).subscribe(n=>{var o,r,l,a,d,m;if(!n){const e=t.client;return this.storeEmission.dispatch(new s.e(null==e?void 0:e.type,null===(o=null==e?void 0:e.companyname)||void 0===o?void 0:o.toUpperCase(),null===(r=null==e?void 0:e.firstname)||void 0===r?void 0:r.toUpperCase(),null===(l=null==e?void 0:e.lastname)||void 0===l?void 0:l.toUpperCase(),null==e?void 0:e.contactid,null==e?void 0:e.documentNumber,null==e?void 0:e.documentType,null==e?void 0:e.address)),i()}if(n.documentNumber=e.value,n.documentType=e.type,null===(d=null===(a=null==t?void 0:t.client)||void 0===a?void 0:a.address)||void 0===d?void 0:d.id){const e=null===(m=null==n?void 0:n.addresses)||void 0===m?void 0:m.find(e=>{var n,i;return e.id===(null===(i=null===(n=null==t?void 0:t.client)||void 0===n?void 0:n.address)||void 0===i?void 0:i.id)});n.address=e||{apartment:null,city:null,clarification:null,floor:null,id:null,postalcode:null,state:null,street:null,streetnumber:null,type:null}}this.storePolicy.dispatch(new c.i(n)),this.storeEmission.dispatch(new s.f(n)),i(n)},o)})}findVehicleGroup(e){var t;return null===(t=Sn.a.find(t=>t.types.includes(e)))||void 0===t?void 0:t.vehicleType}populatePeriod(e){const t=rt(this.serverDate);let n,i;if(this.approved)return;if(!e.period)return void(e.period={start:t.toDate(),end:null,method:null,rate:null});switch(e.period.method){case"Sura_ThreeMonths":n="Sura_ThreeMonths",i=3;break;default:n="Sura_ThreeMonths",i=3}const o=t.toDate(),r=t.clone().add(i,"months").toDate();e.period={start:o,end:r,method:n,rate:void 0}}}return e.\u0275fac=function(t){return new(t||e)(C["\u0275\u0275inject"](P.QuotesService),C["\u0275\u0275inject"](P.AccountService),C["\u0275\u0275inject"](o.h),C["\u0275\u0275inject"](o.h),C["\u0275\u0275inject"](P.UtilService))},e.\u0275prov=C["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var xn=n("SKbR");const Cn=[{path:"",component:j,resolve:{data:En},children:[{path:"questions",component:ot,children:[{path:"client",component:Ft,data:{question:"Algunos datos m\xe1s de tu cliente",show:!0,disabled:!1,value:"",shortName:"Cliente",config:xn}},{path:"residence",component:rn,data:{question:"\xbfCual es tu domicilio?",show:!0,disabled:!0,value:"",shortName:"\xbfEste es el domicilio fiscal?"}},{path:"tax-condition",component:gn,data:{question:"\xbfCu\xe1l es la condici\xf3n fiscal?",show:!0,disabled:!0,value:"",shortName:"Condicion fiscal"}},{path:"validity",component:at,data:{question:"\xbfCu\xe1l es el inicio de vigencia?",show:!0,disabled:!0,value:"",shortName:"Inicio de vigencia"}},{path:"aditionalauto/:id",component:ie,data:{question:"\xbfCu\xe1l es le n\xfamero de chasis y de motor?",show:!0,disabled:!0,value:"",shortName:"Chasis y motor"}},{path:"payment-method",component:Et,data:{question:"\xbfC\xf3mo lo quiere pagar?",show:!0,disabled:!0,value:"",shortName:"payment"}}]}]}];let Pn=(()=>{class e{}return e.\u0275mod=C["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=C["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[i.j.forChild(Cn),o.j.forFeature("emission",r.a)],i.j]}),e})();var wn=n("NdbC");function In(){return n.e(0).then(n.t.bind(null,"Nh1y",7))}let Mn=(()=>{class e{}return e.\u0275mod=C["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=C["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[P.GenderService,P.IdentificationService,P.DocumentationService,F,P.AccountService,P.NationalityService,l.PeriodMethodPipe,l.CardNumberPipe,P.AddressTypeService,P.MaritalStatusService,P.ClienteNService,P.PatentBlackListService,En,P.QuotesService,P.PatentUseService,P.BondholderService],imports:[[wn.a,Pn,O.b.forRoot({player:In})]]}),e})()},ihxi:function(e,t,n){"use strict";var i=n("sBpz"),o=n("lTUY"),r=n("GB03"),l=n("Lbxd"),a=n("VTS6"),s=n("xKJD"),d=n("a96P"),c=n("7bXj"),m=n("k/06");t.subscribeTo=function(e){if(e&&"function"==typeof e[m.observable])return l.subscribeToObservable(e);if(a.isArrayLike(e))return i.subscribeToArray(e);if(s.isPromise(e))return o.subscribeToPromise(e);if(e&&"function"==typeof e[c.iterator])return r.subscribeToIterable(e);var t=d.isObject(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},"k/06":function(e,t,n){"use strict";t.observable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},kZSD:function(e,t,n){"use strict";var i=n("d4zx"),o=n("ihxi"),r=n("qiMw");t.subscribeToResult=function(e,t,n,l,a){if(void 0===a&&(a=new i.InnerSubscriber(e,n,l)),!a.closed)return t instanceof r.Observable?t.subscribe(a):o.subscribeTo(t)(a)}},lTUY:function(e,t,n){"use strict";var i=n("tpAt");t.subscribeToPromise=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,i.hostReportError),t}}},qiMw:function(e,t,n){"use strict";var i=n("JJ8B"),o=n("Yfti"),r=n("k/06"),l=n("E/Xc"),a=n("QuXn");function s(e){if(e||(e=a.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this.operator,r=o.toSubscriber(e,t,n);if(r.add(i?i.call(r,this.source):this.source||a.config.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),a.config.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),i.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=s(t))((function(t,i){var o;o=n.subscribe((function(t){try{e(t)}catch(n){i(n),o&&o.unsubscribe()}}),i,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[r.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:l.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=s(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}()},sBpz:function(e,t,n){"use strict";t.subscribeToArray=function(e){return function(t){for(var n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()}}},tpAt:function(e,t,n){"use strict";t.hostReportError=function(e){setTimeout((function(){throw e}),0)}},uHtI:function(e,t,n){"use strict";var i=n("qiMw"),o=n("6Br6");t.scheduleArray=function(e,t){return new i.Observable((function(n){var i=new o.Subscription,r=0;return i.add(t.schedule((function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i}))}},uzuk:function(e,t,n){"use strict";var i=n("QuXn"),o=n("tpAt");t.empty={closed:!0,next:function(e){},error:function(e){if(i.config.useDeprecatedSynchronousErrorHandling)throw e;o.hostReportError(e)},complete:function(){}}},v2vP:function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},xKJD:function(e,t,n){"use strict";t.isPromise=function(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},zD4e:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=n("ci3w"),r=n("D9en"),l=n("dmvN"),a=n("kZSD"),s=n("DtmU"),d={};t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,i=null;return o.isScheduler(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&r.isArray(e[0])&&(e=e[0]),s.fromArray(e,i).lift(new c(n))};var c=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new m(e,this.resultSelector))},e}();t.CombineLatestOperator=c;var m=function(e){function t(t,n){var i=e.call(this,t)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return i(t,e),t.prototype._next=function(e){this.values.push(d),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var i=e[n];this.add(a.subscribeToResult(this,i,i,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,i,o){var r=this.values,l=this.toRespond?r[n]===d?--this.toRespond:this.toRespond:0;r[n]=t,0===l&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(l.OuterSubscriber);t.CombineLatestSubscriber=m}}]);