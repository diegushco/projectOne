(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{lRTb:function(e,t,i){"use strict";i.r(t),i.d(t,"MobilityModule",(function(){return L}));var o=i("2kYt"),n=i("sEIs"),l=i("nIj0"),r=i("ZTXN"),s=i("bwdy"),a=i("HM3f"),d=i("3mST"),c=i("8j5Y"),m=i("TLy2"),u=i("YtkY"),p=i("c2re"),v=i.n(p),h=i("HHj5"),g=i("+E71"),b=i("jCLe"),f=i("EM62"),S=i("sN6X"),C=i("qgZ/"),y=i("YroZ"),E=i("BJIp"),O=i("GobW"),w=i("+m/I"),M=i("NcZ/"),I=i("Fv+M"),x=i("SVrd");const _=["t"];function A(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"p"),f["\u0275\u0275text"](1," Este producto no est\xe1 habilitado para la cobertura seleccionada. Si quieres sumar Movilidad tendr\xe1s que cambiar de cobertura. "),f["\u0275\u0275elementEnd"]())}function P(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"div",25),f["\u0275\u0275elementStart"](2,"div",26),f["\u0275\u0275elementStart"](3,"label",27),f["\u0275\u0275text"](4,"Suma asegurada"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](5,"sxf-select",28),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"div",29),f["\u0275\u0275elementStart"](7,"div",30),f["\u0275\u0275element"](8,"img",31),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"div",32),f["\u0275\u0275elementStart"](10,"span"),f["\u0275\u0275text"](11," Robo y da\xf1o por uso de Bicicleta/Monopatin/Skates/Rollers "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"div",25),f["\u0275\u0275elementStart"](13,"div",30),f["\u0275\u0275element"](14,"img",33),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"div",32),f["\u0275\u0275elementStart"](16,"span"),f["\u0275\u0275text"](17,"Accidentes personales"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](18,"div",25),f["\u0275\u0275elementStart"](19,"div",30),f["\u0275\u0275element"](20,"img",34),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](21,"div",32),f["\u0275\u0275elementStart"](22,"span"),f["\u0275\u0275text"](23,"Robo al desplazarse"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](24,"div",25),f["\u0275\u0275elementStart"](25,"div",30),f["\u0275\u0275element"](26,"img",35),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](27,"div",32),f["\u0275\u0275elementStart"](28,"span"),f["\u0275\u0275text"](29,"Da\xf1os a terceros"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](30,"div",25),f["\u0275\u0275elementStart"](31,"div",30),f["\u0275\u0275element"](32,"img",36),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](33,"div",32),f["\u0275\u0275elementStart"](34,"span"),f["\u0275\u0275text"](35,"Asistencia Movilidad"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](5),f["\u0275\u0275classMap"]("custom"),f["\u0275\u0275property"]("items",e.mobility)("multiple",!1)("searchable",!0)("placeholder","Seleccione suma asegurada")("dropdownPosition","bottom")}}const T=function(){return{suppressScrollY:!1}};function k(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",1),f["\u0275\u0275elementStart"](1,"div",2),f["\u0275\u0275elementStart"](2,"div",3),f["\u0275\u0275elementStart"](3,"div",2),f["\u0275\u0275elementStart"](4,"div",4),f["\u0275\u0275elementStart"](5,"div",5),f["\u0275\u0275elementStart"](6,"div",6),f["\u0275\u0275elementStart"](7,"span",7),f["\u0275\u0275text"](8,"Nuevo"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"a",8),f["\u0275\u0275element"](10,"sxf-icon",9),f["\u0275\u0275elementStart"](11,"span",10),f["\u0275\u0275text"](12,"Info sobre Movilidad Sura"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](13,"div",5),f["\u0275\u0275elementStart"](14,"div",6),f["\u0275\u0275elementStart"](15,"label",11),f["\u0275\u0275text"](16," \xbfQuer\xe9s sumar el seguro de Movilidad a tu p\xf3liza? "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"div",2),f["\u0275\u0275elementStart"](18,"div",12),f["\u0275\u0275elementStart"](19,"div",13,14),f["\u0275\u0275element"](21,"input",15),f["\u0275\u0275elementStart"](22,"label",16),f["\u0275\u0275text"](23," \xa0\xa0S\xed, quiero sumarla "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](24,A,2,0,"ng-template",null,17,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](26,"div",18),f["\u0275\u0275elementStart"](27,"div",19),f["\u0275\u0275element"](28,"input",20),f["\u0275\u0275elementStart"](29,"label",21),f["\u0275\u0275text"](30," \xa0\xa0No, no quiero sumarla "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](31,P,36,7,"ng-container",22),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](32,"div",23),f["\u0275\u0275elementStart"](33,"sxf-summarycoverage",24),f["\u0275\u0275listener"]("allowCost",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().allowCost()})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275reference"](25),t=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("formGroup",t.form),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("perfectScrollbar",f["\u0275\u0275pureFunction0"](6,T)),f["\u0275\u0275advance"](17),f["\u0275\u0275property"]("ngbTooltip",e)("triggers",null),f["\u0275\u0275advance"](12),f["\u0275\u0275property"]("ngIf","on"===t.form.get("yes").value),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("loadingCost",t.loadingCost)}}const j=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n,l,a){this.fb=e,this.storePolicy=t,this.storeQuote=i,this.policyAdapter=o,this.additionalService=n,this.quotingService=l,this.routeExtService=a,this.disabledTooltip={},this.policy={},this.vehicles=[],this.currentVehicle={},this.form={},this.mobility=[],this.mobilityPkg={},this.mobilityCompleted=new r.a,this.callCost$=new r.a,this.loadingCost=!1,this.MOBILITY_CODE="SURA_CA7_MobilityTheftDamageCov",this.MOBILITY_DEFAULT="SURA_CA7_MobilityTheftDamageOpt3",this.callCostSubscription=new s.a,this.formChangesSubscription=new s.a,this.getQuoteSubscription=new s.a,this.fromUrl=""}ngOnInit(){this.fromUrl=this.routeExtService.getPreviousUrl().split("/")[2],this.storeQuote.dispatch(new b.x(!0)),this.createForm(),this.loadFromStore(),this.callCostSubscription=this.callCost$.pipe(Object(d.a)(1),Object(c.a)(()=>this.loadingCost=!0),Object(m.a)(()=>{const e=v()(this.policy);return e.motor.vehicles.forEach(e=>{var t;e.packages=null===(t=null==e?void 0:e.packages)||void 0===t?void 0:t.filter(e=>e.selected)}),this.quotingService.getCosts(this.policyAdapter.adapt(e))})).subscribe(e=>this.handleCost(e))}ngAfterViewInit(){this.currentVehicle?this.disabledTooltip.disableTooltip=!0:(this.disabledTooltip.autoClose=!1,this.disabledTooltip.open())}ngOnDestroy(){var e,t;null===(e=this.callCostSubscription)||void 0===e||e.unsubscribe(),null===(t=this.formChangesSubscription)||void 0===t||t.unsubscribe()}createForm(){this.form=this.fb.group({yes:["off",l.Validators.required],coverageSum:[]}),this.form.disable(),this.formChangesSubscription=Object(a.a)([this.form.valueChanges.pipe(Object(d.a)(1)),this.mobilityCompleted]).subscribe(([e])=>{var t,i,o,n;if(!this.currentVehicle)return;const l=null===(t=this.currentVehicle.packages)||void 0===t?void 0:t.find(e=>e.selected),r=v()(null===(i=null==l?void 0:l.coverages)||void 0===i?void 0:i.find(e=>e.pattern.code===this.MOBILITY_CODE));l.coverages=null===(o=null==l?void 0:l.coverages)||void 0===o?void 0:o.filter(e=>e.pattern.code!==this.MOBILITY_CODE),"on"===e.yes&&e.coverageSum&&this.mobilityPkg&&(this.mobilityPkg.terms[0].value=e.coverageSum,l.coverages=[...l.coverages,this.mobilityPkg]),this.storeQuote.dispatch(new b.w(this.form.valid));let s=null===(n=null==l?void 0:l.coverages)||void 0===n?void 0:n.find(e=>e.pattern.code===this.MOBILITY_CODE);s="object"==typeof(null==s?void 0:s.terms[0].value)?null==s?void 0:s.terms[0].value.current:null==s?void 0:s.terms[0].value,(null==r?void 0:r.terms[0].value)!==s&&this.callCost$.next()})}loadFromStore(){this.storePolicy.select(h.p).subscribe(e=>{this.policy=v()(e),this.vehicles=this.policy.motor.vehicles,this.verifyPackages(),this.loadSumOptions()}).unsubscribe()}verifyPackages(){var e,t,i,o,n,r;if(this.currentVehicle=this.vehicles.find(e=>{var t;return null===(t=e.packages)||void 0===t?void 0:t.find(e=>{var t;return e.selected&&"A"!==e.code&&(null===(t=null==e?void 0:e.coverages)||void 0===t?void 0:t.some(e=>e.pattern.code===this.MOBILITY_CODE))})})||this.vehicles.find(e=>{var t;return null===(t=e.packages)||void 0===t?void 0:t.find(e=>e.selected&&"A"!==e.code)}),this.currentVehicle){let s=null===(n=null===(o=null===(i=null===(t=null===(e=this.currentVehicle.packages)||void 0===e?void 0:e.find(e=>{var t;return e.selected&&(null===(t=e.coverages)||void 0===t?void 0:t.some(e=>e.pattern.code===this.MOBILITY_CODE))}))||void 0===t?void 0:t.coverages)||void 0===i?void 0:i.find(e=>e.pattern.code===this.MOBILITY_CODE))||void 0===o?void 0:o.terms[0])||void 0===n?void 0:n.value;s?(s=(null==s?void 0:s.current)||s,this.form.patchValue({yes:"on",coverageSum:s})):this.form.patchValue("emission"===this.fromUrl?{yes:"off",coverageSum:this.MOBILITY_DEFAULT}:{yes:null,coverageSum:this.MOBILITY_DEFAULT}),null===(r=this.form.get("coverageSum"))||void 0===r||r.setValidators(l.Validators.required),this.form.enable()}else this.storeQuote.dispatch(new b.w(!0))}loadSumOptions(){this.currentVehicle&&this.additionalService.getAdditionalAccessorios(this.policyAdapter.adaptAdditional(this.policy)).pipe(Object(u.a)(e=>{var t,i;const o=null===(i=null===(t=e.motor)||void 0===t?void 0:t.vehicles.find(e=>e.number===this.currentVehicle.number))||void 0===i?void 0:i.package.coverages.find(e=>e.pattern.code===this.MOBILITY_CODE);return o.terms[0].value=o.terms[0].value,this.mobilityPkg=o,(null==o?void 0:o.terms[0].options)||[]})).subscribe(e=>{this.mobility=e,this.mobilityCompleted.next()})}allowCost(){this.callCost$.next()}handleCost(e){this.storePolicy.dispatch(new g.F(e.costs)),this.vehicles.forEach(t=>{var i,o,n,l,r,s;const a=null===(i=null==t?void 0:t.packages)||void 0===i?void 0:i.find(e=>e.selected),d=null===(o=e.errors)||void 0===o?void 0:o.find(i=>i.externalId.split("&").includes(`${e.productcode},${t.number},${null==a?void 0:a.code}`)),c=null===(s=null===(r=null===(l=null===(n=null==e?void 0:e.motor)||void 0===n?void 0:n.vehicles)||void 0===l?void 0:l.find(e=>e.number===t.number))||void 0===r?void 0:r.packages)||void 0===s?void 0:s.find(e=>e.code===(null==a?void 0:a.code));!(null==d?void 0:d.code)&&a?a.premiums=null==c?void 0:c.premiums:a&&(a.premiums=null)}),this.loadingCost=!1,this.storePolicy.dispatch(new g.H(this.vehicles)),this.storeQuote.dispatch(new b.m(e))}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](l.FormBuilder),f["\u0275\u0275directiveInject"](S.h),f["\u0275\u0275directiveInject"](S.h),f["\u0275\u0275directiveInject"](C.a),f["\u0275\u0275directiveInject"](y.AditionalAccessoriesService),f["\u0275\u0275directiveInject"](y.QuotingService),f["\u0275\u0275directiveInject"](E.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["sxf-mobility"]],viewQuery:function(e,t){var i;1&e&&f["\u0275\u0275viewQuery"](_,!0),2&e&&f["\u0275\u0275queryRefresh"](i=f["\u0275\u0275loadQuery"]())&&(t.disabledTooltip=i.first)},decls:2,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-lg-9","pr-2","ps","pt-4",2,"position","relative","max-height","90vh",3,"perfectScrollbar"],[1,"offset-lg-3"],[1,"row","mb-2"],[1,"col-lg-12"],[1,"tag","mr-2"],["href","https://www.segurossura.com.ar/wp-content/uploads/2020/06/Movilidad-SURA.pdf","target","_blank"],["type","info",1,"icon-green"],[1,"title"],[1,"question"],[1,"col-lg-5","input-group"],["placement","bottom","tooltipClass","disabled-mobility-tooltip",1,"form-radio-label",3,"ngbTooltip","triggers"],["t","ngbTooltip"],["type","radio","name","yes","id","yes","value","on","formControlName","yes"],["for","yes",1,"radio-label"],["disabledContent",""],[1,"col-lg-6","input-group"],[1,"form-radio-label"],["type","radio","name","yes","id","no","value","off","formControlName","yes"],["for","no",1,"radio-label"],[4,"ngIf"],[1,"col-lg-3","px-0","ps"],[3,"loadingCost","allowCost"],[1,"row","pt-3"],[1,"offset-lg-3","col-lg-3","pl-0"],["for","suma"],["formControlName","coverageSum","bindLabel","description","bindValue","code","name","sumaAsegurada",3,"items","multiple","searchable","placeholder","dropdownPosition"],[1,"row","pt-4"],[1,"offset-lg-3","mr-2"],["src","/assets/mobility/ROBO_Y_DANIO_POR_USO.svg","alt","Robo y da\xf1o por uso de Bicicleta/Monopatin/Skates/Rollers","width","30px","height","30px"],[1,"col-lg-6","pl-0","line"],["src","/assets/mobility/ACCIDENTES_PERSONALES.svg","alt","Accidentes\n          personales","width","30px","height","30px"],["src","/assets/mobility/ROBO_AL_DESPLAZARSE.svg","alt","Robo al\n          desplazarse","width","30px","height","30px"],["src","/assets/mobility/DANIOS_A_TERCEROS.svg","alt","Da\xf1os a\n          terceros","width","30px","height","30px"],["src","/assets/mobility/ASISTENCIA_MOVILIDAD.svg","alt","Asistencia\n          Movilidad","width","30px","height","30px"]],template:function(e,t){1&e&&(f["\u0275\u0275template"](0,k,34,7,"div",0),f["\u0275\u0275element"](1,"router-outlet")),2&e&&f["\u0275\u0275property"]("ngIf",t.form)},directives:[o.o,n.k,l.NgControlStatusGroup,l.FormGroupDirective,O.b,w.a,M.o,l.RadioControlValueAccessor,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName,I.a,x.a],styles:["label.question[_ngcontent-%COMP%]{font-size:1.625rem;color:#06369e;font-weight:700}.title[_ngcontent-%COMP%]{color:#00aec7}.tag[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-weight:700}.tag[_ngcontent-%COMP%]{background-color:#06369e;color:#fff;padding:.3rem .5rem;border-radius:2px;text-align:center;font-size:.75rem}.form-radio-label[_ngcontent-%COMP%]{margin:0}.form-radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + .radio-label[_ngcontent-%COMP%]{font-size:.875rem}.form-radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + .radio-label[_ngcontent-%COMP%]:before{top:.15rem}.line[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.125);padding-bottom:7px}.line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem}label[for=suma][_ngcontent-%COMP%]{font-size:.75rem}[_nghost-%COMP%]     .disabled-mobility-tooltip{z-index:inherit!important}[_nghost-%COMP%]     .disabled-mobility-tooltip .arrow{left:25%!important}[_nghost-%COMP%]     .disabled-mobility-tooltip .arrow:before{border-bottom:.75rem solid red!important}[_nghost-%COMP%]     .disabled-mobility-tooltip .tooltip-inner{color:red;border-color:red!important;padding:1rem}[_nghost-%COMP%]     .disabled-mobility-tooltip .tooltip-inner p{padding:0;margin:0}"]}),e})()}];let D=(()=>{class e{}return e.\u0275mod=f["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[n.j.forChild(j)],n.j]}),e})();var V=i("NdbC");let L=(()=>{class e{}return e.\u0275mod=f["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[y.AccountService,y.QuotingService,y.AditionalAccessoriesService],imports:[[o.c,V.a,D]]}),e})()}}]);